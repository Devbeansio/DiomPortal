{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { DIOM_BASED_URLS } from \"../../../../config/url\";\nimport { toast } from \"react-toastify\";\nimport { useParams } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { getBranddDetail } from \"../../../../APIS/locationBrands\";\nimport { useQueryClient, useQuery } from \"react-query\";\nimport { getBranddDetaildropdown } from \"../../../../APIS/locationBrands\";\nimport { getBrandallocationdropdown } from \"../../../../APIS/locationBrands\";\nimport moment from \"moment\";\n\nconst useLocationBrandDetail = () => {\n  _s();\n\n  var _BrandDetailData$data, _BrandDetailDropDownD, _BrandlocationsDropDo;\n\n  const QueryClient = useQueryClient();\n  const [error, setError] = useState(null);\n  const [locationBrandData, setLocationBrandData] = useState({});\n  const [selectedMulti, setSelectedMulti] = useState();\n  const [locationsbrandsDropDown, setLocationsbrandsDropDown] = useState([]);\n  const [modal_static, setModal_static] = useState(false);\n  const [modal_static1, setModal_static1] = useState(false);\n  const [selectedvalue, setSelectedvalue] = useState({});\n  const [loaded, setLoaded] = useState(false);\n  const [startTime, setStartTime] = useState(0);\n  const [endTime, setEndTime] = useState(0);\n  const {\n    id\n  } = useParams();\n  const token = localStorage.getItem(\"Token\");\n  const history = useHistory();\n\n  const locationBrandnameonchange = event => {\n    setLocationBrandData(prev => ({ ...prev,\n      name: event.target.value\n    }));\n  };\n\n  const startTimeFunc = e => {\n    // console.log(\"start time : \", e.target.value);\n    setStartTime(e.target.value);\n  };\n\n  const endTimeFunc = e => {\n    setEndTime(e.target.value);\n  };\n\n  const removeBodyCss = () => {\n    document.body.classList.add(\"no_padding\");\n  };\n\n  const tog_static = () => {\n    setModal_static(!modal_static);\n    removeBodyCss();\n  };\n\n  const tog_static1 = () => {\n    setModal_static1(!modal_static1);\n    removeBodyCss();\n  };\n\n  const textareachange = event => {\n    setLocationBrandData(prev => ({ ...prev,\n      description: event.target.value\n    }));\n  };\n\n  const handleMulti = selected => {\n    if (selectedMulti.length < selected.length) {\n      const lenthOFAdded = selected.length - 1;\n      setSelectedvalue(selected[lenthOFAdded].value);\n\n      if (selected[lenthOFAdded].locationCategoriesId === \"\") {\n        fetch(`${DIOM_BASED_URLS}/admin-business-locations/${selected[lenthOFAdded].value}/category`, {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json, text/plain\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n            Authorization: \"Bearer \" + token\n          },\n          body: JSON.stringify({\n            locationCategoryId: `${id}`\n          })\n        }).then(result3 => {\n          if (result3.status === 200) {\n            toast.success(\"Updated Successfully\");\n            QueryClient.invalidateQueries(\"Brandlocations\");\n            QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n            QueryClient.invalidateQueries(\"BrandDetail\");\n          } else if (result3.status === 204) {\n            toast.success(\"Updated Successfully\");\n            QueryClient.invalidateQueries(\"Brandlocations\");\n            QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n            QueryClient.invalidateQueries(\"BrandDetail\");\n          } else {\n            toast.error(\" Something went wrong\");\n          }\n        }).catch(error => console.log(\"error\", error));\n      } else {\n        tog_static1();\n      }\n    } else if (selectedMulti.length > selected.length) {\n      const mappedValuedSelected = selected.map(e => {\n        return e.value;\n      });\n      const filteredValue = selectedMulti.filter(e => {\n        return !mappedValuedSelected.includes(e.value);\n      });\n      fetch(`${DIOM_BASED_URLS}/admin-business-locations/${filteredValue[0].value}/category`, {\n        method: \"DELETE\",\n        headers: {\n          Accept: \"application/json, text/plain\",\n          \"Content-Type\": \"application/json;charset=UTF-8\",\n          Authorization: \"Bearer \" + token\n        },\n        body: JSON.stringify({})\n      }).then(result3 => {\n        if (result3.status === 200) {\n          toast.success(\" Successfully Deleted\");\n          QueryClient.invalidateQueries(\"Brandlocations\");\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n          QueryClient.invalidateQueries(\"BrandDetail\");\n        } else if (result3.status === 204) {\n          toast.success(\" Successfullyn Deleted\");\n          QueryClient.invalidateQueries(\"Brandlocations\");\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n          QueryClient.invalidateQueries(\"BrandDetail\");\n        } else {\n          toast.error(\" Something went wrong\");\n        }\n      }).catch(error => toast.error(\" Something went wrong\"));\n    }\n\n    setSelectedMulti(selected);\n  };\n\n  const updateNameAndDescription = () => {\n    fetch(`${DIOM_BASED_URLS}/admin-location-categories/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        name: `${locationBrandData.name}`,\n        description: `${locationBrandData.description}`,\n        // locationTitle: selectedMulti,\n        startTime: `${startTime}`,\n        endTime: `${endTime}`\n      })\n    }).then(result3 => {\n      if (result3.status === 200) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"Brandlocations\");\n        QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n        QueryClient.invalidateQueries(\"BrandDetail\");\n      } else if (result3.status === 204) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"Brandlocations\");\n        QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n        QueryClient.invalidateQueries(\"BrandDetail\");\n      } else {\n        toast.error(\" Something went wrong\");\n      }\n\n      setModal_static(false);\n    }).catch(error => toast.error(\" Something went wrong\"));\n  };\n\n  const postbrandLocations = () => {\n    fetch(`${DIOM_BASED_URLS}/admin-business-locations/${selectedvalue}/category`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        locationCategoryId: `${id}`\n      })\n    }).then(result3 => {\n      if (result3.status === 200) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"Brandlocations\");\n        QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n        QueryClient.invalidateQueries(\"BrandDetail\");\n      } else if (result3.status === 204) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"Brandlocations\");\n        QueryClient.invalidateQueries(\"BrandDetaildropdown\");\n        QueryClient.invalidateQueries(\"BrandDetail\");\n      } else {\n        toast.error(\" Something went wrong\");\n      }\n\n      setModal_static(false);\n    }).catch(error => toast.error(\" Something went wrong\"));\n    setModal_static1(false);\n  }; // *************\n\n\n  const BrandDetailData = useQuery([\"BrandDetail\", id], () => getBranddDetail(token, id));\n  const BrandDetailDailedData = BrandDetailData === null || BrandDetailData === void 0 ? void 0 : (_BrandDetailData$data = BrandDetailData.data) === null || _BrandDetailData$data === void 0 ? void 0 : _BrandDetailData$data.data; // *************\n\n  const getBrandDetail = async () => {\n    setLocationBrandData(BrandDetailDailedData);\n  }; // *************\n\n\n  const BrandDetailDropDownData = useQuery([\"BrandDetaildropdown\", id], () => getBranddDetaildropdown(token, id));\n  const BrandDetailDropDownDailedData = BrandDetailDropDownData === null || BrandDetailDropDownData === void 0 ? void 0 : (_BrandDetailDropDownD = BrandDetailDropDownData.data) === null || _BrandDetailDropDownD === void 0 ? void 0 : _BrandDetailDropDownD.data; // console.log(\n  //   \"BrandDetailDropDownDailedData : \",\n  //   BrandDetailDropDownDailedData\n  // );\n  // *************\n\n  const getBrandDetaildropdown = async () => {\n    const matadata = BrandDetailDropDownDailedData.map(element => {\n      return {\n        label: element.Name,\n        value: element.id\n      };\n    });\n    setSelectedMulti(matadata);\n    setLocationsbrandsDropDown(matadata);\n  }; // *************\n\n\n  const BrandlocationsDropDownData = useQuery([\"Brandlocations\", id], () => getBrandallocationdropdown(token, id));\n  const BrandLocationsDailedData = BrandlocationsDropDownData === null || BrandlocationsDropDownData === void 0 ? void 0 : (_BrandlocationsDropDo = BrandlocationsDropDownData.data) === null || _BrandlocationsDropDo === void 0 ? void 0 : _BrandlocationsDropDo.data;\n  const isLoader = BrandlocationsDropDownData.isLoader; // *************\n\n  const getBrandalllocationsdropdown = async () => {\n    const matadata = BrandLocationsDailedData.map(element => {\n      return {\n        label: element.Name,\n        value: element.id,\n        locationCategoriesId: element.locationCategoriesId\n      };\n    });\n    setLocationsbrandsDropDown(matadata);\n  };\n\n  useEffect(() => {\n    (async () => {\n      BrandDetailDailedData && (await getBrandDetail());\n      BrandDetailDropDownDailedData && (await getBrandDetaildropdown());\n      BrandLocationsDailedData && (await getBrandalllocationsdropdown());\n    })();\n  }, [BrandDetailDailedData, BrandDetailDropDownDailedData, BrandLocationsDailedData]);\n  return {\n    locationBrandData,\n    setLocationBrandData,\n    locationsbrandsDropDown,\n    selectedMulti,\n    setSelectedMulti,\n    modal_static,\n    setModal_static,\n    modal_static1,\n    setModal_static1,\n    setSelectedvalue,\n    selectedvalue,\n    setLoaded,\n    isLoader,\n    loaded,\n    startTime,\n    setStartTime,\n    endTime,\n    setEndTime,\n    tog_static,\n    tog_static1,\n    textareachange,\n    postbrandLocations,\n    locationBrandnameonchange,\n    endTimeFunc,\n    startTimeFunc,\n    updateNameAndDescription,\n    handleMulti\n  };\n};\n\n_s(useLocationBrandDetail, \"aVSyUcfM7/d8/Mb4vNhw/ea1CIs=\", false, function () {\n  return [useQueryClient, useParams, useHistory, useQuery, useQuery, useQuery];\n});\n\nexport default useLocationBrandDetail;","map":{"version":3,"sources":["D:/diom working project/staging/src/pages/Locations/LocationBrands/LocationBrandDetail/useLocationBrandDetail.js"],"names":["useState","useEffect","DIOM_BASED_URLS","toast","useParams","useHistory","getBranddDetail","useQueryClient","useQuery","getBranddDetaildropdown","getBrandallocationdropdown","moment","useLocationBrandDetail","QueryClient","error","setError","locationBrandData","setLocationBrandData","selectedMulti","setSelectedMulti","locationsbrandsDropDown","setLocationsbrandsDropDown","modal_static","setModal_static","modal_static1","setModal_static1","selectedvalue","setSelectedvalue","loaded","setLoaded","startTime","setStartTime","endTime","setEndTime","id","token","localStorage","getItem","history","locationBrandnameonchange","event","prev","name","target","value","startTimeFunc","e","endTimeFunc","removeBodyCss","document","body","classList","add","tog_static","tog_static1","textareachange","description","handleMulti","selected","length","lenthOFAdded","locationCategoriesId","fetch","method","headers","Accept","Authorization","JSON","stringify","locationCategoryId","then","result3","status","success","invalidateQueries","catch","console","log","mappedValuedSelected","map","filteredValue","filter","includes","updateNameAndDescription","postbrandLocations","BrandDetailData","BrandDetailDailedData","data","getBrandDetail","BrandDetailDropDownData","BrandDetailDropDownDailedData","getBrandDetaildropdown","matadata","element","label","Name","BrandlocationsDropDownData","BrandLocationsDailedData","isLoader","getBrandalllocationsdropdown"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,eAAT,QAAgC,wBAAhC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,eAAT,QAAgC,iCAAhC;AACA,SAASC,cAAT,EAAyBC,QAAzB,QAAyC,aAAzC;AACA,SAASC,uBAAT,QAAwC,iCAAxC;AACA,SAASC,0BAAT,QAA2C,iCAA3C;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AACA,MAAMC,sBAAsB,GAAG,MAAM;AAAA;;AAAA;;AACnC,QAAMC,WAAW,GAAGN,cAAc,EAAlC;AACA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACgB,iBAAD,EAAoBC,oBAApB,IAA4CjB,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAACkB,aAAD,EAAgBC,gBAAhB,IAAoCnB,QAAQ,EAAlD;AACA,QAAM,CAACoB,uBAAD,EAA0BC,0BAA1B,IAAwDrB,QAAQ,CAAC,EAAD,CAAtE;AACA,QAAM,CAACsB,YAAD,EAAeC,eAAf,IAAkCvB,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACwB,aAAD,EAAgBC,gBAAhB,IAAoCzB,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAAC0B,aAAD,EAAgBC,gBAAhB,IAAoC3B,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAAC4B,MAAD,EAASC,SAAT,IAAsB7B,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAAC8B,SAAD,EAAYC,YAAZ,IAA4B/B,QAAQ,CAAC,CAAD,CAA1C;AACA,QAAM,CAACgC,OAAD,EAAUC,UAAV,IAAwBjC,QAAQ,CAAC,CAAD,CAAtC;AAEA,QAAM;AAAEkC,IAAAA;AAAF,MAAS9B,SAAS,EAAxB;AACA,QAAM+B,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,QAAMC,OAAO,GAAGjC,UAAU,EAA1B;;AAEA,QAAMkC,yBAAyB,GAAIC,KAAD,IAAW;AAC3CvB,IAAAA,oBAAoB,CAAEwB,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAWC,MAAAA,IAAI,EAAEF,KAAK,CAACG,MAAN,CAAaC;AAA9B,KAAX,CAAD,CAApB;AACD,GAFD;;AAIA,QAAMC,aAAa,GAAIC,CAAD,IAAO;AAC3B;AACAf,IAAAA,YAAY,CAACe,CAAC,CAACH,MAAF,CAASC,KAAV,CAAZ;AACD,GAHD;;AAIA,QAAMG,WAAW,GAAID,CAAD,IAAO;AACzBb,IAAAA,UAAU,CAACa,CAAC,CAACH,MAAF,CAASC,KAAV,CAAV;AACD,GAFD;;AAIA,QAAMI,aAAa,GAAG,MAAM;AAC1BC,IAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,YAA5B;AACD,GAFD;;AAGA,QAAMC,UAAU,GAAG,MAAM;AACvB9B,IAAAA,eAAe,CAAC,CAACD,YAAF,CAAf;AACA0B,IAAAA,aAAa;AACd,GAHD;;AAIA,QAAMM,WAAW,GAAG,MAAM;AACxB7B,IAAAA,gBAAgB,CAAC,CAACD,aAAF,CAAhB;AAEAwB,IAAAA,aAAa;AACd,GAJD;;AAMA,QAAMO,cAAc,GAAIf,KAAD,IAAW;AAChCvB,IAAAA,oBAAoB,CAAEwB,IAAD,KAAW,EAC9B,GAAGA,IAD2B;AAE9Be,MAAAA,WAAW,EAAEhB,KAAK,CAACG,MAAN,CAAaC;AAFI,KAAX,CAAD,CAApB;AAID,GALD;;AAOA,QAAMa,WAAW,GAAIC,QAAD,IAAc;AAChC,QAAIxC,aAAa,CAACyC,MAAd,GAAuBD,QAAQ,CAACC,MAApC,EAA4C;AAC1C,YAAMC,YAAY,GAAGF,QAAQ,CAACC,MAAT,GAAkB,CAAvC;AAEAhC,MAAAA,gBAAgB,CAAC+B,QAAQ,CAACE,YAAD,CAAR,CAAuBhB,KAAxB,CAAhB;;AAEA,UAAIc,QAAQ,CAACE,YAAD,CAAR,CAAuBC,oBAAvB,KAAgD,EAApD,EAAwD;AACtDC,QAAAA,KAAK,CACF,GAAE5D,eAAgB,6BAA4BwD,QAAQ,CAACE,YAAD,CAAR,CAAuBhB,KAAM,WADzE,EAEH;AACEmB,UAAAA,MAAM,EAAE,MADV;AAEEC,UAAAA,OAAO,EAAE;AACPC,YAAAA,MAAM,EAAE,8BADD;AAEP,4BAAgB,gCAFT;AAGPC,YAAAA,aAAa,EAAE,YAAY/B;AAHpB,WAFX;AAOEe,UAAAA,IAAI,EAAEiB,IAAI,CAACC,SAAL,CAAe;AACnBC,YAAAA,kBAAkB,EAAG,GAAEnC,EAAG;AADP,WAAf;AAPR,SAFG,CAAL,CAcGoC,IAdH,CAcSC,OAAD,IAAa;AACjB,cAAIA,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AAC1BrE,YAAAA,KAAK,CAACsE,OAAN,CAAc,sBAAd;AACA5D,YAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,YAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,YAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,WALD,MAKO,IAAIH,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AACjCrE,YAAAA,KAAK,CAACsE,OAAN,CAAc,sBAAd;AACA5D,YAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,YAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,YAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,WALM,MAKA;AACLvE,YAAAA,KAAK,CAACW,KAAN,CAAY,uBAAZ;AACD;AACF,SA5BH,EA6BG6D,KA7BH,CA6BU7D,KAAD,IAAW8D,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB/D,KAArB,CA7BpB;AA8BD,OA/BD,MA+BO;AACLwC,QAAAA,WAAW;AACZ;AACF,KAvCD,MAuCO,IAAIpC,aAAa,CAACyC,MAAd,GAAuBD,QAAQ,CAACC,MAApC,EAA4C;AACjD,YAAMmB,oBAAoB,GAAGpB,QAAQ,CAACqB,GAAT,CAAcjC,CAAD,IAAO;AAC/C,eAAOA,CAAC,CAACF,KAAT;AACD,OAF4B,CAA7B;AAIA,YAAMoC,aAAa,GAAG9D,aAAa,CAAC+D,MAAd,CAAsBnC,CAAD,IAAO;AAChD,eAAO,CAACgC,oBAAoB,CAACI,QAArB,CAA8BpC,CAAC,CAACF,KAAhC,CAAR;AACD,OAFqB,CAAtB;AAIAkB,MAAAA,KAAK,CACF,GAAE5D,eAAgB,6BAA4B8E,aAAa,CAAC,CAAD,CAAb,CAAiBpC,KAAM,WADnE,EAEH;AACEmB,QAAAA,MAAM,EAAE,QADV;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAE,8BADD;AAEP,0BAAgB,gCAFT;AAGPC,UAAAA,aAAa,EAAE,YAAY/B;AAHpB,SAFX;AAOEe,QAAAA,IAAI,EAAEiB,IAAI,CAACC,SAAL,CAAe,EAAf;AAPR,OAFG,CAAL,CAYGE,IAZH,CAYSC,OAAD,IAAa;AACjB,YAAIA,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AAC1BrE,UAAAA,KAAK,CAACsE,OAAN,CAAc,uBAAd;AACA5D,UAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,UAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,UAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,SALD,MAKO,IAAIH,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AACjCrE,UAAAA,KAAK,CAACsE,OAAN,CAAc,wBAAd;AACA5D,UAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,UAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,UAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,SALM,MAKA;AACLvE,UAAAA,KAAK,CAACW,KAAN,CAAY,uBAAZ;AACD;AACF,OA1BH,EA2BG6D,KA3BH,CA2BU7D,KAAD,IAAWX,KAAK,CAACW,KAAN,CAAY,uBAAZ,CA3BpB;AA4BD;;AAEDK,IAAAA,gBAAgB,CAACuC,QAAD,CAAhB;AACD,GAhFD;;AAkFA,QAAMyB,wBAAwB,GAAG,MAAM;AACrCrB,IAAAA,KAAK,CAAE,GAAE5D,eAAgB,8BAA6BgC,EAAG,EAApD,EAAuD;AAC1D6B,MAAAA,MAAM,EAAE,OADkD;AAE1DC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,8BADD;AAEP,wBAAgB,gCAFT;AAGPC,QAAAA,aAAa,EAAE,YAAY/B;AAHpB,OAFiD;AAO1De,MAAAA,IAAI,EAAEiB,IAAI,CAACC,SAAL,CAAe;AACnB1B,QAAAA,IAAI,EAAG,GAAE1B,iBAAiB,CAAC0B,IAAK,EADb;AAEnBc,QAAAA,WAAW,EAAG,GAAExC,iBAAiB,CAACwC,WAAY,EAF3B;AAGnB;AACA1B,QAAAA,SAAS,EAAG,GAAEA,SAAU,EAJL;AAKnBE,QAAAA,OAAO,EAAG,GAAEA,OAAQ;AALD,OAAf;AAPoD,KAAvD,CAAL,CAeGsC,IAfH,CAeSC,OAAD,IAAa;AACjB,UAAIA,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AAC1BrE,QAAAA,KAAK,CAACsE,OAAN,CAAc,sBAAd;AACA5D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,OALD,MAKO,IAAIH,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AACjCrE,QAAAA,KAAK,CAACsE,OAAN,CAAc,sBAAd;AACA5D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,OALM,MAKA;AACLvE,QAAAA,KAAK,CAACW,KAAN,CAAY,uBAAZ;AACD;;AACDS,MAAAA,eAAe,CAAC,KAAD,CAAf;AACD,KA9BH,EA+BGoD,KA/BH,CA+BU7D,KAAD,IAAWX,KAAK,CAACW,KAAN,CAAY,uBAAZ,CA/BpB;AAgCD,GAjCD;;AAmCA,QAAMsE,kBAAkB,GAAG,MAAM;AAC/BtB,IAAAA,KAAK,CACF,GAAE5D,eAAgB,6BAA4BwB,aAAc,WAD1D,EAEH;AACEqC,MAAAA,MAAM,EAAE,MADV;AAEEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,8BADD;AAEP,wBAAgB,gCAFT;AAGPC,QAAAA,aAAa,EAAE,YAAY/B;AAHpB,OAFX;AAOEe,MAAAA,IAAI,EAAEiB,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,kBAAkB,EAAG,GAAEnC,EAAG;AADP,OAAf;AAPR,KAFG,CAAL,CAcGoC,IAdH,CAcSC,OAAD,IAAa;AACjB,UAAIA,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AAC1BrE,QAAAA,KAAK,CAACsE,OAAN,CAAc,sBAAd;AACA5D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,OALD,MAKO,IAAIH,OAAO,CAACC,MAAR,KAAmB,GAAvB,EAA4B;AACjCrE,QAAAA,KAAK,CAACsE,OAAN,CAAc,sBAAd;AACA5D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,gBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,qBAA9B;AACA7D,QAAAA,WAAW,CAAC6D,iBAAZ,CAA8B,aAA9B;AACD,OALM,MAKA;AACLvE,QAAAA,KAAK,CAACW,KAAN,CAAY,uBAAZ;AACD;;AACDS,MAAAA,eAAe,CAAC,KAAD,CAAf;AACD,KA7BH,EA8BGoD,KA9BH,CA8BU7D,KAAD,IAAWX,KAAK,CAACW,KAAN,CAAY,uBAAZ,CA9BpB;AAgCAW,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,GAlCD,CAtKmC,CA0MnC;;;AACA,QAAM4D,eAAe,GAAG7E,QAAQ,CAAC,CAAC,aAAD,EAAgB0B,EAAhB,CAAD,EAAsB,MACpD5B,eAAe,CAAC6B,KAAD,EAAQD,EAAR,CADe,CAAhC;AAGA,QAAMoD,qBAAqB,GAAGD,eAAH,aAAGA,eAAH,gDAAGA,eAAe,CAAEE,IAApB,0DAAG,sBAAuBA,IAArD,CA9MmC,CA+MnC;;AACA,QAAMC,cAAc,GAAG,YAAY;AACjCvE,IAAAA,oBAAoB,CAACqE,qBAAD,CAApB;AACD,GAFD,CAhNmC,CAoNnC;;;AACA,QAAMG,uBAAuB,GAAGjF,QAAQ,CAAC,CAAC,qBAAD,EAAwB0B,EAAxB,CAAD,EAA8B,MACpEzB,uBAAuB,CAAC0B,KAAD,EAAQD,EAAR,CADe,CAAxC;AAGA,QAAMwD,6BAA6B,GAAGD,uBAAH,aAAGA,uBAAH,gDAAGA,uBAAuB,CAAEF,IAA5B,0DAAG,sBAA+BA,IAArE,CAxNmC,CAyNnC;AACA;AACA;AACA;AACA;;AACA,QAAMI,sBAAsB,GAAG,YAAY;AACzC,UAAMC,QAAQ,GAAGF,6BAA6B,CAACX,GAA9B,CAAmCc,OAAD,IAAa;AAC9D,aAAO;AAAEC,QAAAA,KAAK,EAAED,OAAO,CAACE,IAAjB;AAAuBnD,QAAAA,KAAK,EAAEiD,OAAO,CAAC3D;AAAtC,OAAP;AACD,KAFgB,CAAjB;AAGAf,IAAAA,gBAAgB,CAACyE,QAAD,CAAhB;AACAvE,IAAAA,0BAA0B,CAACuE,QAAD,CAA1B;AACD,GAND,CA9NmC,CAsOnC;;;AACA,QAAMI,0BAA0B,GAAGxF,QAAQ,CAAC,CAAC,gBAAD,EAAmB0B,EAAnB,CAAD,EAAyB,MAClExB,0BAA0B,CAACyB,KAAD,EAAQD,EAAR,CADe,CAA3C;AAGA,QAAM+D,wBAAwB,GAAGD,0BAAH,aAAGA,0BAAH,gDAAGA,0BAA0B,CAAET,IAA/B,0DAAG,sBAAkCA,IAAnE;AACA,QAAMW,QAAQ,GAAGF,0BAA0B,CAACE,QAA5C,CA3OmC,CA4OnC;;AACA,QAAMC,4BAA4B,GAAG,YAAY;AAC/C,UAAMP,QAAQ,GAAGK,wBAAwB,CAAClB,GAAzB,CAA8Bc,OAAD,IAAa;AACzD,aAAO;AACLC,QAAAA,KAAK,EAAED,OAAO,CAACE,IADV;AAELnD,QAAAA,KAAK,EAAEiD,OAAO,CAAC3D,EAFV;AAGL2B,QAAAA,oBAAoB,EAAEgC,OAAO,CAAChC;AAHzB,OAAP;AAKD,KANgB,CAAjB;AAQAxC,IAAAA,0BAA0B,CAACuE,QAAD,CAA1B;AACD,GAVD;;AAYA3F,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAY;AACXqF,MAAAA,qBAAqB,KAAK,MAAME,cAAc,EAAzB,CAArB;AACAE,MAAAA,6BAA6B,KAAK,MAAMC,sBAAsB,EAAjC,CAA7B;AACAM,MAAAA,wBAAwB,KAAK,MAAME,4BAA4B,EAAvC,CAAxB;AACD,KAJD;AAKD,GANQ,EAMN,CACDb,qBADC,EAEDI,6BAFC,EAGDO,wBAHC,CANM,CAAT;AAYA,SAAO;AACLjF,IAAAA,iBADK;AAELC,IAAAA,oBAFK;AAGLG,IAAAA,uBAHK;AAILF,IAAAA,aAJK;AAKLC,IAAAA,gBALK;AAMLG,IAAAA,YANK;AAOLC,IAAAA,eAPK;AAQLC,IAAAA,aARK;AASLC,IAAAA,gBATK;AAULE,IAAAA,gBAVK;AAWLD,IAAAA,aAXK;AAYLG,IAAAA,SAZK;AAaLqE,IAAAA,QAbK;AAcLtE,IAAAA,MAdK;AAeLE,IAAAA,SAfK;AAgBLC,IAAAA,YAhBK;AAiBLC,IAAAA,OAjBK;AAkBLC,IAAAA,UAlBK;AAmBLoB,IAAAA,UAnBK;AAoBLC,IAAAA,WApBK;AAqBLC,IAAAA,cArBK;AAsBL6B,IAAAA,kBAtBK;AAuBL7C,IAAAA,yBAvBK;AAwBLQ,IAAAA,WAxBK;AAyBLF,IAAAA,aAzBK;AA0BLsC,IAAAA,wBA1BK;AA2BL1B,IAAAA;AA3BK,GAAP;AA6BD,CAlSD;;GAAM7C,sB;UACgBL,c,EAYLH,S,EAECC,U,EA4LQG,Q,EAUQA,Q,EAkBGA,Q;;;AA4DrC,eAAeI,sBAAf","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { DIOM_BASED_URLS } from \"../../../../config/url\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getBranddDetail } from \"../../../../APIS/locationBrands\";\r\nimport { useQueryClient, useQuery } from \"react-query\";\r\nimport { getBranddDetaildropdown } from \"../../../../APIS/locationBrands\";\r\nimport { getBrandallocationdropdown } from \"../../../../APIS/locationBrands\";\r\nimport moment from \"moment\";\r\nconst useLocationBrandDetail = () => {\r\n  const QueryClient = useQueryClient();\r\n  const [error, setError] = useState(null);\r\n  const [locationBrandData, setLocationBrandData] = useState({});\r\n  const [selectedMulti, setSelectedMulti] = useState();\r\n  const [locationsbrandsDropDown, setLocationsbrandsDropDown] = useState([]);\r\n  const [modal_static, setModal_static] = useState(false);\r\n  const [modal_static1, setModal_static1] = useState(false);\r\n  const [selectedvalue, setSelectedvalue] = useState({});\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [startTime, setStartTime] = useState(0);\r\n  const [endTime, setEndTime] = useState(0);\r\n\r\n  const { id } = useParams();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const history = useHistory();\r\n\r\n  const locationBrandnameonchange = (event) => {\r\n    setLocationBrandData((prev) => ({ ...prev, name: event.target.value }));\r\n  };\r\n\r\n  const startTimeFunc = (e) => {\r\n    // console.log(\"start time : \", e.target.value);\r\n    setStartTime(e.target.value);\r\n  };\r\n  const endTimeFunc = (e) => {\r\n    setEndTime(e.target.value);\r\n  };\r\n\r\n  const removeBodyCss = () => {\r\n    document.body.classList.add(\"no_padding\");\r\n  };\r\n  const tog_static = () => {\r\n    setModal_static(!modal_static);\r\n    removeBodyCss();\r\n  };\r\n  const tog_static1 = () => {\r\n    setModal_static1(!modal_static1);\r\n\r\n    removeBodyCss();\r\n  };\r\n\r\n  const textareachange = (event) => {\r\n    setLocationBrandData((prev) => ({\r\n      ...prev,\r\n      description: event.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleMulti = (selected) => {\r\n    if (selectedMulti.length < selected.length) {\r\n      const lenthOFAdded = selected.length - 1;\r\n\r\n      setSelectedvalue(selected[lenthOFAdded].value);\r\n\r\n      if (selected[lenthOFAdded].locationCategoriesId === \"\") {\r\n        fetch(\r\n          `${DIOM_BASED_URLS}/admin-business-locations/${selected[lenthOFAdded].value}/category`,\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              Accept: \"application/json, text/plain\",\r\n              \"Content-Type\": \"application/json;charset=UTF-8\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n            body: JSON.stringify({\r\n              locationCategoryId: `${id}`,\r\n            }),\r\n          }\r\n        )\r\n          .then((result3) => {\r\n            if (result3.status === 200) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"Brandlocations\");\r\n              QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"BrandDetail\");\r\n            } else if (result3.status === 204) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"Brandlocations\");\r\n              QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"BrandDetail\");\r\n            } else {\r\n              toast.error(\" Something went wrong\");\r\n            }\r\n          })\r\n          .catch((error) => console.log(\"error\", error));\r\n      } else {\r\n        tog_static1();\r\n      }\r\n    } else if (selectedMulti.length > selected.length) {\r\n      const mappedValuedSelected = selected.map((e) => {\r\n        return e.value;\r\n      });\r\n\r\n      const filteredValue = selectedMulti.filter((e) => {\r\n        return !mappedValuedSelected.includes(e.value);\r\n      });\r\n\r\n      fetch(\r\n        `${DIOM_BASED_URLS}/admin-business-locations/${filteredValue[0].value}/category`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Accept: \"application/json, text/plain\",\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n          body: JSON.stringify({}),\r\n        }\r\n      )\r\n        .then((result3) => {\r\n          if (result3.status === 200) {\r\n            toast.success(\" Successfully Deleted\");\r\n            QueryClient.invalidateQueries(\"Brandlocations\");\r\n            QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"BrandDetail\");\r\n          } else if (result3.status === 204) {\r\n            toast.success(\" Successfullyn Deleted\");\r\n            QueryClient.invalidateQueries(\"Brandlocations\");\r\n            QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"BrandDetail\");\r\n          } else {\r\n            toast.error(\" Something went wrong\");\r\n          }\r\n        })\r\n        .catch((error) => toast.error(\" Something went wrong\"));\r\n    }\r\n\r\n    setSelectedMulti(selected);\r\n  };\r\n\r\n  const updateNameAndDescription = () => {\r\n    fetch(`${DIOM_BASED_URLS}/admin-location-categories/${id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        name: `${locationBrandData.name}`,\r\n        description: `${locationBrandData.description}`,\r\n        // locationTitle: selectedMulti,\r\n        startTime: `${startTime}`,\r\n        endTime: `${endTime}`,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  };\r\n\r\n  const postbrandLocations = () => {\r\n    fetch(\r\n      `${DIOM_BASED_URLS}/admin-business-locations/${selectedvalue}/category`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/json, text/plain\",\r\n          \"Content-Type\": \"application/json;charset=UTF-8\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n        body: JSON.stringify({\r\n          locationCategoryId: `${id}`,\r\n        }),\r\n      }\r\n    )\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n    setModal_static1(false);\r\n  };\r\n\r\n  // *************\r\n  const BrandDetailData = useQuery([\"BrandDetail\", id], () =>\r\n    getBranddDetail(token, id)\r\n  );\r\n  const BrandDetailDailedData = BrandDetailData?.data?.data;\r\n  // *************\r\n  const getBrandDetail = async () => {\r\n    setLocationBrandData(BrandDetailDailedData);\r\n  };\r\n\r\n  // *************\r\n  const BrandDetailDropDownData = useQuery([\"BrandDetaildropdown\", id], () =>\r\n    getBranddDetaildropdown(token, id)\r\n  );\r\n  const BrandDetailDropDownDailedData = BrandDetailDropDownData?.data?.data;\r\n  // console.log(\r\n  //   \"BrandDetailDropDownDailedData : \",\r\n  //   BrandDetailDropDownDailedData\r\n  // );\r\n  // *************\r\n  const getBrandDetaildropdown = async () => {\r\n    const matadata = BrandDetailDropDownDailedData.map((element) => {\r\n      return { label: element.Name, value: element.id };\r\n    });\r\n    setSelectedMulti(matadata);\r\n    setLocationsbrandsDropDown(matadata);\r\n  };\r\n\r\n  // *************\r\n  const BrandlocationsDropDownData = useQuery([\"Brandlocations\", id], () =>\r\n    getBrandallocationdropdown(token, id)\r\n  );\r\n  const BrandLocationsDailedData = BrandlocationsDropDownData?.data?.data;\r\n  const isLoader = BrandlocationsDropDownData.isLoader;\r\n  // *************\r\n  const getBrandalllocationsdropdown = async () => {\r\n    const matadata = BrandLocationsDailedData.map((element) => {\r\n      return {\r\n        label: element.Name,\r\n        value: element.id,\r\n        locationCategoriesId: element.locationCategoriesId,\r\n      };\r\n    });\r\n\r\n    setLocationsbrandsDropDown(matadata);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      BrandDetailDailedData && (await getBrandDetail());\r\n      BrandDetailDropDownDailedData && (await getBrandDetaildropdown());\r\n      BrandLocationsDailedData && (await getBrandalllocationsdropdown());\r\n    })();\r\n  }, [\r\n    BrandDetailDailedData,\r\n    BrandDetailDropDownDailedData,\r\n    BrandLocationsDailedData,\r\n  ]);\r\n\r\n  return {\r\n    locationBrandData,\r\n    setLocationBrandData,\r\n    locationsbrandsDropDown,\r\n    selectedMulti,\r\n    setSelectedMulti,\r\n    modal_static,\r\n    setModal_static,\r\n    modal_static1,\r\n    setModal_static1,\r\n    setSelectedvalue,\r\n    selectedvalue,\r\n    setLoaded,\r\n    isLoader,\r\n    loaded,\r\n    startTime,\r\n    setStartTime,\r\n    endTime,\r\n    setEndTime,\r\n    tog_static,\r\n    tog_static1,\r\n    textareachange,\r\n    postbrandLocations,\r\n    locationBrandnameonchange,\r\n    endTimeFunc,\r\n    startTimeFunc,\r\n    updateNameAndDescription,\r\n    handleMulti,\r\n  };\r\n};\r\nexport default useLocationBrandDetail;\r\n"]},"metadata":{},"sourceType":"module"}