{"ast":null,"code":"import _regeneratorRuntime from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useQueryClient}from\"react-query\";import{getcustomers}from\"../../../APIS/customerCheckedIn\";import{usePaginatedQuery}from\"../../../hooks/query\";import{getcheckInLocations,getLocations}from\"../../../APIS\";import{useAllDataQuery}from\"../../../hooks/query\";export var useCheckedInCustomer=function useCheckedInCustomer(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setFilter=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];var token=localStorage.getItem(\"Token\");var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(50),_useState8=_slicedToArray(_useState7,2),pageSize=_useState8[0],setPageSize=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),applyLocationFilter=_useState10[0],setApplyLocationFilter=_useState10[1];var changeCurrentPage=function changeCurrentPage(pageNum){return setCurrentPage(pageNum);};var queryClient=useQueryClient();var _usePaginatedQuery=usePaginatedQuery([\"checkedcustomers\",\"\".concat(pageSize),\"\".concat(currentPage),\"\".concat(filter)],function(){return getcustomers(filter,pageSize,currentPage,token,applyLocationFilter);}),_usePaginatedQuery$da=_usePaginatedQuery.data,customerCheckInData=_usePaginatedQuery$da.data,hasNextPage=_usePaginatedQuery$da.hasNextPage,hasPreviousPage=_usePaginatedQuery$da.hasPreviousPage,total=_usePaginatedQuery$da.total,isLoading=_usePaginatedQuery.isLoading;var _useAllDataQuery=useAllDataQuery([\"locations\",\"visible\"],function(){return getcheckInLocations(token);}),locationsData=_useAllDataQuery.data,loadingLocations=_useAllDataQuery.isLoading;var toggle=function toggle(){setIsOpen(!isOpen);};var pagelengthnum=function pagelengthnum(e){if(e.target.value===\"1\"){setPageSize(10);}else if(e.target.value===\"2\"){setPageSize(30);}else if(e.target.value===\"3\"){setPageSize(50);}};var pageOptions={sizePerPage:pageSize,totalSize:total!==null&&total!==void 0?total:0,custom:true};var handeldiomlocation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(val){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(val===\"All\"){setCurrentPage(1);setApplyLocationFilter(false);setFilter();queryClient.invalidateQueries(\"checkedcustomers\");}else{setCurrentPage(1);setFilter(val);setApplyLocationFilter(true);queryClient.invalidateQueries(\"checkedcustomers\");}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handeldiomlocation(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(hasNextPage){var nextPage=currentPage+1;queryClient.prefetchQuery([\"checkedcustomer\",\"\".concat(pageSize),\"\".concat(currentPage),\"\".concat(filter)],function(){return getcustomers(filter,pageSize,nextPage,token,applyLocationFilter);});}},[currentPage,queryClient]);return{currentPage:currentPage,pageOptions:pageOptions,customerCheckInData:customerCheckInData,hasNextPage:hasNextPage,hasPreviousPage:hasPreviousPage,total:total,pagelengthnum:pagelengthnum,pageSize:pageSize,toggle:toggle,isOpen:isOpen,isLoading:isLoading,handeldiomlocation:handeldiomlocation,// diomLocation,\nlocationsData:locationsData,changeCurrentPage:changeCurrentPage};};","map":{"version":3,"names":["useEffect","useState","useQueryClient","getcustomers","usePaginatedQuery","getcheckInLocations","getLocations","useAllDataQuery","useCheckedInCustomer","filter","setFilter","isOpen","setIsOpen","token","localStorage","getItem","currentPage","setCurrentPage","pageSize","setPageSize","applyLocationFilter","setApplyLocationFilter","changeCurrentPage","pageNum","queryClient","data","customerCheckInData","hasNextPage","hasPreviousPage","total","isLoading","locationsData","loadingLocations","toggle","pagelengthnum","e","target","value","pageOptions","sizePerPage","totalSize","custom","handeldiomlocation","val","invalidateQueries","nextPage","prefetchQuery"],"sources":["D:/diom working project/staging/src/pages/MyDashboard/CheckedinCustomer/useCheckedInCustomer.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { getcustomers } from \"../../../APIS/customerCheckedIn\";\r\nimport { usePaginatedQuery } from \"../../../hooks/query\";\r\nimport { getcheckInLocations, getLocations } from \"../../../APIS\";\r\nimport { useAllDataQuery } from \"../../../hooks/query\";\r\n\r\nexport const useCheckedInCustomer = () => {\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const [applyLocationFilter, setApplyLocationFilter] = useState(false);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const queryClient = useQueryClient();\r\n  const {\r\n    data: { data: customerCheckInData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"checkedcustomers\",`${pageSize}`,`${currentPage}`,`${filter}`], () =>\r\n    getcustomers(filter, pageSize, currentPage, token, applyLocationFilter)\r\n  );\r\n  const { data: locationsData, isLoading: loadingLocations } = useAllDataQuery(\r\n    [\"locations\", \"visible\"],\r\n    () => getcheckInLocations(token)\r\n  );\r\n\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n  const pagelengthnum = (e) => {\r\n    if (e.target.value === \"1\") {\r\n      setPageSize(10);\r\n    } else if (e.target.value === \"2\") {\r\n      setPageSize(30);\r\n    } else if (e.target.value === \"3\") {\r\n      setPageSize(50);\r\n    }\r\n  };\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n\r\n  const handeldiomlocation = async (val) => {\r\n    if (val === \"All\") {\r\n      setCurrentPage(1);\r\n      setApplyLocationFilter(false);\r\n      setFilter();\r\n      queryClient.invalidateQueries(\"checkedcustomers\");\r\n    } else {\r\n      setCurrentPage(1);\r\n      setFilter(val);\r\n      setApplyLocationFilter(true);\r\n      queryClient.invalidateQueries(\"checkedcustomers\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"checkedcustomer\", `${pageSize}`,`${currentPage}`,`${filter}`], () =>\r\n        getcustomers(filter, pageSize, nextPage, token, applyLocationFilter)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient]);\r\n  return {\r\n    currentPage,\r\n    pageOptions,\r\n    customerCheckInData,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    pagelengthnum,\r\n    pageSize,\r\n    toggle,\r\n    isOpen,\r\n    isLoading,\r\n    handeldiomlocation,\r\n    // diomLocation,\r\n    locationsData,\r\n    changeCurrentPage,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}