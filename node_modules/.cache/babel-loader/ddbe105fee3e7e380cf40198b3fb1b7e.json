{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useQueryClient } from \"react-query\";\nimport { getInvoice } from \"../../../../APIS/invoices\";\nimport { usePaginatedQuery } from \"../../../../hooks/query\";\nimport { useHistory, useParams } from \"react-router-dom\";\nexport const useInvoice = () => {\n  _s();\n\n  let history = useHistory();\n  const token = localStorage.getItem(\"Token\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize] = useState(50);\n\n  const changeCurrentPage = pageNum => setCurrentPage(pageNum);\n\n  const queryClient = useQueryClient();\n  const {\n    id\n  } = useParams();\n  const {\n    data: {\n      data: InvoiceData,\n      hasNextPage,\n      hasPreviousPage,\n      total\n    },\n    isLoading\n  } = usePaginatedQuery([\"Invoice\", currentPage], () => getInvoice(pageSize, currentPage, token, id, history));\n  const pageOptions = {\n    sizePerPage: pageSize,\n    totalSize: total !== null && total !== void 0 ? total : 0,\n    custom: true\n  };\n  useEffect(() => {\n    // FOR PRE-FETCHING NEXT PAGE\n    if (hasNextPage) {\n      const nextPage = currentPage + 1;\n      queryClient.prefetchQuery([\"Invoice\", nextPage], () => getInvoice(pageSize, nextPage, token, id, history));\n    }\n  }, [currentPage, queryClient]);\n  return {\n    currentPage,\n    pageOptions,\n    InvoiceData,\n    hasNextPage,\n    hasPreviousPage,\n    total,\n    isLoading,\n    changeCurrentPage\n  };\n};\n\n_s(useInvoice, \"NWpG1dliE/7xKtpMtl7YbfLDhfA=\", false, function () {\n  return [useHistory, useQueryClient, useParams, usePaginatedQuery];\n});","map":{"version":3,"names":["useEffect","useState","useQueryClient","getInvoice","usePaginatedQuery","useHistory","useParams","useInvoice","history","token","localStorage","getItem","currentPage","setCurrentPage","pageSize","changeCurrentPage","pageNum","queryClient","id","data","InvoiceData","hasNextPage","hasPreviousPage","total","isLoading","pageOptions","sizePerPage","totalSize","custom","nextPage","prefetchQuery"],"sources":["C:/Users/tech sign/Desktop/xyz/src/pages/Finance/InvoicesMainPage/InvoicesDetailPage/useInvoicesDetail.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { getInvoice } from \"../../../../APIS/invoices\";\r\nimport { usePaginatedQuery } from \"../../../../hooks/query\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nexport const useInvoice = () => {\r\n  let history = useHistory();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize] = useState(50);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const queryClient = useQueryClient();\r\n  const { id } = useParams();\r\n\r\n  const {\r\n    data: { data: InvoiceData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"Invoice\", currentPage], () =>\r\n    getInvoice(pageSize, currentPage, token, id,history)\r\n  );\r\n\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n\r\n  useEffect(() => {\r\n    // FOR PRE-FETCHING NEXT PAGE\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"Invoice\", nextPage], () =>\r\n        getInvoice(pageSize, nextPage, token, id,history)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient]);\r\n\r\n  return {\r\n    currentPage,\r\n    pageOptions,\r\n    InvoiceData,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    isLoading,\r\n    changeCurrentPage,\r\n  };\r\n};\r\n"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,SAASC,iBAAT,QAAkC,yBAAlC;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AAEA,OAAO,MAAMC,UAAU,GAAG,MAAM;EAAA;;EAC9B,IAAIC,OAAO,GAAGH,UAAU,EAAxB;EACA,MAAMI,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;EACA,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,CAAC,CAAD,CAA9C;EACA,MAAM,CAACa,QAAD,IAAab,QAAQ,CAAC,EAAD,CAA3B;;EACA,MAAMc,iBAAiB,GAAIC,OAAD,IAAaH,cAAc,CAACG,OAAD,CAArD;;EACA,MAAMC,WAAW,GAAGf,cAAc,EAAlC;EACA,MAAM;IAAEgB;EAAF,IAASZ,SAAS,EAAxB;EAEA,MAAM;IACJa,IAAI,EAAE;MAAEA,IAAI,EAAEC,WAAR;MAAqBC,WAArB;MAAkCC,eAAlC;MAAmDC;IAAnD,CADF;IAEJC;EAFI,IAGFpB,iBAAiB,CAAC,CAAC,SAAD,EAAYQ,WAAZ,CAAD,EAA2B,MAC9CT,UAAU,CAACW,QAAD,EAAWF,WAAX,EAAwBH,KAAxB,EAA+BS,EAA/B,EAAkCV,OAAlC,CADS,CAHrB;EAOA,MAAMiB,WAAW,GAAG;IAClBC,WAAW,EAAEZ,QADK;IAElBa,SAAS,EAAEJ,KAAF,aAAEA,KAAF,cAAEA,KAAF,GAAW,CAFF;IAGlBK,MAAM,EAAE;EAHU,CAApB;EAMA5B,SAAS,CAAC,MAAM;IACd;IACA,IAAIqB,WAAJ,EAAiB;MACf,MAAMQ,QAAQ,GAAGjB,WAAW,GAAG,CAA/B;MACAK,WAAW,CAACa,aAAZ,CAA0B,CAAC,SAAD,EAAYD,QAAZ,CAA1B,EAAiD,MAC/C1B,UAAU,CAACW,QAAD,EAAWe,QAAX,EAAqBpB,KAArB,EAA4BS,EAA5B,EAA+BV,OAA/B,CADZ;IAGD;EACF,CARQ,EAQN,CAACI,WAAD,EAAcK,WAAd,CARM,CAAT;EAUA,OAAO;IACLL,WADK;IAELa,WAFK;IAGLL,WAHK;IAILC,WAJK;IAKLC,eALK;IAMLC,KANK;IAOLC,SAPK;IAQLT;EARK,CAAP;AAUD,CA1CM;;GAAMR,U;UACGF,U,EAKMH,c,EACLI,S,EAKXF,iB"},"metadata":{},"sourceType":"module"}