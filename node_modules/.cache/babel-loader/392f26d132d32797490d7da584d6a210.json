{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useQueryClient } from \"react-query\";\nimport { getInvoices } from \"../../../APIS/invoices\"; // import { useAllDataQuery, usePaginatedQuery } from \"../../hooks/query\";\n\nimport { usePaginatedQuery } from \"../../../hooks/query\";\nimport LoaderHook from \"../../../hooks/loaderHook\";\nexport const useInvoices = () => {\n  _s();\n\n  const {\n    setLoading\n  } = LoaderHook();\n  const [isOpen, setIsOpen] = useState(false);\n  const token = localStorage.getItem(\"Token\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(50);\n\n  const changeCurrentPage = pageNum => setCurrentPage(pageNum);\n\n  const queryClient = useQueryClient();\n  const {\n    data: {\n      data: Invoiceslistingdata,\n      hasNextPage,\n      hasPreviousPage,\n      total\n    },\n    isLoading\n  } = usePaginatedQuery([\"Invoices\", currentPage], () => getInvoices(pageSize, currentPage, token));\n\n  const toggle = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const pagelengthnum = e => {\n    if (e.target.value === \"1\") {\n      setPageSize(10);\n    } else if (e.target.value === \"2\") {\n      setPageSize(30);\n    } else if (e.target.value === \"3\") {\n      setPageSize(50);\n    }\n  };\n\n  const pageOptions = {\n    sizePerPage: pageSize,\n    totalSize: total !== null && total !== void 0 ? total : 0,\n    custom: true\n  };\n\n  const loadingFunc = () => {\n    setLoading(isLoading);\n  };\n\n  useEffect(() => {\n    loadingFunc(); // FOR PRE-FETCHING NEXT PAGE\n\n    console.log(hasNextPage);\n\n    if (hasNextPage) {\n      const nextPage = currentPage + 1;\n      queryClient.prefetchQuery([\"Invoices\", nextPage], () => getInvoices(pageSize, nextPage, token));\n    }\n  }, [currentPage, queryClient, isLoading]);\n  return {\n    currentPage,\n    pageOptions,\n    Invoiceslistingdata,\n    hasNextPage,\n    hasPreviousPage,\n    total,\n    isLoading,\n    pagelengthnum,\n    pageSize,\n    toggle,\n    isOpen,\n    changeCurrentPage\n  };\n};\n\n_s(useInvoices, \"msNMjBaeBdV6V6wxVGC/BnBGVYY=\", false, function () {\n  return [useQueryClient, usePaginatedQuery];\n});","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom(3)/src/pages/Finance/InvoicesMainPage/useInvoices.js"],"names":["useEffect","useState","useQueryClient","getInvoices","usePaginatedQuery","LoaderHook","useInvoices","setLoading","isOpen","setIsOpen","token","localStorage","getItem","currentPage","setCurrentPage","pageSize","setPageSize","changeCurrentPage","pageNum","queryClient","data","Invoiceslistingdata","hasNextPage","hasPreviousPage","total","isLoading","toggle","pagelengthnum","e","target","value","pageOptions","sizePerPage","totalSize","custom","loadingFunc","console","log","nextPage","prefetchQuery"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { getInvoices } from \"../../../APIS/invoices\";\r\n// import { useAllDataQuery, usePaginatedQuery } from \"../../hooks/query\";\r\nimport { usePaginatedQuery } from \"../../../hooks/query\";\r\nimport LoaderHook from \"../../../hooks/loaderHook\";\r\nexport const useInvoices = () => {\r\n  const { setLoading } = LoaderHook();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const queryClient = useQueryClient();\r\n\r\n  const {\r\n    data: { data: Invoiceslistingdata, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"Invoices\", currentPage], () =>\r\n    getInvoices(pageSize, currentPage, token)\r\n  );\r\n\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n  const pagelengthnum = (e) => {\r\n    if (e.target.value === \"1\") {\r\n      setPageSize(10);\r\n    } else if (e.target.value === \"2\") {\r\n      setPageSize(30);\r\n    } else if (e.target.value === \"3\") {\r\n      setPageSize(50);\r\n    }\r\n  };\r\n\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n  const loadingFunc = () => {\r\n    setLoading(isLoading);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadingFunc();\r\n    // FOR PRE-FETCHING NEXT PAGE\r\n    console.log(hasNextPage);\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"Invoices\", nextPage], () =>\r\n        getInvoices(pageSize, nextPage, token)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient, isLoading]);\r\n\r\n  return {\r\n    currentPage,\r\n    pageOptions,\r\n    Invoiceslistingdata,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    isLoading,\r\n\r\n    pagelengthnum,\r\n    pageSize,\r\n    toggle,\r\n    isOpen,\r\n    changeCurrentPage,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}