{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { getAdminNotifications } from \"../../APIS/notifications\";\nimport { DIOM_BASED_URLS } from \"../../config/url\";\nimport { useQueryClient } from \"react-query\";\nimport { toast } from \"react-toastify\";\n\nfunction UseNotifications() {\n  _s();\n\n  var _adminNotificationsda, _adminNotificationsda2;\n\n  const [pageNumber, setPageNumber] = useState(1);\n  const [adminNotificationdta, setadminNotificationdta] = useState();\n  const token = localStorage.getItem(\"Token\");\n  const QueryClient = useQueryClient();\n\n  const markAllReadFunc = () => {\n    fetch(`${DIOM_BASED_URLS}/admin-notifications`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        markRead: true\n      })\n    }).then(result3 => {\n      QueryClient.invalidateQueries(\"adminNotifications\");\n    }).catch(error => toast.error(\" Something went wrong\"));\n  };\n\n  const notificationSeenFunc = e => {\n    fetch(`${DIOM_BASED_URLS}/admin-notifications/${e.id}`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        markRead: true\n      })\n    }).then(result3 => {\n      QueryClient.invalidateQueries(\"adminNotifications\");\n    }).catch(error => toast.error(\" Something went wrong\"));\n  }; // *************\n\n\n  const fetchMoreData = () => {\n    setPageNumber(pageNumber + 1);\n  };\n\n  const adminNotificationsdata = useQuery([\"adminNotifications\", pageNumber], () => getAdminNotifications(token, pageNumber), {\n    refetchInterval: 15000\n  }); // const adminNotificationsdata = adminNotificationdta?adminNotificationdta.concat(adminNotificationsdta):adminNotificationdta\n  // setadminNotificationdta(adminNotificationsdta)\n  // console.log(\"adminNotificationsdata : \",adminNotificationsdata)\n\n  const hasMore = adminNotificationsdata === null || adminNotificationsdata === void 0 ? void 0 : (_adminNotificationsda = adminNotificationsdata.data) === null || _adminNotificationsda === void 0 ? void 0 : _adminNotificationsda.hasNextPage;\n  const adminNotificationdata = adminNotificationsdata === null || adminNotificationsdata === void 0 ? void 0 : (_adminNotificationsda2 = adminNotificationsdata.data) === null || _adminNotificationsda2 === void 0 ? void 0 : _adminNotificationsda2.data; // *************\n\n  return {\n    adminNotificationdata,\n    notificationSeenFunc,\n    markAllReadFunc,\n    hasMore,\n    fetchMoreData\n  };\n}\n\n_s(UseNotifications, \"LcviuZcI4LiqTg/LmbgPej7labo=\", false, function () {\n  return [useQueryClient, useQuery];\n});\n\n_c = UseNotifications;\nexport default UseNotifications;\n\nvar _c;\n\n$RefreshReg$(_c, \"UseNotifications\");","map":{"version":3,"names":["React","useState","useQuery","getAdminNotifications","DIOM_BASED_URLS","useQueryClient","toast","UseNotifications","pageNumber","setPageNumber","adminNotificationdta","setadminNotificationdta","token","localStorage","getItem","QueryClient","markAllReadFunc","fetch","method","headers","Accept","Authorization","body","JSON","stringify","markRead","then","result3","invalidateQueries","catch","error","notificationSeenFunc","e","id","fetchMoreData","adminNotificationsdata","refetchInterval","hasMore","data","hasNextPage","adminNotificationdata"],"sources":["D:/diom working project/staging/src/pages/Notifications/useNotifications.js"],"sourcesContent":["import React,{useState} from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getAdminNotifications } from \"../../APIS/notifications\";\r\nimport { DIOM_BASED_URLS } from \"../../config/url\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction UseNotifications() {\r\n  const[pageNumber,setPageNumber] = useState(1);\r\n  const[adminNotificationdta,setadminNotificationdta]=useState()\r\n  const token = localStorage.getItem(\"Token\");\r\n  const QueryClient = useQueryClient()\r\n\r\n\r\n\r\n\r\n  const markAllReadFunc=()=>{\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n  }\r\n\r\n  const notificationSeenFunc = (e)=>{\r\n   \r\n   \r\n\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications/${e.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  }\r\n\r\n\r\n  // *************\r\n  const fetchMoreData=()=>{\r\n\r\n    setPageNumber(pageNumber + 1)\r\n  \r\n  }\r\n  const adminNotificationsdata = useQuery([\"adminNotifications\",pageNumber], () =>\r\n    getAdminNotifications(token,pageNumber),{refetchInterval:15000}\r\n\r\n  );\r\n  // const adminNotificationsdata = adminNotificationdta?adminNotificationdta.concat(adminNotificationsdta):adminNotificationdta\r\n  // setadminNotificationdta(adminNotificationsdta)\r\n  // console.log(\"adminNotificationsdata : \",adminNotificationsdata)\r\n \r\n  const hasMore = adminNotificationsdata?.data?.hasNextPage\r\n  const adminNotificationdata = adminNotificationsdata?.data?.data;\r\n \r\n\r\n  // *************\r\n\r\n\r\n\r\n\r\n  return { adminNotificationdata,notificationSeenFunc,markAllReadFunc ,hasMore,fetchMoreData};\r\n}\r\n\r\nexport default UseNotifications;\r\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,QAAd,QAA6B,OAA7B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,qBAAT,QAAsC,0BAAtC;AACA,SAASC,eAAT,QAAgC,kBAAhC;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,SAASC,gBAAT,GAA4B;EAAA;;EAAA;;EAC1B,MAAK,CAACC,UAAD,EAAYC,aAAZ,IAA6BR,QAAQ,CAAC,CAAD,CAA1C;EACA,MAAK,CAACS,oBAAD,EAAsBC,uBAAtB,IAA+CV,QAAQ,EAA5D;EACA,MAAMW,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;EACA,MAAMC,WAAW,GAAGV,cAAc,EAAlC;;EAKA,MAAMW,eAAe,GAAC,MAAI;IAExBC,KAAK,CAAE,GAAEb,eAAgB,sBAApB,EAA2C;MAC9Cc,MAAM,EAAE,OADsC;MAE9CC,OAAO,EAAE;QACPC,MAAM,EAAE,8BADD;QAEP,gBAAgB,gCAFT;QAGPC,aAAa,EAAE,YAAYT;MAHpB,CAFqC;MAO9CU,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QACnBC,QAAQ,EAAE;MADS,CAAf;IAPwC,CAA3C,CAAL,CAWGC,IAXH,CAWSC,OAAD,IAAa;MACjBZ,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B;IAGD,CAfH,EAgBGC,KAhBH,CAgBUC,KAAD,IAAWxB,KAAK,CAACwB,KAAN,CAAY,uBAAZ,CAhBpB;EAkBD,CApBD;;EAsBA,MAAMC,oBAAoB,GAAIC,CAAD,IAAK;IAKhCf,KAAK,CAAE,GAAEb,eAAgB,wBAAuB4B,CAAC,CAACC,EAAG,EAAhD,EAAmD;MACtDf,MAAM,EAAE,OAD8C;MAEtDC,OAAO,EAAE;QACPC,MAAM,EAAE,8BADD;QAEP,gBAAgB,gCAFT;QAGPC,aAAa,EAAE,YAAYT;MAHpB,CAF6C;MAOtDU,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QACnBC,QAAQ,EAAE;MADS,CAAf;IAPgD,CAAnD,CAAL,CAWGC,IAXH,CAWSC,OAAD,IAAa;MACjBZ,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B;IAGD,CAfH,EAgBGC,KAhBH,CAgBUC,KAAD,IAAWxB,KAAK,CAACwB,KAAN,CAAY,uBAAZ,CAhBpB;EAiBD,CAtBD,CA/B0B,CAwD1B;;;EACA,MAAMI,aAAa,GAAC,MAAI;IAEtBzB,aAAa,CAACD,UAAU,GAAG,CAAd,CAAb;EAED,CAJD;;EAKA,MAAM2B,sBAAsB,GAAGjC,QAAQ,CAAC,CAAC,oBAAD,EAAsBM,UAAtB,CAAD,EAAoC,MACzEL,qBAAqB,CAACS,KAAD,EAAOJ,UAAP,CADgB,EACG;IAAC4B,eAAe,EAAC;EAAjB,CADH,CAAvC,CA9D0B,CAkE1B;EACA;EACA;;EAEA,MAAMC,OAAO,GAAGF,sBAAH,aAAGA,sBAAH,gDAAGA,sBAAsB,CAAEG,IAA3B,0DAAG,sBAA8BC,WAA9C;EACA,MAAMC,qBAAqB,GAAGL,sBAAH,aAAGA,sBAAH,iDAAGA,sBAAsB,CAAEG,IAA3B,2DAAG,uBAA8BA,IAA5D,CAvE0B,CA0E1B;;EAKA,OAAO;IAAEE,qBAAF;IAAwBT,oBAAxB;IAA6Cf,eAA7C;IAA8DqB,OAA9D;IAAsEH;EAAtE,CAAP;AACD;;GAhFQ3B,gB;UAIaF,c,EA0DWH,Q;;;KA9DxBK,gB;AAkFT,eAAeA,gBAAf"},"metadata":{},"sourceType":"module"}