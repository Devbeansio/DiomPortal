{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { DIOM_BASED_URLS } from \"../../../.././config/url\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\nimport { getBooking } from \"../../../../APIS/bookings\";\nimport { getGuest } from \"../../../../APIS/bookings\";\nimport { getbookinguser } from \"../../../../APIS/bookings\";\nimport { toast } from \"react-toastify\";\nexport const useBookingDetails = () => {\n  _s();\n\n  const [error, setError] = useState(null);\n  const [bookingDetails, setBookingDetails] = useState({});\n  const [checkInCheckout, setCheckInCheckout] = useState([]); // const [bookingUserName, setBookingUserName] = useState([]);\n  // const [userBookings, setUserBookings] = useState([]);\n\n  const [loaded, setLoaded] = useState(false);\n  const [abc, setAbc] = useState(true);\n  const [guestData, setGuestData] = useState([]);\n  const [revokeBookingStatus, setRevokeBookingStatus] = useState();\n  const history = useHistory();\n  const token = localStorage.getItem(\"Token\");\n  const {\n    id,\n    t_ID\n  } = useParams();\n  const componentRef = useRef(); // *************\n\n  const bookingData = useQuery([\"bookingsDetails\", id], () => getBooking(token, id));\n  const bookingsDailedData = bookingData.data; // *************\n\n  const bookingdetails = async () => {\n    setBookingDetails(bookingsDailedData); // bookingusername();\n\n    checkinCheckoutfunc(bookingsDailedData);\n  };\n\n  const bookingguestData = useQuery([\"guestDetails\", id], () => getGuest(token, id));\n  const bookingsguestData = bookingguestData.data;\n\n  const guestinfofunc = async () => {\n    setGuestData(bookingsguestData);\n  }; // const condition = bookingsDailedData?.userId.length !==0? true : false\n\n\n  const bookinguserData = useQuery([\"userDetails\", id], () => getbookinguser(token, bookingsDailedData === null || bookingsDailedData === void 0 ? void 0 : bookingsDailedData.userId), {\n    enabled: bookingsDailedData ? true : false\n  });\n  const userbookingData = bookinguserData.data;\n  const isLoading = bookinguserData.isLoading; // ********\n  // const bookingusername = async () => {\n  // setBookingUserName(userbookingData?.username);\n  // setUserBookings(userbookingData ? userbookingData : null);\n  // };\n\n  const checkinCheckoutfunc = result => {\n    const newArr = [...result.timeLogs];\n    const sortedData = newArr.reverse();\n    setCheckInCheckout(sortedData);\n    return [sortedData];\n  }; //   const getrevokedbookings = async () => {\n  //     fetch(`${DIOM_BASED_URLS}/admin-diom-bookings/revoked/${id}`, {\n  //       method: \"GET\",\n  //       redirect: \"follow\",\n  //     })\n  //       .then((response) => response.json())\n  //       .then((result) => {\n  //         const mappeddata = result.data.map((e) => ({\n  //           bookingStatus: e.bookingStatus,\n  //         }));\n  //         setRevokeBookingStatus(mappeddata);\n  //       })\n  //       .catch((error) => console.log(\"error\", error));\n  //   };\n\n\n  useEffect(() => {\n    (async () => {\n      bookingsDailedData && (await bookingdetails());\n      bookingsguestData && (await guestinfofunc()); //   await getrevokedbookings();\n    })();\n  }, [bookingsDailedData, bookingsguestData]);\n  return {\n    error,\n    setError,\n    bookingDetails,\n    setBookingDetails,\n    checkInCheckout,\n    setCheckInCheckout,\n    // bookingUserName,\n    // setBookingUserName,\n    // userBookings,\n    // setUserBookings,\n    loaded,\n    setLoaded,\n    guestData,\n    setGuestData,\n    revokeBookingStatus,\n    setRevokeBookingStatus,\n    bookingdetails,\n    guestinfofunc,\n    // bookingusername,\n    abc,\n    isLoading,\n    setAbc,\n    checkinCheckoutfunc,\n    // getrevokedbookings,\n    userbookingData\n  };\n};\n\n_s(useBookingDetails, \"NS7G9CmVqb8ei8olZsJ2VX4e79Q=\", false, function () {\n  return [useHistory, useParams, useQuery, useQuery, useQuery];\n});","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/src/pages/MyDashboard/RequestBookings/BookingDetail/useBookingDetails.js"],"names":["useState","useEffect","useRef","DIOM_BASED_URLS","useParams","useHistory","useQuery","getBooking","getGuest","getbookinguser","toast","useBookingDetails","error","setError","bookingDetails","setBookingDetails","checkInCheckout","setCheckInCheckout","loaded","setLoaded","abc","setAbc","guestData","setGuestData","revokeBookingStatus","setRevokeBookingStatus","history","token","localStorage","getItem","id","t_ID","componentRef","bookingData","bookingsDailedData","data","bookingdetails","checkinCheckoutfunc","bookingguestData","bookingsguestData","guestinfofunc","bookinguserData","userId","enabled","userbookingData","isLoading","result","newArr","timeLogs","sortedData","reverse"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport { DIOM_BASED_URLS } from \"../../../.././config/url\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getBooking } from \"../../../../APIS/bookings\";\r\nimport { getGuest } from \"../../../../APIS/bookings\";\r\nimport { getbookinguser } from \"../../../../APIS/bookings\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport const useBookingDetails = () => {\r\n  const [error, setError] = useState(null);\r\n  const [bookingDetails, setBookingDetails] = useState({});\r\n  const [checkInCheckout, setCheckInCheckout] = useState([]);\r\n  // const [bookingUserName, setBookingUserName] = useState([]);\r\n  // const [userBookings, setUserBookings] = useState([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [abc, setAbc] = useState(true);\r\n  const [guestData, setGuestData] = useState([]);\r\n  const [revokeBookingStatus, setRevokeBookingStatus] = useState();\r\n\r\n  const history = useHistory();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const { id, t_ID } = useParams();\r\n  const componentRef = useRef();\r\n\r\n  // *************\r\n  const bookingData = useQuery([\"bookingsDetails\", id], () =>\r\n    getBooking(token, id)\r\n  );\r\n  const bookingsDailedData = bookingData.data;\r\n\r\n  // *************\r\n\r\n  const bookingdetails = async () => {\r\n    setBookingDetails(bookingsDailedData);\r\n    // bookingusername();\r\n    checkinCheckoutfunc(bookingsDailedData);\r\n  };\r\n\r\n  const bookingguestData = useQuery([\"guestDetails\", id], () =>\r\n    getGuest(token, id)\r\n  );\r\n  const bookingsguestData = bookingguestData.data;\r\n\r\n  const guestinfofunc = async () => {\r\n    setGuestData(bookingsguestData);\r\n  };\r\n\r\n  // const condition = bookingsDailedData?.userId.length !==0? true : false\r\n  const bookinguserData = useQuery(\r\n    [\"userDetails\", id],\r\n\r\n    () => getbookinguser(token, bookingsDailedData?.userId),\r\n    { enabled: bookingsDailedData ? true : false }\r\n  );\r\n\r\n  const userbookingData = bookinguserData.data;\r\n  const isLoading = bookinguserData.isLoading;\r\n\r\n  // ********\r\n  // const bookingusername = async () => {\r\n  // setBookingUserName(userbookingData?.username);\r\n  // setUserBookings(userbookingData ? userbookingData : null);\r\n  // };\r\n\r\n  const checkinCheckoutfunc = (result) => {\r\n    const newArr = [...result.timeLogs];\r\n    const sortedData = newArr.reverse();\r\n    setCheckInCheckout(sortedData);\r\n    return [sortedData];\r\n  };\r\n\r\n  //   const getrevokedbookings = async () => {\r\n  //     fetch(`${DIOM_BASED_URLS}/admin-diom-bookings/revoked/${id}`, {\r\n  //       method: \"GET\",\r\n  //       redirect: \"follow\",\r\n  //     })\r\n  //       .then((response) => response.json())\r\n  //       .then((result) => {\r\n  //         const mappeddata = result.data.map((e) => ({\r\n  //           bookingStatus: e.bookingStatus,\r\n  //         }));\r\n  //         setRevokeBookingStatus(mappeddata);\r\n  //       })\r\n  //       .catch((error) => console.log(\"error\", error));\r\n  //   };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      bookingsDailedData && (await bookingdetails());\r\n      bookingsguestData && (await guestinfofunc());\r\n      //   await getrevokedbookings();\r\n    })();\r\n  }, [bookingsDailedData, bookingsguestData]);\r\n\r\n  return {\r\n    error,\r\n    setError,\r\n    bookingDetails,\r\n    setBookingDetails,\r\n    checkInCheckout,\r\n    setCheckInCheckout,\r\n    // bookingUserName,\r\n    // setBookingUserName,\r\n    // userBookings,\r\n    // setUserBookings,\r\n    loaded,\r\n    setLoaded,\r\n    guestData,\r\n    setGuestData,\r\n    revokeBookingStatus,\r\n    setRevokeBookingStatus,\r\n    bookingdetails,\r\n    guestinfofunc,\r\n    // bookingusername,\r\n    abc,\r\n    isLoading,\r\n    setAbc,\r\n    checkinCheckoutfunc,\r\n    // getrevokedbookings,\r\n    userbookingData,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}