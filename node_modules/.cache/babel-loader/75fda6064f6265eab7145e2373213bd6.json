{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/tech sign/Desktop/diom (1)/diom/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/tech sign/Desktop/diom (1)/diom/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/tech sign/Desktop/diom (1)/diom/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\tech sign\\\\Desktop\\\\diom (1)\\\\diom\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from\"react\";import{DIOM_BASED_URLS}from\"../../../../config/url\";import{toast}from\"react-toastify\";import{useParams}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{getBranddDetail}from\"../../../../APIS/locationBrands\";import{useQueryClient,useQuery}from\"react-query\";import{getBranddDetaildropdown}from\"../../../../APIS/locationBrands\";import{getBrandallocationdropdown}from\"../../../../APIS/locationBrands\";import moment from\"moment\";var useLocationBrandDetail=function useLocationBrandDetail(){var QueryClient=useQueryClient();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),locationBrandData=_useState4[0],setLocationBrandData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),selectedMulti=_useState6[0],setSelectedMulti=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),locationsbrandsDropDown=_useState8[0],setLocationsbrandsDropDown=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),modal_static=_useState10[0],setModal_static=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),modal_static1=_useState12[0],setModal_static1=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),selectedvalue=_useState14[0],setSelectedvalue=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),loaded=_useState16[0],setLoaded=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),startTime=_useState18[0],setStartTime=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),endTime=_useState20[0],setEndTime=_useState20[1];var _useParams=useParams(),id=_useParams.id;var token=localStorage.getItem(\"Token\");var history=useHistory();var locationBrandnameonchange=function locationBrandnameonchange(event){setLocationBrandData(function(prev){return _objectSpread(_objectSpread({},prev),{},{name:event.target.value});});};var startTimeFunc=function startTimeFunc(e){// console.log(\"start time : \", e.target.value);\nsetStartTime(e.target.value);};var endTimeFunc=function endTimeFunc(e){setEndTime(e.target.value);};var removeBodyCss=function removeBodyCss(){document.body.classList.add(\"no_padding\");};var tog_static=function tog_static(){setModal_static(!modal_static);removeBodyCss();};var tog_static1=function tog_static1(){setModal_static1(!modal_static1);removeBodyCss();};var textareachange=function textareachange(event){setLocationBrandData(function(prev){return _objectSpread(_objectSpread({},prev),{},{description:event.target.value});});};var handleMulti=function handleMulti(selected){if(selectedMulti.length<selected.length){var lenthOFAdded=selected.length-1;setSelectedvalue(selected[lenthOFAdded].value);if(selected[lenthOFAdded].locationCategoriesId===\"\"){fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations/\").concat(selected[lenthOFAdded].value,\"/category\"),{method:\"POST\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({locationCategoryId:\"\".concat(id)})}).then(function(result3){if(result3.status===200){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else if(result3.status===204){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else{toast.error(\" Something went wrong\");}}).catch(function(error){return console.log(\"error\",error);});}else{tog_static1();}}else if(selectedMulti.length>selected.length){var mappedValuedSelected=selected.map(function(e){return e.value;});var filteredValue=selectedMulti.filter(function(e){return!mappedValuedSelected.includes(e.value);});fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations/\").concat(filteredValue[0].value,\"/category\"),{method:\"DELETE\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({})}).then(function(result3){if(result3.status===200){toast.success(\" Successfully Deleted\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else if(result3.status===204){toast.success(\" Successfullyn Deleted\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else{toast.error(\" Something went wrong\");}}).catch(function(error){return toast.error(\" Something went wrong\");});}setSelectedMulti(selected);};var updateNameAndDescription=function updateNameAndDescription(){fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-location-categories/\").concat(id),{method:\"PATCH\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({name:\"\".concat(locationBrandData.name),description:\"\".concat(locationBrandData.description),// locationTitle: selectedMulti,\nstartTime:\"\".concat(startTime),endTime:\"\".concat(endTime)})}).then(function(result3){if(result3.status===200){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else if(result3.status===204){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else{toast.error(\" Something went wrong\");}setModal_static(false);}).catch(function(error){return toast.error(\" Something went wrong\");});};var postbrandLocations=function postbrandLocations(){fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations/\").concat(selectedvalue,\"/category\"),{method:\"POST\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({locationCategoryId:\"\".concat(id)})}).then(function(result3){if(result3.status===200){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else if(result3.status===204){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"Brandlocations\");QueryClient.invalidateQueries(\"BrandDetaildropdown\");QueryClient.invalidateQueries(\"BrandDetail\");}else{toast.error(\" Something went wrong\");}setModal_static(false);}).catch(function(error){return toast.error(\" Something went wrong\");});setModal_static1(false);};// *************\nvar BrandDetailData=useQuery([\"BrandDetail\",id],function(){return getBranddDetail(token,id);});var BrandDetailDailedData=BrandDetailData.data;// *************\nvar getBrandDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLocationBrandData(BrandDetailDailedData);case 1:case\"end\":return _context.stop();}}},_callee);}));return function getBrandDetail(){return _ref.apply(this,arguments);};}();// *************\nvar BrandDetailDropDownData=useQuery([\"BrandDetaildropdown\",id],function(){return getBranddDetaildropdown(token,id);});var BrandDetailDropDownDailedData=BrandDetailDropDownData.data;// console.log(\n//   \"BrandDetailDropDownDailedData : \",\n//   BrandDetailDropDownDailedData\n// );\n// *************\nvar getBrandDetaildropdown=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var matadata;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:matadata=BrandDetailDropDownDailedData.map(function(element){return{label:element.Name,value:element.id};});setSelectedMulti(matadata);setLocationsbrandsDropDown(matadata);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function getBrandDetaildropdown(){return _ref2.apply(this,arguments);};}();// *************\nvar BrandlocationsDropDownData=useQuery([\"Brandlocations\",id],function(){return getBrandallocationdropdown(token,id);});var BrandLocationsDailedData=BrandlocationsDropDownData.data;var isLoader=BrandlocationsDropDownData.isLoader;// *************\nvar getBrandalllocationsdropdown=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var matadata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:matadata=BrandLocationsDailedData.map(function(element){return{label:element.Name,value:element.id,locationCategoriesId:element.locationCategoriesId};});setLocationsbrandsDropDown(matadata);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function getBrandalllocationsdropdown(){return _ref3.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=BrandDetailDailedData;if(!_context4.t0){_context4.next=4;break;}_context4.next=4;return getBrandDetail();case 4:_context4.t1=BrandDetailDropDownDailedData;if(!_context4.t1){_context4.next=8;break;}_context4.next=8;return getBrandDetaildropdown();case 8:_context4.t2=BrandLocationsDailedData;if(!_context4.t2){_context4.next=12;break;}_context4.next=12;return getBrandalllocationsdropdown();case 12:case\"end\":return _context4.stop();}}},_callee4);}))();},[BrandDetailDailedData,BrandDetailDropDownDailedData,BrandLocationsDailedData]);return{locationBrandData:locationBrandData,setLocationBrandData:setLocationBrandData,locationsbrandsDropDown:locationsbrandsDropDown,selectedMulti:selectedMulti,setSelectedMulti:setSelectedMulti,modal_static:modal_static,setModal_static:setModal_static,modal_static1:modal_static1,setModal_static1:setModal_static1,setSelectedvalue:setSelectedvalue,selectedvalue:selectedvalue,setLoaded:setLoaded,isLoader:isLoader,loaded:loaded,startTime:startTime,setStartTime:setStartTime,endTime:endTime,setEndTime:setEndTime,tog_static:tog_static,tog_static1:tog_static1,textareachange:textareachange,postbrandLocations:postbrandLocations,locationBrandnameonchange:locationBrandnameonchange,endTimeFunc:endTimeFunc,startTimeFunc:startTimeFunc,updateNameAndDescription:updateNameAndDescription,handleMulti:handleMulti};};export default useLocationBrandDetail;","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom (1)/diom/src/pages/Locations/LocationBrands/LocationBrandDetail/useLocationBrandDetail.js"],"names":["useState","useEffect","DIOM_BASED_URLS","toast","useParams","useHistory","getBranddDetail","useQueryClient","useQuery","getBranddDetaildropdown","getBrandallocationdropdown","moment","useLocationBrandDetail","QueryClient","error","setError","locationBrandData","setLocationBrandData","selectedMulti","setSelectedMulti","locationsbrandsDropDown","setLocationsbrandsDropDown","modal_static","setModal_static","modal_static1","setModal_static1","selectedvalue","setSelectedvalue","loaded","setLoaded","startTime","setStartTime","endTime","setEndTime","id","token","localStorage","getItem","history","locationBrandnameonchange","event","prev","name","target","value","startTimeFunc","e","endTimeFunc","removeBodyCss","document","body","classList","add","tog_static","tog_static1","textareachange","description","handleMulti","selected","length","lenthOFAdded","locationCategoriesId","fetch","method","headers","Accept","Authorization","JSON","stringify","locationCategoryId","then","result3","status","success","invalidateQueries","catch","console","log","mappedValuedSelected","map","filteredValue","filter","includes","updateNameAndDescription","postbrandLocations","BrandDetailData","BrandDetailDailedData","data","getBrandDetail","BrandDetailDropDownData","BrandDetailDropDownDailedData","getBrandDetaildropdown","matadata","element","label","Name","BrandlocationsDropDownData","BrandLocationsDailedData","isLoader","getBrandalllocationsdropdown"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { DIOM_BASED_URLS } from \"../../../../config/url\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getBranddDetail } from \"../../../../APIS/locationBrands\";\r\nimport { useQueryClient, useQuery } from \"react-query\";\r\nimport { getBranddDetaildropdown } from \"../../../../APIS/locationBrands\";\r\nimport { getBrandallocationdropdown } from \"../../../../APIS/locationBrands\";\r\nimport moment from \"moment\";\r\nconst useLocationBrandDetail = () => {\r\n  const QueryClient = useQueryClient();\r\n  const [error, setError] = useState(null);\r\n  const [locationBrandData, setLocationBrandData] = useState({});\r\n  const [selectedMulti, setSelectedMulti] = useState();\r\n  const [locationsbrandsDropDown, setLocationsbrandsDropDown] = useState([]);\r\n  const [modal_static, setModal_static] = useState(false);\r\n  const [modal_static1, setModal_static1] = useState(false);\r\n  const [selectedvalue, setSelectedvalue] = useState({});\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [startTime, setStartTime] = useState(0);\r\n  const [endTime, setEndTime] = useState(0);\r\n\r\n  const { id } = useParams();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const history = useHistory();\r\n\r\n  const locationBrandnameonchange = (event) => {\r\n    setLocationBrandData((prev) => ({ ...prev, name: event.target.value }));\r\n  };\r\n\r\n  const startTimeFunc = (e) => {\r\n    // console.log(\"start time : \", e.target.value);\r\n    setStartTime(e.target.value);\r\n  };\r\n  const endTimeFunc = (e) => {\r\n    setEndTime(e.target.value);\r\n  };\r\n\r\n  const removeBodyCss = () => {\r\n    document.body.classList.add(\"no_padding\");\r\n  };\r\n  const tog_static = () => {\r\n    setModal_static(!modal_static);\r\n    removeBodyCss();\r\n  };\r\n  const tog_static1 = () => {\r\n    setModal_static1(!modal_static1);\r\n\r\n    removeBodyCss();\r\n  };\r\n\r\n  const textareachange = (event) => {\r\n    setLocationBrandData((prev) => ({\r\n      ...prev,\r\n      description: event.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleMulti = (selected) => {\r\n    if (selectedMulti.length < selected.length) {\r\n      const lenthOFAdded = selected.length - 1;\r\n\r\n      setSelectedvalue(selected[lenthOFAdded].value);\r\n\r\n      if (selected[lenthOFAdded].locationCategoriesId === \"\") {\r\n        fetch(\r\n          `${DIOM_BASED_URLS}/admin-business-locations/${selected[lenthOFAdded].value}/category`,\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              Accept: \"application/json, text/plain\",\r\n              \"Content-Type\": \"application/json;charset=UTF-8\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n            body: JSON.stringify({\r\n              locationCategoryId: `${id}`,\r\n            }),\r\n          }\r\n        )\r\n          .then((result3) => {\r\n            if (result3.status === 200) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"Brandlocations\");\r\n              QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"BrandDetail\");\r\n            } else if (result3.status === 204) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"Brandlocations\");\r\n              QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"BrandDetail\");\r\n            } else {\r\n              toast.error(\" Something went wrong\");\r\n            }\r\n          })\r\n          .catch((error) => console.log(\"error\", error));\r\n      } else {\r\n        tog_static1();\r\n      }\r\n    } else if (selectedMulti.length > selected.length) {\r\n      const mappedValuedSelected = selected.map((e) => {\r\n        return e.value;\r\n      });\r\n\r\n      const filteredValue = selectedMulti.filter((e) => {\r\n        return !mappedValuedSelected.includes(e.value);\r\n      });\r\n\r\n      fetch(\r\n        `${DIOM_BASED_URLS}/admin-business-locations/${filteredValue[0].value}/category`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Accept: \"application/json, text/plain\",\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n          body: JSON.stringify({}),\r\n        }\r\n      )\r\n        .then((result3) => {\r\n          if (result3.status === 200) {\r\n            toast.success(\" Successfully Deleted\");\r\n            QueryClient.invalidateQueries(\"Brandlocations\");\r\n            QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"BrandDetail\");\r\n          } else if (result3.status === 204) {\r\n            toast.success(\" Successfullyn Deleted\");\r\n            QueryClient.invalidateQueries(\"Brandlocations\");\r\n            QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"BrandDetail\");\r\n          } else {\r\n            toast.error(\" Something went wrong\");\r\n          }\r\n        })\r\n        .catch((error) => toast.error(\" Something went wrong\"));\r\n    }\r\n\r\n    setSelectedMulti(selected);\r\n  };\r\n\r\n  const updateNameAndDescription = () => {\r\n    fetch(`${DIOM_BASED_URLS}/admin-location-categories/${id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        name: `${locationBrandData.name}`,\r\n        description: `${locationBrandData.description}`,\r\n        // locationTitle: selectedMulti,\r\n        startTime: `${startTime}`,\r\n        endTime: `${endTime}`,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  };\r\n\r\n  const postbrandLocations = () => {\r\n    fetch(\r\n      `${DIOM_BASED_URLS}/admin-business-locations/${selectedvalue}/category`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/json, text/plain\",\r\n          \"Content-Type\": \"application/json;charset=UTF-8\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n        body: JSON.stringify({\r\n          locationCategoryId: `${id}`,\r\n        }),\r\n      }\r\n    )\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"Brandlocations\");\r\n          QueryClient.invalidateQueries(\"BrandDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"BrandDetail\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n    setModal_static1(false);\r\n  };\r\n\r\n  // *************\r\n  const BrandDetailData = useQuery([\"BrandDetail\", id], () =>\r\n    getBranddDetail(token, id)\r\n  );\r\n  const BrandDetailDailedData = BrandDetailData.data;\r\n  // *************\r\n  const getBrandDetail = async () => {\r\n    setLocationBrandData(BrandDetailDailedData);\r\n  };\r\n\r\n  // *************\r\n  const BrandDetailDropDownData = useQuery([\"BrandDetaildropdown\", id], () =>\r\n    getBranddDetaildropdown(token, id)\r\n  );\r\n  const BrandDetailDropDownDailedData = BrandDetailDropDownData.data;\r\n  // console.log(\r\n  //   \"BrandDetailDropDownDailedData : \",\r\n  //   BrandDetailDropDownDailedData\r\n  // );\r\n  // *************\r\n  const getBrandDetaildropdown = async () => {\r\n    const matadata = BrandDetailDropDownDailedData.map((element) => {\r\n      return { label: element.Name, value: element.id };\r\n    });\r\n    setSelectedMulti(matadata);\r\n    setLocationsbrandsDropDown(matadata);\r\n  };\r\n\r\n  // *************\r\n  const BrandlocationsDropDownData = useQuery([\"Brandlocations\", id], () =>\r\n    getBrandallocationdropdown(token, id)\r\n  );\r\n  const BrandLocationsDailedData = BrandlocationsDropDownData.data;\r\n  const isLoader = BrandlocationsDropDownData.isLoader;\r\n  // *************\r\n  const getBrandalllocationsdropdown = async () => {\r\n    const matadata = BrandLocationsDailedData.map((element) => {\r\n      return {\r\n        label: element.Name,\r\n        value: element.id,\r\n        locationCategoriesId: element.locationCategoriesId,\r\n      };\r\n    });\r\n\r\n    setLocationsbrandsDropDown(matadata);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      BrandDetailDailedData && (await getBrandDetail());\r\n      BrandDetailDropDownDailedData && (await getBrandDetaildropdown());\r\n      BrandLocationsDailedData && (await getBrandalllocationsdropdown());\r\n    })();\r\n  }, [\r\n    BrandDetailDailedData,\r\n    BrandDetailDropDownDailedData,\r\n    BrandLocationsDailedData,\r\n  ]);\r\n\r\n  return {\r\n    locationBrandData,\r\n    setLocationBrandData,\r\n    locationsbrandsDropDown,\r\n    selectedMulti,\r\n    setSelectedMulti,\r\n    modal_static,\r\n    setModal_static,\r\n    modal_static1,\r\n    setModal_static1,\r\n    setSelectedvalue,\r\n    selectedvalue,\r\n    setLoaded,\r\n    isLoader,\r\n    loaded,\r\n    startTime,\r\n    setStartTime,\r\n    endTime,\r\n    setEndTime,\r\n    tog_static,\r\n    tog_static1,\r\n    textareachange,\r\n    postbrandLocations,\r\n    locationBrandnameonchange,\r\n    endTimeFunc,\r\n    startTimeFunc,\r\n    updateNameAndDescription,\r\n    handleMulti,\r\n  };\r\n};\r\nexport default useLocationBrandDetail;\r\n"]},"metadata":{},"sourceType":"module"}