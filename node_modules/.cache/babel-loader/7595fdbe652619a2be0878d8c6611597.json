{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/tech sign/Desktop/diom (1)/diom/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/tech sign/Desktop/diom (1)/diom/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/tech sign/Desktop/diom (1)/diom/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\tech sign\\\\Desktop\\\\diom (1)\\\\diom\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import{toast}from\"react-toastify\";import{DIOM_BASED_URLS}from\"../../../../config/url\";import{useParams}from\"react-router-dom\";import{getFloorPlansNames}from\"../../../../APIS/floorplans\";import{useQueryClient,useQuery}from\"react-query\";var useFloorPlanDetail=function useFloorPlanDetail(){var QueryClient=useQueryClient();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal_static=_useState4[0],setModal_static=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),selectedFiles=_useState6[0],setSelectedFiles=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedLocation=_useState8[0],setSelectedLocation=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),selectLocationName=_useState10[0],setSelectLocationName=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),selectLocationNameById=_useState12[0],setSelectLocationNameById=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),modal_static1=_useState14[0],setModal_static1=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),selectLocationNamefloorname=_useState16[0],setSelectLocationNamefloorname=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),loaded=_useState18[0],setLoaded=_useState18[1];var handleSelectGroup=function handleSelectGroup(selectedGroup){setSelectedLocation(selectedGroup);setSelectLocationName(selectedGroup.label);};var _useParams=useParams(),floorid=_useParams.floorid;var history=useHistory();var token=localStorage.getItem(\"Token\");var formatBytes=function formatBytes(bytes){var decimals=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;if(bytes===0)return\"0 Bytes\";var k=1024;var dm=decimals<0?0:decimals;var sizes=[\"Bytes\",\"KB\",\"MB\",\"GB\",\"TB\",\"PB\",\"EB\",\"ZB\",\"YB\"];var i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(dm))+\" \"+sizes[i];};var handleAcceptedFiles=function handleAcceptedFiles(files){files.map(function(file){return Object.assign(file,{preview:URL.createObjectURL(file),htmlFormattedSize:formatBytes(file.size)});});setSelectedFiles(files);};var tog_static1=function tog_static1(){setModal_static1(!modal_static1);removeBodyCss();};var namefunc=function namefunc(e){setSelectLocationNameById(function(prev){return _objectSpread(_objectSpread({},prev),{},{Name:e.target.value});});};var removeBodyCss=function removeBodyCss(){document.body.classList.add(\"no_padding\");};var tog_static=function tog_static(){setModal_static(!modal_static);removeBodyCss();};var uploadFile=function uploadFile(){var myHeaders=new Headers();myHeaders.append(\"Authorization\",\"Bearer \".concat(localStorage.getItem(\"Token\")));var formdata=new FormData();formdata.append(\"file\",selectedFiles[0],selectedFiles[0].name);formdata.append(\"floorplanName\",selectLocationNameById.Name);var requestOptions={method:\"POST\",headers:myHeaders,body:formdata,redirect:\"follow\"};fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations/\").concat(selectedLocation.value,\"/floorpans\"),requestOptions).then(function(response){return response.json();}).then(function(result){if(result[0].statusCode===200){toast.success(\"Floorplans Added Succufully\");}else if(result[0].statusCode===204){toast.success(\"Floorplans Added Succufully\");}else{toast.error(\" Something went wrong\");}setModal_static(false);}).catch(function(error){return setError(error.message);},toast.error(\" Something went wrong\"));};var deleteFloorPlansFunc=function deleteFloorPlansFunc(){fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations/\").concat(floorid,\"/floorpans/selectLocationNamefloorname[0]._id\"),{method:\"DELETE\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({})}).then(function(result3){if(result3.status===200){toast.success(\" Successfully Deleted\");setModal_static1(false);QueryClient.invalidateQueries(\"floorplanname\");}else if(result3.status===204){toast.success(\" Successfullyn Deleted\");setModal_static1(false);QueryClient.invalidateQueries(\"floorplanname\");}else{toast.error(\" Something went wrong\");setModal_static1(false);QueryClient.invalidateQueries(\"floorplanname\");}}).catch(function(error){return toast.error(\" Something went wrong\");});};// ************* \nvar floorPlanData=useQuery([\"floorplanname\",floorid],function(){return getFloorPlansNames(token,floorid);});var floorPlanNameData=floorPlanData.data;// *************\nvar getlocations=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var floornames;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSelectLocationNameById(floorPlanNameData);floornames=floorPlanNameData.floorPlans.map(function(e){return{_id:e._id,imageUrl:e.imageUrl};});setSelectLocationNamefloorname(floornames);case 3:case\"end\":return _context.stop();}}},_callee);}));return function getlocations(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=floorPlanNameData;if(!_context2.t0){_context2.next=4;break;}_context2.next=4;return getlocations();case 4:case\"end\":return _context2.stop();}}},_callee2);}))();},[floorPlanNameData]);return{error:error,setError:setError,modal_static:modal_static,setModal_static:setModal_static,selectedFiles:selectedFiles,setSelectedFiles:setSelectedFiles,selectedLocation:selectedLocation,setSelectedLocation:setSelectedLocation,selectLocationName:selectLocationName,setSelectLocationName:setSelectLocationName,selectLocationNameById:selectLocationNameById,setSelectLocationNameById:setSelectLocationNameById,selectLocationNamefloorname:selectLocationNamefloorname,setSelectLocationNamefloorname:setSelectLocationNamefloorname,loaded:loaded,setLoaded:setLoaded,handleSelectGroup:handleSelectGroup,handleAcceptedFiles:handleAcceptedFiles,namefunc:namefunc,uploadFile:uploadFile,tog_static:tog_static,deleteFloorPlansFunc:deleteFloorPlansFunc,getlocations:getlocations,modal_static1:modal_static1,setModal_static1:setModal_static1,tog_static1:tog_static1};};export default useFloorPlanDetail;","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom (1)/diom/src/pages/Inventories/FloorPlan/FloorPlanDetail/useFloorPlanDetail.js"],"names":["useState","useEffect","useHistory","toast","DIOM_BASED_URLS","useParams","getFloorPlansNames","useQueryClient","useQuery","useFloorPlanDetail","QueryClient","error","setError","modal_static","setModal_static","selectedFiles","setSelectedFiles","selectedLocation","setSelectedLocation","selectLocationName","setSelectLocationName","selectLocationNameById","setSelectLocationNameById","modal_static1","setModal_static1","selectLocationNamefloorname","setSelectLocationNamefloorname","loaded","setLoaded","handleSelectGroup","selectedGroup","label","floorid","history","token","localStorage","getItem","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","handleAcceptedFiles","files","map","file","Object","assign","preview","URL","createObjectURL","htmlFormattedSize","size","tog_static1","removeBodyCss","namefunc","e","prev","Name","target","value","document","body","classList","add","tog_static","uploadFile","myHeaders","Headers","append","formdata","FormData","name","requestOptions","method","headers","redirect","fetch","then","response","json","result","statusCode","success","catch","message","deleteFloorPlansFunc","Accept","Authorization","JSON","stringify","result3","status","invalidateQueries","floorPlanData","floorPlanNameData","data","getlocations","floornames","floorPlans","_id","imageUrl"],"mappings":"ogBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,eAAT,KAAgC,wBAAhC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,kBAAT,KAAmC,6BAAnC,CACA,OAASC,cAAT,CAAyBC,QAAzB,KAAyC,aAAzC,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/B,GAAMC,CAAAA,WAAW,CAAGH,cAAc,EAAlC,CACA,cAA0BP,QAAQ,CAAC,IAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,eAAwCZ,QAAQ,CAAC,KAAD,CAAhD,yCAAOa,YAAP,eAAqBC,eAArB,eACA,eAA0Cd,QAAQ,CAAC,EAAD,CAAlD,yCAAOe,aAAP,eAAsBC,gBAAtB,eACA,eAAgDhB,QAAQ,CAAC,EAAD,CAAxD,yCAAOiB,gBAAP,eAAyBC,mBAAzB,eACA,eAAoDlB,QAAQ,CAAC,EAAD,CAA5D,0CAAOmB,kBAAP,gBAA2BC,qBAA3B,gBACA,gBAA4DpB,QAAQ,CAAC,EAAD,CAApE,2CAAOqB,sBAAP,gBAA+BC,yBAA/B,gBACA,gBAA0CtB,QAAQ,CAAC,KAAD,CAAlD,2CAAOuB,aAAP,gBAAsBC,gBAAtB,gBACA,gBACExB,QAAQ,CAAC,EAAD,CADV,2CAAOyB,2BAAP,gBAAoCC,8BAApC,gBAEA,gBAA4B1B,QAAQ,CAAC,KAAD,CAApC,2CAAO2B,MAAP,gBAAeC,SAAf,gBACA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,aAAD,CAAmB,CAC3CZ,mBAAmB,CAACY,aAAD,CAAnB,CACAV,qBAAqB,CAACU,aAAa,CAACC,KAAf,CAArB,CACD,CAHD,CAIA,eAAoB1B,SAAS,EAA7B,CAAQ2B,OAAR,YAAQA,OAAR,CACA,GAAMC,CAAAA,OAAO,CAAG/B,UAAU,EAA1B,CACA,GAAMgC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAyB,IAAjBC,CAAAA,QAAiB,2DAAN,CAAM,CAC3C,GAAID,KAAK,GAAK,CAAd,CAAiB,MAAO,SAAP,CACjB,GAAME,CAAAA,CAAC,CAAG,IAAV,CACA,GAAMC,CAAAA,EAAE,CAAGF,QAAQ,CAAG,CAAX,CAAe,CAAf,CAAmBA,QAA9B,CACA,GAAMG,CAAAA,KAAK,CAAG,CAAC,OAAD,CAAU,IAAV,CAAgB,IAAhB,CAAsB,IAAtB,CAA4B,IAA5B,CAAkC,IAAlC,CAAwC,IAAxC,CAA8C,IAA9C,CAAoD,IAApD,CAAd,CACA,GAAMC,CAAAA,CAAC,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAASR,KAAT,EAAkBM,IAAI,CAACE,GAAL,CAASN,CAAT,CAA7B,CAAV,CACA,MAAOO,CAAAA,UAAU,CAAC,CAACT,KAAK,CAAGM,IAAI,CAACI,GAAL,CAASR,CAAT,CAAYG,CAAZ,CAAT,EAAyBM,OAAzB,CAAiCR,EAAjC,CAAD,CAAV,CAAmD,GAAnD,CAAyDC,KAAK,CAACC,CAAD,CAArE,CACD,CAPD,CAQA,GAAMO,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,KAAD,CAAW,CACrCA,KAAK,CAACC,GAAN,CAAU,SAACC,IAAD,QACRC,CAAAA,MAAM,CAACC,MAAP,CAAcF,IAAd,CAAoB,CAClBG,OAAO,CAAEC,GAAG,CAACC,eAAJ,CAAoBL,IAApB,CADS,CAElBM,iBAAiB,CAAEtB,WAAW,CAACgB,IAAI,CAACO,IAAN,CAFZ,CAApB,CADQ,EAAV,EAOA5C,gBAAgB,CAACmC,KAAD,CAAhB,CACD,CATD,CAWA,GAAMU,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBrC,gBAAgB,CAAC,CAACD,aAAF,CAAhB,CAEAuC,aAAa,GACd,CAJD,CAMA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtB1C,yBAAyB,CAAC,SAAC2C,IAAD,wCACrBA,IADqB,MAExBC,IAAI,CAAEF,CAAC,CAACG,MAAF,CAASC,KAFS,IAAD,CAAzB,CAID,CALD,CAOA,GAAMN,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BO,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,YAA5B,EACD,CAFD,CAGA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB3D,eAAe,CAAC,CAACD,YAAF,CAAf,CACAiD,aAAa,GACd,CAHD,CAKA,GAAMY,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAIC,CAAAA,SAAS,CAAG,GAAIC,CAAAA,OAAJ,EAAhB,CACAD,SAAS,CAACE,MAAV,CACE,eADF,kBAEY1C,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFZ,GAKA,GAAI0C,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACAD,QAAQ,CAACD,MAAT,CAAgB,MAAhB,CAAwB9D,aAAa,CAAC,CAAD,CAArC,CAA0CA,aAAa,CAAC,CAAD,CAAb,CAAiBiE,IAA3D,EACAF,QAAQ,CAACD,MAAT,CAAgB,eAAhB,CAAiCxD,sBAAsB,CAAC6C,IAAxD,EAEA,GAAIe,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,MADW,CAEnBC,OAAO,CAAER,SAFU,CAGnBL,IAAI,CAAEQ,QAHa,CAInBM,QAAQ,CAAE,QAJS,CAArB,CAOAC,KAAK,WACAjF,eADA,sCAC4Ca,gBAAgB,CAACmD,KAD7D,eAEHa,cAFG,CAAL,CAIGK,IAJH,CAIQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAJR,EAKGF,IALH,CAKQ,SAACG,MAAD,CAAY,CAChB,GAAIA,MAAM,CAAC,CAAD,CAAN,CAAUC,UAAV,GAAyB,GAA7B,CAAkC,CAChCvF,KAAK,CAACwF,OAAN,CAAc,6BAAd,EACD,CAFD,IAEO,IAAIF,MAAM,CAAC,CAAD,CAAN,CAAUC,UAAV,GAAyB,GAA7B,CAAkC,CACvCvF,KAAK,CAACwF,OAAN,CAAc,6BAAd,EACD,CAFM,IAEA,CACLxF,KAAK,CAACQ,KAAN,CAAY,uBAAZ,EACD,CACDG,eAAe,CAAC,KAAD,CAAf,CACD,CAdH,EAeG8E,KAfH,CAgBI,SAACjF,KAAD,QAAWC,CAAAA,QAAQ,CAACD,KAAK,CAACkF,OAAP,CAAnB,EAhBJ,CAiBI1F,KAAK,CAACQ,KAAN,CAAY,uBAAZ,CAjBJ,EAmBD,CArCD,CAyCF,GAAMmF,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAI,CAI/BT,KAAK,WACAjF,eADA,sCAC4C4B,OAD5C,kDAEH,CACEkD,MAAM,CAAE,QADV,CAEEC,OAAO,CAAE,CACPY,MAAM,CAAE,8BADD,CAEP,eAAgB,gCAFT,CAGPC,aAAa,CAAE,UAAY9D,KAHpB,CAFX,CAOEoC,IAAI,CAAE2B,IAAI,CAACC,SAAL,CAAe,EAAf,CAPR,CAFG,CAAL,CAYGZ,IAZH,CAYQ,SAACa,OAAD,CAAa,CACjB,GAAIA,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CAC1BjG,KAAK,CAACwF,OAAN,CAAc,uBAAd,EAEAnE,gBAAgB,CAAC,KAAD,CAAhB,CACAd,WAAW,CAAC2F,iBAAZ,CAA8B,eAA9B,EAED,CAND,IAMO,IAAIF,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CACjCjG,KAAK,CAACwF,OAAN,CAAc,wBAAd,EACAnE,gBAAgB,CAAC,KAAD,CAAhB,CACAd,WAAW,CAAC2F,iBAAZ,CAA8B,eAA9B,EAED,CALM,IAKA,CACLlG,KAAK,CAACQ,KAAN,CAAY,uBAAZ,EACAa,gBAAgB,CAAC,KAAD,CAAhB,CACAd,WAAW,CAAC2F,iBAAZ,CAA8B,eAA9B,EACD,CACF,CA7BH,EA8BGT,KA9BH,CA8BS,SAACjF,KAAD,QAAWR,CAAAA,KAAK,CAACQ,KAAN,CAAY,uBAAZ,CAAX,EA9BT,EA+BD,CAnCD,CAwCE;AACA,GAAM2F,CAAAA,aAAa,CAAG9F,QAAQ,CAAC,CAAC,eAAD,CAAkBwB,OAAlB,CAAD,CAA6B,iBACzD1B,CAAAA,kBAAkB,CAAC4B,KAAD,CAAQF,OAAR,CADuC,EAA7B,CAA9B,CAGA,GAAMuE,CAAAA,iBAAiB,CAAGD,aAAa,CAACE,IAAxC,CACA;AACA,GAAMC,CAAAA,YAAY,0FAAG,kJACnBnF,yBAAyB,CAACiF,iBAAD,CAAzB,CACMG,UAFa,CAEAH,iBAAiB,CAACI,UAAlB,CAA6BvD,GAA7B,CAAiC,SAACY,CAAD,QAAQ,CAC1D4C,GAAG,CAAE5C,CAAC,CAAC4C,GADmD,CAE1DC,QAAQ,CAAE7C,CAAC,CAAC6C,QAF8C,CAAR,EAAjC,CAFA,CAMnBnF,8BAA8B,CAACgF,UAAD,CAA9B,CANmB,sDAAH,kBAAZD,CAAAA,YAAY,0CAAlB,CASAxG,SAAS,CAAC,UAAM,CACd,wDAAC,qJACCsG,iBADD,kEAC6BE,CAAAA,YAAY,EADzC,yDAAD,KAGD,CAJQ,CAIN,CAACF,iBAAD,CAJM,CAAT,CAMA,MAAO,CACL5F,KAAK,CAALA,KADK,CAELC,QAAQ,CAARA,QAFK,CAGLC,YAAY,CAAZA,YAHK,CAILC,eAAe,CAAfA,eAJK,CAKLC,aAAa,CAAbA,aALK,CAMLC,gBAAgB,CAAhBA,gBANK,CAOLC,gBAAgB,CAAhBA,gBAPK,CAQLC,mBAAmB,CAAnBA,mBARK,CASLC,kBAAkB,CAAlBA,kBATK,CAULC,qBAAqB,CAArBA,qBAVK,CAWLC,sBAAsB,CAAtBA,sBAXK,CAYLC,yBAAyB,CAAzBA,yBAZK,CAaLG,2BAA2B,CAA3BA,2BAbK,CAcLC,8BAA8B,CAA9BA,8BAdK,CAeLC,MAAM,CAANA,MAfK,CAgBLC,SAAS,CAATA,SAhBK,CAiBLC,iBAAiB,CAAjBA,iBAjBK,CAkBLqB,mBAAmB,CAAnBA,mBAlBK,CAmBLa,QAAQ,CAARA,QAnBK,CAoBLW,UAAU,CAAVA,UApBK,CAqBLD,UAAU,CAAVA,UArBK,CAsBLqB,oBAAoB,CAApBA,oBAtBK,CAuBLW,YAAY,CAAZA,YAvBK,CAwBLlF,aAAa,CAAbA,aAxBK,CAyBLC,gBAAgB,CAAhBA,gBAzBK,CA0BLqC,WAAW,CAAXA,WA1BK,CAAP,CA4BD,CA/LD,CAiMA,cAAepD,CAAAA,kBAAf","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { DIOM_BASED_URLS } from \"../../../../config/url\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { getFloorPlansNames } from \"../../../../APIS/floorplans\";\r\nimport { useQueryClient, useQuery } from \"react-query\";\r\n\r\nconst useFloorPlanDetail = () => {\r\n  const QueryClient = useQueryClient();\r\n  const [error, setError] = useState(null);\r\n  const [modal_static, setModal_static] = useState(false);\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [selectedLocation, setSelectedLocation] = useState({});\r\n  const [selectLocationName, setSelectLocationName] = useState(\"\");\r\n  const [selectLocationNameById, setSelectLocationNameById] = useState(\"\");\r\n  const [modal_static1, setModal_static1] = useState(false);\r\n  const [selectLocationNamefloorname, setSelectLocationNamefloorname] =\r\n    useState(\"\");\r\n  const [loaded, setLoaded] = useState(false);\r\n  const handleSelectGroup = (selectedGroup) => {\r\n    setSelectedLocation(selectedGroup);\r\n    setSelectLocationName(selectedGroup.label);\r\n  };\r\n  const { floorid } = useParams();\r\n  const history = useHistory();\r\n  const token = localStorage.getItem(\"Token\");\r\n\r\n\r\n  const formatBytes = (bytes, decimals = 2) => {\r\n    if (bytes === 0) return \"0 Bytes\";\r\n    const k = 1024;\r\n    const dm = decimals < 0 ? 0 : decimals;\r\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\r\n  };\r\n  const handleAcceptedFiles = (files) => {\r\n    files.map((file) =>\r\n      Object.assign(file, {\r\n        preview: URL.createObjectURL(file),\r\n        htmlFormattedSize: formatBytes(file.size),\r\n      })\r\n    );\r\n\r\n    setSelectedFiles(files);\r\n  };\r\n\r\n  const tog_static1 = () => {\r\n    setModal_static1(!modal_static1);\r\n\r\n    removeBodyCss();\r\n  };\r\n\r\n  const namefunc = (e) => {\r\n    setSelectLocationNameById((prev) => ({\r\n      ...prev,\r\n      Name: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const removeBodyCss = () => {\r\n    document.body.classList.add(\"no_padding\");\r\n  };\r\n  const tog_static = () => {\r\n    setModal_static(!modal_static);\r\n    removeBodyCss();\r\n  };\r\n\r\n  const uploadFile = () => {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\r\n      \"Authorization\",\r\n      `Bearer ${localStorage.getItem(\"Token\")}`\r\n    );\r\n\r\n    var formdata = new FormData();\r\n    formdata.append(\"file\", selectedFiles[0], selectedFiles[0].name);\r\n    formdata.append(\"floorplanName\", selectLocationNameById.Name);\r\n\r\n    var requestOptions = {\r\n      method: \"POST\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    fetch(\r\n      `${DIOM_BASED_URLS}/admin-business-locations/${selectedLocation.value}/floorpans`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n        if (result[0].statusCode === 200) {\r\n          toast.success(\"Floorplans Added Succufully\");\r\n        } else if (result[0].statusCode === 204) {\r\n          toast.success(\"Floorplans Added Succufully\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch(\r\n        (error) => setError(error.message),\r\n        toast.error(\" Something went wrong\")\r\n      );\r\n  };\r\n\r\n\r\n\r\nconst deleteFloorPlansFunc = ()=>{\r\n  \r\n\r\n\r\n  fetch(\r\n    `${DIOM_BASED_URLS}/admin-business-locations/${floorid}/floorpans/selectLocationNamefloorname[0]._id`,\r\n    {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({}),\r\n    }\r\n  )\r\n    .then((result3) => {\r\n      if (result3.status === 200) {\r\n        toast.success(\" Successfully Deleted\");\r\n\r\n        setModal_static1(false)\r\n        QueryClient.invalidateQueries(\"floorplanname\");\r\n       \r\n      } else if (result3.status === 204) {\r\n        toast.success(\" Successfullyn Deleted\");\r\n        setModal_static1(false)\r\n        QueryClient.invalidateQueries(\"floorplanname\");\r\n      \r\n      } else {\r\n        toast.error(\" Something went wrong\");\r\n        setModal_static1(false)\r\n        QueryClient.invalidateQueries(\"floorplanname\");\r\n      }\r\n    })\r\n    .catch((error) => toast.error(\" Something went wrong\"));\r\n}\r\n\r\n\r\n\r\n\r\n  // ************* \r\n  const floorPlanData = useQuery([\"floorplanname\", floorid], () =>\r\n    getFloorPlansNames(token, floorid)\r\n  );\r\n  const floorPlanNameData = floorPlanData.data;\r\n  // *************\r\n  const getlocations = async () => {\r\n    setSelectLocationNameById(floorPlanNameData);\r\n    const floornames = floorPlanNameData.floorPlans.map((e) => ({\r\n      _id: e._id,\r\n      imageUrl: e.imageUrl,\r\n    }));\r\n    setSelectLocationNamefloorname(floornames);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      floorPlanNameData && (await getlocations());\r\n    })();\r\n  }, [floorPlanNameData]);\r\n\r\n  return {\r\n    error,\r\n    setError,\r\n    modal_static,\r\n    setModal_static,\r\n    selectedFiles,\r\n    setSelectedFiles,\r\n    selectedLocation,\r\n    setSelectedLocation,\r\n    selectLocationName,\r\n    setSelectLocationName,\r\n    selectLocationNameById,\r\n    setSelectLocationNameById,\r\n    selectLocationNamefloorname,\r\n    setSelectLocationNamefloorname,\r\n    loaded,\r\n    setLoaded,\r\n    handleSelectGroup,\r\n    handleAcceptedFiles,\r\n    namefunc,\r\n    uploadFile,\r\n    tog_static,\r\n    deleteFloorPlansFunc,\r\n    getlocations,\r\n    modal_static1,\r\n    setModal_static1,\r\n    tog_static1,\r\n  };\r\n};\r\n\r\nexport default useFloorPlanDetail;\r\n"]},"metadata":{},"sourceType":"module"}