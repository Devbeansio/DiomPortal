{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { takeEvery, fork, put, all, call } from \"redux-saga/effects\";\nimport { toast } from \"react-toastify\"; // Login Redux States\n\nimport { CHECK_LOGIN, LOGOUT_USER } from \"./actionTypes\";\nimport { apiError, loginUserSuccessful, logoutUserSuccess } from \"./actions\";\nimport { useSnackbar } from \"notistack\"; // AUTH related methods\n\nimport { postLogin } from \"../../../helpers/fackBackend_Helper\";\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\"; //Initilize firebase\n\nconst fireBaseBackend = getFirebaseBackend(); //If user is login then dispatch redux action's are directly from here.\n\nfunction* loginUser(_ref) {\n  _s();\n\n  let {\n    payload: {\n      user,\n      history\n    }\n  } = _ref;\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n\n  try {\n    const response = yield call(postLogin, \"/post-login\", {\n      username: user.username,\n      password: user.password\n    });\n    yield put(loginUserSuccessful(response)); // debugger\n\n    localStorage.setItem(\"authUser\", JSON.stringify(response));\n    history.push(\"/mydashboard\");\n    console.log(\"saga success 1\", response);\n  } catch (error) {\n    // console.log(\"error error\", error);\n    toast.error(\" Please Enter currect UserName and Password\"); //   const message = 'Please Enter currect UserName and Password';\n    //   enqueueSnackbar(message, { \n    //     variant: 'failed',\n    // });\n\n    yield put(apiError(error));\n  }\n}\n\n_s(loginUser, \"EOBaWbrlhJsnjjf+SgNfGhR5FU4=\", false, function () {\n  return [useSnackbar];\n});\n\nfunction* logoutUser(_ref2) {\n  let {\n    payload: {\n      history\n    }\n  } = _ref2;\n\n  try {\n    localStorage.removeItem(\"authUser\");\n\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(fireBaseBackend.logout);\n      yield put(logoutUserSuccess(response));\n    }\n\n    history.push(\"/login\");\n    localStorage.setItem(\"Token\", \"\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nexport function* watchUserLogin() {\n  yield takeEvery(CHECK_LOGIN, loginUser);\n}\nexport function* watchUserLogout() {\n  yield takeEvery(LOGOUT_USER, logoutUser);\n}\n\nfunction* loginSaga() {\n  yield all([fork(watchUserLogin), fork(watchUserLogout)]);\n}\n\nexport default loginSaga;","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom (1)/diom/src/store/auth/login/saga.js"],"names":["takeEvery","fork","put","all","call","toast","CHECK_LOGIN","LOGOUT_USER","apiError","loginUserSuccessful","logoutUserSuccess","useSnackbar","postLogin","getFirebaseBackend","fireBaseBackend","loginUser","payload","user","history","enqueueSnackbar","response","username","password","localStorage","setItem","JSON","stringify","push","console","log","error","logoutUser","removeItem","process","env","REACT_APP_DEFAULTAUTH","logout","watchUserLogin","watchUserLogout","loginSaga"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,GAA/B,EAAoCC,IAApC,QAAgD,oBAAhD;AACA,SAASC,KAAT,QAAsB,gBAAtB,C,CACA;;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,eAAzC;AACA,SAASC,QAAT,EAAmBC,mBAAnB,EAAwCC,iBAAxC,QAAiE,WAAjE;AACA,SAAUC,WAAV,QAA6B,WAA7B,C,CACA;;AACA,SAASC,SAAT,QAA0B,qCAA1B;AACA,SAASC,kBAAT,QAAmC,kCAAnC,C,CAEA;;AACA,MAAMC,eAAe,GAAGD,kBAAkB,EAA1C,C,CAEA;;AACA,UAAUE,SAAV,OAAoD;AAAA;;AAAA,MAAhC;AAAEC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR;AAAX,GAAgC;AAClD,QAAM;AAAEC,IAAAA;AAAF,MAAsBR,WAAW,EAAvC;;AACA,MAAI;AACF,UAAMS,QAAQ,GAAG,MAAMhB,IAAI,CAACQ,SAAD,EAAY,aAAZ,EAA2B;AACpDS,MAAAA,QAAQ,EAAEJ,IAAI,CAACI,QADqC;AAEpDC,MAAAA,QAAQ,EAAEL,IAAI,CAACK;AAFqC,KAA3B,CAA3B;AAIA,UAAMpB,GAAG,CAACO,mBAAmB,CAACW,QAAD,CAApB,CAAT,CALE,CAMF;;AACAG,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAAjC;AACAF,IAAAA,OAAO,CAACS,IAAR,CAAa,cAAb;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BT,QAA9B;AAED,GAXD,CAWE,OAAOU,KAAP,EAAc;AACd;AACAzB,IAAAA,KAAK,CAACyB,KAAN,CAAY,6CAAZ,EAFc,CAGhB;AACA;AACA;AAEA;;AACE,UAAM5B,GAAG,CAACM,QAAQ,CAACsB,KAAD,CAAT,CAAT;AACD;AACF;;GAvBSf,S;UACoBJ,W;;;AAwB9B,UAAUoB,UAAV,QAA+C;AAAA,MAA1B;AAAEf,IAAAA,OAAO,EAAE;AAAEE,MAAAA;AAAF;AAAX,GAA0B;;AAC7C,MAAI;AACFK,IAAAA,YAAY,CAACS,UAAb,CAAwB,UAAxB;;AAEA,QAAIC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,KAAsC,UAA1C,EAAsD;AACpD,YAAMf,QAAQ,GAAG,MAAMhB,IAAI,CAACU,eAAe,CAACsB,MAAjB,CAA3B;AACA,YAAMlC,GAAG,CAACQ,iBAAiB,CAACU,QAAD,CAAlB,CAAT;AACD;;AAEDF,IAAAA,OAAO,CAACS,IAAR,CAAa,QAAb;AACAJ,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8B,EAA9B;AACD,GAVD,CAUE,OAAOM,KAAP,EAAc;AACd,UAAM5B,GAAG,CAACM,QAAQ,CAACsB,KAAD,CAAT,CAAT;AACD;AACF;;AAED,OAAO,UAAUO,cAAV,GAA2B;AAChC,QAAMrC,SAAS,CAACM,WAAD,EAAcS,SAAd,CAAf;AACD;AAED,OAAO,UAAUuB,eAAV,GAA4B;AACjC,QAAMtC,SAAS,CAACO,WAAD,EAAcwB,UAAd,CAAf;AACD;;AAED,UAAUQ,SAAV,GAAsB;AACpB,QAAMpC,GAAG,CAAC,CAACF,IAAI,CAACoC,cAAD,CAAL,EAAuBpC,IAAI,CAACqC,eAAD,CAA3B,CAAD,CAAT;AACD;;AAED,eAAeC,SAAf","sourcesContent":["import { takeEvery, fork, put, all, call } from \"redux-saga/effects\";\r\nimport { toast } from \"react-toastify\";\r\n// Login Redux States\r\nimport { CHECK_LOGIN, LOGOUT_USER } from \"./actionTypes\";\r\nimport { apiError, loginUserSuccessful, logoutUserSuccess } from \"./actions\";\r\nimport {  useSnackbar } from \"notistack\";\r\n// AUTH related methods\r\nimport { postLogin } from \"../../../helpers/fackBackend_Helper\";\r\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\";\r\n\r\n//Initilize firebase\r\nconst fireBaseBackend = getFirebaseBackend();\r\n\r\n//If user is login then dispatch redux action's are directly from here.\r\nfunction* loginUser({ payload: { user, history } }) {\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  try {\r\n    const response = yield call(postLogin, \"/post-login\", {\r\n      username: user.username,\r\n      password: user.password,\r\n    });\r\n    yield put(loginUserSuccessful(response));\r\n    // debugger\r\n    localStorage.setItem(\"authUser\", JSON.stringify(response));\r\n    history.push(\"/mydashboard\");\r\n    console.log(\"saga success 1\", response);\r\n    \r\n  } catch (error) {\r\n    // console.log(\"error error\", error);\r\n    toast.error(\" Please Enter currect UserName and Password\");\r\n  //   const message = 'Please Enter currect UserName and Password';\r\n  //   enqueueSnackbar(message, { \r\n  //     variant: 'failed',\r\n      \r\n  // });\r\n    yield put(apiError(error));\r\n  }\r\n}\r\n\r\nfunction* logoutUser({ payload: { history } }) {\r\n  try {\r\n    localStorage.removeItem(\"authUser\");\r\n\r\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n      const response = yield call(fireBaseBackend.logout);\r\n      yield put(logoutUserSuccess(response));\r\n    }\r\n\r\n    history.push(\"/login\");\r\n    localStorage.setItem(\"Token\", \"\");\r\n  } catch (error) {\r\n    yield put(apiError(error));\r\n  }\r\n}\r\n\r\nexport function* watchUserLogin() {\r\n  yield takeEvery(CHECK_LOGIN, loginUser);\r\n}\r\n\r\nexport function* watchUserLogout() {\r\n  yield takeEvery(LOGOUT_USER, logoutUser);\r\n}\r\n\r\nfunction* loginSaga() {\r\n  yield all([fork(watchUserLogin), fork(watchUserLogout)]);\r\n}\r\n\r\nexport default loginSaga;\r\n"]},"metadata":{},"sourceType":"module"}