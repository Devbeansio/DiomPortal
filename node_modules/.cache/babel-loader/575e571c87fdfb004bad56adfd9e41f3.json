{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{DIOM_BASED_URLS}from\"../config/url\";import moment from\"moment\";/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */export var getInvoices=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var size,page,token,applyFilter,history,res,_resJson,resJson,Invoiceslistingdata,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:size=_args.length>0&&_args[0]!==undefined?_args[0]:30;page=_args.length>1&&_args[1]!==undefined?_args[1]:1;token=_args.length>2&&_args[2]!==undefined?_args[2]:\"\";applyFilter=_args.length>3&&_args[3]!==undefined?_args[3]:false;history=_args.length>4?_args[4]:undefined;_context.next=7;return fetch(\"\".concat(DIOM_BASED_URLS,\"/invoices?size=\").concat(size,\"&page=\").concat(page),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 7:res=_context.sent;if(res.ok){_context.next=16;break;}if(!(res.status===401)){_context.next=12;break;}history.push(\"/login\");throw new Error(_resJson.error.message);case 12:_context.next=14;return res.json();case 14:_resJson=_context.sent;throw new Error(_resJson.error.message);case 16:_context.next=18;return res.json();case 18:resJson=_context.sent;Invoiceslistingdata=resJson.data.map(function(element,index){return _objectSpread(_objectSpread({},element),{},{id:index+1,invoiceId:element.id,bookingId:element.bookingId,totalPaid:element.total,paymentMethod:element.paymentMethod,createdAt:moment(element.createdAt).format(\"YYYY-MM-DD \"),customerData:element.customerName});});return _context.abrupt(\"return\",{data:Invoiceslistingdata,total:resJson.total,hasNextPage:resJson.hasNextPage,hasPreviousPage:resJson.hasPreviousPage});case 21:case\"end\":return _context.stop();}}},_callee);}));return function getInvoices(){return _ref.apply(this,arguments);};}();export var getInvoice=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var size,page,token,id,history,res,_resJson2,resJson,InvoiceData,_args2=arguments;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:size=_args2.length>0&&_args2[0]!==undefined?_args2[0]:30;page=_args2.length>1&&_args2[1]!==undefined?_args2[1]:1;token=_args2.length>2&&_args2[2]!==undefined?_args2[2]:\"\";id=_args2.length>3?_args2[3]:undefined;history=_args2.length>4?_args2[4]:undefined;_context2.next=7;return fetch(\"\".concat(DIOM_BASED_URLS,\"/invoices/\").concat(id),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 7:res=_context2.sent;if(res.ok){_context2.next=16;break;}if(!(res.status===401)){_context2.next=12;break;}history.push(\"/login\");throw new Error(_resJson2.error.message);case 12:_context2.next=14;return res.json();case 14:_resJson2=_context2.sent;throw new Error(_resJson2.error.message);case 16:_context2.next=18;return res.json();case 18:resJson=_context2.sent;InvoiceData=resJson.data;// console.log(\"InvoiceData\", InvoiceData);\nreturn _context2.abrupt(\"return\",{data:InvoiceData,total:resJson.total,hasNextPage:resJson.hasNextPage,hasPreviousPage:resJson.hasPreviousPage});case 21:case\"end\":return _context2.stop();}}},_callee2);}));return function getInvoice(){return _ref2.apply(this,arguments);};}();","map":{"version":3,"names":["DIOM_BASED_URLS","moment","getInvoices","size","page","token","applyFilter","history","fetch","method","redirect","headers","Authorization","res","ok","status","push","Error","resJson","error","message","json","Invoiceslistingdata","data","map","element","index","id","invoiceId","bookingId","totalPaid","total","paymentMethod","createdAt","format","customerData","customerName","hasNextPage","hasPreviousPage","getInvoice","InvoiceData"],"sources":["C:/Users/tech sign/Desktop/xyz/src/APIS/invoices.js"],"sourcesContent":["import { DIOM_BASED_URLS } from \"../config/url\";\r\nimport moment from \"moment\";\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */\r\n\r\nexport const getInvoices = async (\r\n  size = 30,\r\n  page = 1,\r\n  token = \"\",\r\n  applyFilter = false,\r\n  history\r\n) => {\r\n  const res = await fetch(\r\n    `${DIOM_BASED_URLS}/invoices?size=${size}&page=${page}`,\r\n\r\n    {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n  if (!res.ok) {\r\n    if(res.status === 401){\r\n      history.push(\"/login\");\r\n      throw new Error(resJson.error.message);\r\n   \r\n  }\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n  const resJson = await res.json();\r\n\r\n  const Invoiceslistingdata = resJson.data.map((element, index) => ({\r\n    ...element,\r\n    id: index + 1,\r\n    invoiceId: element.id,\r\n    bookingId: element.bookingId,\r\n    totalPaid: element.total,\r\n    paymentMethod: element.paymentMethod,\r\n    createdAt: moment(element.createdAt).format(\"YYYY-MM-DD \"),\r\n    customerData: element.customerName,\r\n  }));\r\n\r\n  return {\r\n    data: Invoiceslistingdata,\r\n    total: resJson.total,\r\n    hasNextPage: resJson.hasNextPage,\r\n    hasPreviousPage: resJson.hasPreviousPage,\r\n  };\r\n};\r\n\r\nexport const getInvoice = async (size = 30, page = 1, token = \"\", id,history) => {\r\n  const res = await fetch(\r\n    `${DIOM_BASED_URLS}/invoices/${id}`,\r\n\r\n    {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n  if (!res.ok) {\r\n    if(res.status === 401){\r\n      history.push(\"/login\");\r\n      throw new Error(resJson.error.message);\r\n   \r\n  }\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n  const resJson = await res.json();\r\n\r\n  const InvoiceData = resJson.data;\r\n  // console.log(\"InvoiceData\", InvoiceData);\r\n\r\n  return {\r\n    data: InvoiceData,\r\n    total: resJson.total,\r\n    hasNextPage: resJson.hasNextPage,\r\n    hasPreviousPage: resJson.hasPreviousPage,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}