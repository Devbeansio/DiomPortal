{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { DIOM_BASED_URLS } from \"../../../../config/url\";\nimport { toast } from \"react-toastify\";\nimport { getCategoryDetails } from \"../../../../APIS/categories\";\nimport { useQueryClient, useQuery } from \"react-query\";\nimport { getResourcetypeDropdown } from \"../../../../APIS/categories\";\nimport { getCategoryDetaildropdown } from \"../../../../APIS/categories\";\n\nconst UseCategoryDetail = () => {\n  _s();\n\n  const QueryClient = useQueryClient();\n  const [error, setError] = useState(null);\n  const [selectedMulti, setSelectedMulti] = useState([]);\n  const [modal_static, setModal_static] = useState(false);\n  const [modal_static1, setModal_static1] = useState(false);\n  const [categoryDetail, setCategoryDetail] = useState();\n  const [categoryDropDown, setCategoryDropDown] = useState([]);\n  const [categoryDetailname, setCategoryDetailname] = useState();\n  const [selectedvalue, setSelectedvalue] = useState();\n  const [loaded, setLoaded] = useState(false);\n  const [selectedValueForDelte, setSelectedValueForDelte] = useState();\n  const {\n    id\n  } = useParams();\n  const token = localStorage.getItem(\"Token\");\n\n  const OnChangeCategory = event => {\n    setCategoryDetail(prev => event.target.value);\n  };\n\n  const tog_static1 = () => {\n    setModal_static1(!modal_static1);\n    removeBodyCss();\n  };\n\n  const removeBodyCss = () => {\n    document.body.classList.add(\"no_padding\");\n  };\n\n  const tog_static = () => {\n    setModal_static(!modal_static);\n    removeBodyCss();\n  };\n\n  const updateNameAndDescription = () => {\n    fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        name: categoryDetail\n      })\n    }).then(result3 => {\n      if (result3.status === 200) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"resourceTypedropdown\");\n        QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n        QueryClient.invalidateQueries(\"categpryDetails\");\n      } else if (result3.status === 204) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"resourceTypedropdown\");\n        QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n        QueryClient.invalidateQueries(\"categpryDetails\");\n      } else {\n        toast.error(\" Something went wrong\");\n      }\n\n      setModal_static(false);\n    }).catch(error => toast.error(\" Something went wrong\"));\n  };\n\n  const handleMulti = selected => {\n    if (selectedMulti.length < selected.length) {\n      const lenthOFAdded = selected.length - 1;\n      setSelectedValueForDelte(selected[lenthOFAdded].value);\n      setSelectedvalue(selected[lenthOFAdded].value);\n\n      if (selected[lenthOFAdded].locationCategoriesId === \"\") {\n        fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes`, {\n          method: \"PATCH\",\n          headers: {\n            Accept: \"application/json, text/plain\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n            Authorization: \"Bearer \" + token\n          },\n          body: JSON.stringify({\n            resourceTypeId: selected[lenthOFAdded].value\n          })\n        }).then(result3 => {\n          if (result3.status === 200) {\n            toast.success(\"Updated Successfully\");\n            QueryClient.invalidateQueries(\"resourceTypedropdown\");\n            QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n            QueryClient.invalidateQueries(\"categpryDetails\");\n          } else if (result3.status === 204) {\n            toast.success(\"Updated Successfully\");\n            QueryClient.invalidateQueries(\"resourceTypedropdown\");\n            QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n            QueryClient.invalidateQueries(\"categpryDetails\");\n          } else {\n            toast.error(\" Something went wrong\");\n          } // setModal_static(false);\n\n        }).catch(error => console.log(\"error\", error));\n      } else {\n        tog_static1();\n      }\n    } else if (selectedMulti.length > selected.length) {\n      const mappedValuedSelected = selected.map(e => {\n        return e.value;\n      }); // const mappedValuedMultiSelected = selectedMulti.map((e) => {return ( e.value) })\n\n      const filteredValue = selectedMulti.filter(e => {\n        return !mappedValuedSelected.includes(e.value);\n      });\n      fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes/${filteredValue[0].value}`, {\n        method: \"DELETE\",\n        headers: {\n          Accept: \"application/json, text/plain\",\n          \"Content-Type\": \"application/json;charset=UTF-8\",\n          Authorization: \"Bearer \" + token\n        },\n        body: JSON.stringify({})\n      }).then(result3 => {\n        if (result3.status === 200) {\n          toast.success(\" Successfully Deleted\");\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n          QueryClient.invalidateQueries(\"categpryDetails\");\n        } else if (result3.status === 204) {\n          toast.success(\" Successfullyn Deleted\");\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n          QueryClient.invalidateQueries(\"categpryDetails\");\n        } else {\n          toast.error(\" Something went wrong\");\n        }\n      }).catch(error => toast.error(\" Something went wrong\"));\n    }\n\n    setSelectedMulti(selected);\n  };\n\n  const FetchbrandLocations = () => {\n    fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        resourceTypeId: selectedvalue\n      })\n    }).then(result3 => {\n      if (result3.status === 200) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"resourceTypedropdown\");\n        QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n        QueryClient.invalidateQueries(\"categpryDetails\");\n      } else if (result3.status === 204) {\n        toast.success(\"Updated Successfully\");\n        QueryClient.invalidateQueries(\"resourceTypedropdown\");\n        QueryClient.invalidateQueries(\"categpryDetaildropdown\");\n        QueryClient.invalidateQueries(\"categpryDetails\");\n      } else {\n        toast.error(\" Something went wrong\");\n      }\n\n      setModal_static(false);\n    }).catch(error => toast.error(\" Something went wrong\"));\n    setModal_static1(false);\n  }; // *************\n\n\n  const categoryData = useQuery([\"categpryDetails\", id], () => getCategoryDetails(token, id));\n  const categoryDailedData = categoryData.data; // *************\n\n  const CategoryDetail = async () => {\n    setCategoryDetailname(categoryDailedData.name);\n    setCategoryDetail(categoryDailedData.name);\n  }; // *************\n\n\n  const categorydropdownData = useQuery([\"categpryDetaildropdown\", id], () => getCategoryDetaildropdown(token, id));\n  const categorydropdownDailedData = categorydropdownData.data; // *************\n\n  const CategoryDetaildropdown = async () => {\n    const matadata = categorydropdownDailedData.data.map(element => {\n      return {\n        label: element.Name,\n        value: element.id\n      };\n    });\n    setSelectedMulti(matadata);\n    setCategoryDropDown(matadata);\n  }; // *************\n\n\n  const resourceTypedropdownData = useQuery([\"resourceTypedropdown\", id], () => getResourcetypeDropdown(token, id));\n  const resourceTypedropdownDailedData = resourceTypedropdownData.data;\n  const isLoading = resourceTypedropdownData.isLoading; // *************\n\n  const Resourcetypesdropdown = async () => {\n    const matadata = resourceTypedropdownDailedData.data.map(element => {\n      return {\n        label: element.Name,\n        value: element.id,\n        UniqueId: element.UniqueId\n      };\n    });\n    setCategoryDropDown(matadata);\n  };\n\n  useEffect(() => {\n    (async () => {\n      categoryDailedData && (await CategoryDetail());\n      categorydropdownDailedData && (await CategoryDetaildropdown());\n      resourceTypedropdownDailedData && (await Resourcetypesdropdown());\n    })();\n  }, [categoryDailedData, categorydropdownDailedData, resourceTypedropdownDailedData]);\n  return {\n    error,\n    setError,\n    selectedMulti,\n    setSelectedMulti,\n    modal_static,\n    setModal_static,\n    modal_static1,\n    setModal_static1,\n    isLoading,\n    categoryDetail,\n    setCategoryDetail,\n    categoryDropDown,\n    setCategoryDropDown,\n    categoryDetailname,\n    setCategoryDetailname,\n    selectedvalue,\n    setSelectedvalue,\n    loaded,\n    setLoaded,\n    selectedValueForDelte,\n    setSelectedValueForDelte,\n    updateNameAndDescription,\n    OnChangeCategory,\n    handleMulti,\n    tog_static1,\n    tog_static,\n    FetchbrandLocations,\n    CategoryDetail,\n    CategoryDetaildropdown,\n    Resourcetypesdropdown,\n    getresourceStatusFunc\n  };\n};\n\n_s(UseCategoryDetail, \"kIq7HMV0cZfJfhjfS2IX140Bznk=\", false, function () {\n  return [useQueryClient, useParams, useQuery, useQuery, useQuery];\n});\n\n_c = UseCategoryDetail;\nexport default UseCategoryDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"UseCategoryDetail\");","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/src/pages/Inventories/Categories/CategoriesDetail/useCategoryDetail.js"],"names":["React","useState","useEffect","useParams","useHistory","DIOM_BASED_URLS","toast","getCategoryDetails","useQueryClient","useQuery","getResourcetypeDropdown","getCategoryDetaildropdown","UseCategoryDetail","QueryClient","error","setError","selectedMulti","setSelectedMulti","modal_static","setModal_static","modal_static1","setModal_static1","categoryDetail","setCategoryDetail","categoryDropDown","setCategoryDropDown","categoryDetailname","setCategoryDetailname","selectedvalue","setSelectedvalue","loaded","setLoaded","selectedValueForDelte","setSelectedValueForDelte","id","token","localStorage","getItem","OnChangeCategory","event","prev","target","value","tog_static1","removeBodyCss","document","body","classList","add","tog_static","updateNameAndDescription","fetch","method","headers","Accept","Authorization","JSON","stringify","name","then","result3","status","success","invalidateQueries","catch","handleMulti","selected","length","lenthOFAdded","locationCategoriesId","resourceTypeId","console","log","mappedValuedSelected","map","e","filteredValue","filter","includes","FetchbrandLocations","categoryData","categoryDailedData","data","CategoryDetail","categorydropdownData","categorydropdownDailedData","CategoryDetaildropdown","matadata","element","label","Name","resourceTypedropdownData","resourceTypedropdownDailedData","isLoading","Resourcetypesdropdown","UniqueId","getresourceStatusFunc"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { DIOM_BASED_URLS } from \"../../../../config/url\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getCategoryDetails } from \"../../../../APIS/categories\";\r\nimport { useQueryClient, useQuery } from \"react-query\";\r\nimport { getResourcetypeDropdown } from \"../../../../APIS/categories\";\r\nimport { getCategoryDetaildropdown } from \"../../../../APIS/categories\";\r\n\r\nconst UseCategoryDetail = () => {\r\n  const QueryClient = useQueryClient();\r\n  const [error, setError] = useState(null);\r\n  const [selectedMulti, setSelectedMulti] = useState([]);\r\n  const [modal_static, setModal_static] = useState(false);\r\n  const [modal_static1, setModal_static1] = useState(false);\r\n  const [categoryDetail, setCategoryDetail] = useState();\r\n  const [categoryDropDown, setCategoryDropDown] = useState([]);\r\n  const [categoryDetailname, setCategoryDetailname] = useState();\r\n  const [selectedvalue, setSelectedvalue] = useState();\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [selectedValueForDelte, setSelectedValueForDelte] = useState();\r\n\r\n  const { id } = useParams();\r\n  const token = localStorage.getItem(\"Token\");\r\n\r\n  const OnChangeCategory = (event) => {\r\n    setCategoryDetail((prev) => event.target.value);\r\n  };\r\n\r\n  const tog_static1 = () => {\r\n    setModal_static1(!modal_static1);\r\n\r\n    removeBodyCss();\r\n  };\r\n\r\n  const removeBodyCss = () => {\r\n    document.body.classList.add(\"no_padding\");\r\n  };\r\n  const tog_static = () => {\r\n    setModal_static(!modal_static);\r\n\r\n    removeBodyCss();\r\n  };\r\n\r\n  const updateNameAndDescription = () => {\r\n    fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        name: categoryDetail,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  };\r\n\r\n  const handleMulti = (selected) => {\r\n    if (selectedMulti.length < selected.length) {\r\n      const lenthOFAdded = selected.length - 1;\r\n      setSelectedValueForDelte(selected[lenthOFAdded].value);\r\n      setSelectedvalue(selected[lenthOFAdded].value);\r\n      if (selected[lenthOFAdded].locationCategoriesId === \"\") {\r\n        fetch(\r\n          `${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes`,\r\n          {\r\n            method: \"PATCH\",\r\n            headers: {\r\n              Accept: \"application/json, text/plain\",\r\n              \"Content-Type\": \"application/json;charset=UTF-8\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n            body: JSON.stringify({\r\n              resourceTypeId: selected[lenthOFAdded].value,\r\n            }),\r\n          }\r\n        )\r\n          .then((result3) => {\r\n            if (result3.status === 200) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetails\");\r\n            } else if (result3.status === 204) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetails\");\r\n            } else {\r\n              toast.error(\" Something went wrong\");\r\n            }\r\n            // setModal_static(false);\r\n          })\r\n          .catch((error) => console.log(\"error\", error));\r\n      } else {\r\n        tog_static1();\r\n      }\r\n    } else if (selectedMulti.length > selected.length) {\r\n      const mappedValuedSelected = selected.map((e) => {\r\n        return e.value;\r\n      });\r\n      // const mappedValuedMultiSelected = selectedMulti.map((e) => {return ( e.value) })\r\n      const filteredValue = selectedMulti.filter((e) => {\r\n        return !mappedValuedSelected.includes(e.value);\r\n      });\r\n\r\n      fetch(\r\n        `${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes/${filteredValue[0].value}`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Accept: \"application/json, text/plain\",\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n          body: JSON.stringify({}),\r\n        }\r\n      )\r\n        .then((result3) => {\r\n          if (result3.status === 200) {\r\n            toast.success(\" Successfully Deleted\");\r\n            QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetails\");\r\n          } else if (result3.status === 204) {\r\n            toast.success(\" Successfullyn Deleted\");\r\n            QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetails\");\r\n          } else {\r\n            toast.error(\" Something went wrong\");\r\n          }\r\n        })\r\n        .catch((error) => toast.error(\" Something went wrong\"));\r\n    }\r\n\r\n    setSelectedMulti(selected);\r\n  };\r\n\r\n  const FetchbrandLocations = () => {\r\n    fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        resourceTypeId: selectedvalue,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n    setModal_static1(false);\r\n  };\r\n\r\n  // *************\r\n  const categoryData = useQuery([\"categpryDetails\", id], () =>\r\n    getCategoryDetails(token, id)\r\n  );\r\n  const categoryDailedData = categoryData.data;\r\n  // *************\r\n  const CategoryDetail = async () => {\r\n    setCategoryDetailname(categoryDailedData.name);\r\n    setCategoryDetail(categoryDailedData.name);\r\n  };\r\n\r\n  // *************\r\n  const categorydropdownData = useQuery([\"categpryDetaildropdown\", id], () =>\r\n    getCategoryDetaildropdown(token, id)\r\n  );\r\n  const categorydropdownDailedData = categorydropdownData.data;\r\n\r\n  // *************\r\n  const CategoryDetaildropdown = async () => {\r\n    const matadata = categorydropdownDailedData.data.map((element) => {\r\n      return {\r\n        label: element.Name,\r\n        value: element.id,\r\n      };\r\n    });\r\n    setSelectedMulti(matadata);\r\n    setCategoryDropDown(matadata);\r\n  };\r\n\r\n  // *************\r\n  const resourceTypedropdownData = useQuery([\"resourceTypedropdown\", id], () =>\r\n    getResourcetypeDropdown(token, id)\r\n  );\r\n  const resourceTypedropdownDailedData = resourceTypedropdownData.data;\r\n  const isLoading = resourceTypedropdownData.isLoading;\r\n  // *************\r\n  const Resourcetypesdropdown = async () => {\r\n    const matadata = resourceTypedropdownDailedData.data.map((element) => {\r\n      return {\r\n        label: element.Name,\r\n        value: element.id,\r\n        UniqueId: element.UniqueId,\r\n      };\r\n    });\r\n\r\n    setCategoryDropDown(matadata);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      categoryDailedData && (await CategoryDetail());\r\n      categorydropdownDailedData && (await CategoryDetaildropdown());\r\n      resourceTypedropdownDailedData && (await Resourcetypesdropdown());\r\n    })();\r\n  }, [\r\n    categoryDailedData,\r\n    categorydropdownDailedData,\r\n    resourceTypedropdownDailedData,\r\n  ]);\r\n\r\n  return {\r\n    error,\r\n    setError,\r\n    selectedMulti,\r\n    setSelectedMulti,\r\n    modal_static,\r\n    setModal_static,\r\n    modal_static1,\r\n    setModal_static1,\r\n    isLoading,\r\n    categoryDetail,\r\n    setCategoryDetail,\r\n    categoryDropDown,\r\n    setCategoryDropDown,\r\n    categoryDetailname,\r\n    setCategoryDetailname,\r\n    selectedvalue,\r\n    setSelectedvalue,\r\n    loaded,\r\n    setLoaded,\r\n    selectedValueForDelte,\r\n    setSelectedValueForDelte,\r\n    updateNameAndDescription,\r\n    OnChangeCategory,\r\n    handleMulti,\r\n    tog_static1,\r\n    tog_static,\r\n    FetchbrandLocations,\r\n    CategoryDetail,\r\n    CategoryDetaildropdown,\r\n    Resourcetypesdropdown,\r\n    getresourceStatusFunc,\r\n  };\r\n};\r\n\r\nexport default UseCategoryDetail;\r\n"]},"metadata":{},"sourceType":"module"}