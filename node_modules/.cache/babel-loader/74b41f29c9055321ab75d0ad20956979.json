{"ast":null,"code":"import _objectSpread from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\diom working project\\\\staging\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{DIOM_BASED_URLS}from\"../config/url\";import moment from\"moment\";/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of BOOKING in DIOM\r\n */export var getBooking=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,id,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=_args.length>0&&_args[0]!==undefined?_args[0]:\"\";id=_args.length>1?_args[1]:undefined;_context.next=4;return fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-diom-bookings/\").concat(id),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 4:_context.next=6;return _context.sent.json();case 6:return _context.abrupt(\"return\",_context.sent);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getBooking(){return _ref.apply(this,arguments);};}();/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of guests in DIOM\r\n */export var getGuest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,id,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=_args2.length>0&&_args2[0]!==undefined?_args2[0]:\"\";id=_args2.length>1?_args2[1]:undefined;_context2.next=4;return fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-booking-guest/booking/\").concat(id),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 4:_context2.next=6;return _context2.sent.json();case 6:return _context2.abrupt(\"return\",_context2.sent);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getGuest(){return _ref2.apply(this,arguments);};}();/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of bookinguserdata in DIOM\r\n */export var getbookinguser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(token,id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"\".concat(DIOM_BASED_URLS,\"/users/\").concat(id),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 2:_context3.next=4;return _context3.sent.json();case 4:return _context3.abrupt(\"return\",_context3.sent);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function getbookinguser(_x,_x2){return _ref3.apply(this,arguments);};}();/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of bookings locations in DIOM\r\n */export var getbookinglocations=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var token,_args4=arguments;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:token=_args4.length>0&&_args4[0]!==undefined?_args4[0]:\"\";_context4.next=3;return fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations?filter={\\\"where\\\":{\\\"visibility\\\":true}}\"),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 3:_context4.next=5;return _context4.sent.json();case 5:return _context4.abrupt(\"return\",_context4.sent);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function getbookinglocations(){return _ref4.apply(this,arguments);};}();/**\r\n *\r\n * @param {*JWT} token\r\n * @returns get today bookings data for dropdown\r\n */export var gettodaysbookings=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var size,page,token,applyFilter,filters,res,_resJson,resJson,todayBookingsdata,_args5=arguments;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:size=_args5.length>0&&_args5[0]!==undefined?_args5[0]:30;page=_args5.length>1&&_args5[1]!==undefined?_args5[1]:1;token=_args5.length>2&&_args5[2]!==undefined?_args5[2]:\"\";applyFilter=_args5.length>3&&_args5[3]!==undefined?_args5[3]:false;filters=_args5.length>4&&_args5[4]!==undefined?_args5[4]:{};_context5.next=7;return fetch(!applyFilter?\"\".concat(DIOM_BASED_URLS,\"/admin-diom-bookings/today?size=\").concat(size,\"&page=\").concat(page):\"\".concat(DIOM_BASED_URLS,\"/admin-diom-bookings/today/\").concat(filters,\"?size=\").concat(size,\"&page=\").concat(page),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 7:res=_context5.sent;if(res.ok){_context5.next=13;break;}_context5.next=11;return res.json();case 11:_resJson=_context5.sent;throw new Error(_resJson.error.message);case 13:_context5.next=15;return res.json();case 15:resJson=_context5.sent;todayBookingsdata=resJson.data.map(function(booking,index){return _objectSpread(_objectSpread({},booking),{},{id:index+1,_id:booking.id,updatedAt:moment(booking.updatedAt).format(\"YYYY-MM-DD HH:mm\"),Bookingstartend:moment(booking.fromTime).format(\"MMM DD \")+\" - \"+moment(booking.toTime).format(\"MMM DD\"),timeLogs:booking.timeLogs.length>0?moment(booking.timeLogs[booking.timeLogs.length-1].fromTime).format(\"HH:mm\"):null// booking.timeLogs.map((e) => moment(e.fromTime).format(\"HH:mm\"))\n// .join(\", \"),\n});});return _context5.abrupt(\"return\",{data:todayBookingsdata,total:resJson.total,hasNextPage:resJson.hasNextPage,hasPreviousPage:resJson.hasPreviousPage});case 18:case\"end\":return _context5.stop();}}},_callee5);}));return function gettodaysbookings(){return _ref5.apply(this,arguments);};}();/**\r\n *\r\n * @param {*JWT} token\r\n * @returns get Fetched bookings data for dropdown\r\n */export var getschduleddbookings=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var size,page,token,applyFilter,filters,res,_resJson2,resJson,schduledBookingsdata,_args6=arguments;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:size=_args6.length>0&&_args6[0]!==undefined?_args6[0]:30;page=_args6.length>1&&_args6[1]!==undefined?_args6[1]:1;token=_args6.length>2&&_args6[2]!==undefined?_args6[2]:\"\";applyFilter=_args6.length>3&&_args6[3]!==undefined?_args6[3]:false;filters=_args6.length>4&&_args6[4]!==undefined?_args6[4]:{};_context6.next=7;return fetch(!applyFilter?\"\".concat(DIOM_BASED_URLS,\"/admin-diom-bookings/scheduled?size=\").concat(size,\"&page=\").concat(page):\"\".concat(DIOM_BASED_URLS,\"/admin-diom-bookings/scheduled/\").concat(filters,\"?size=\").concat(size,\"&page=\").concat(page),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 7:res=_context6.sent;if(res.ok){_context6.next=13;break;}_context6.next=11;return res.json();case 11:_resJson2=_context6.sent;throw new Error(_resJson2.error.message);case 13:_context6.next=15;return res.json();case 15:resJson=_context6.sent;// const result = applyFilter\n//   ? (result = resJson.data.bookings)\n//   : (result = resJson.data);\nschduledBookingsdata=resJson.data.map(function(booking,index){return _objectSpread(_objectSpread({},booking),{},{id:index+1,updatedAt:moment(booking.updatedAt).format(\"YYYY-MM-DD HH:mm\"),_id:booking.id,Bookingstartend:moment(booking.fromTime).format(\"MMM DD \")+\" - \"+moment(booking.toTime).format(\"MMM DD\"),timeLogs:booking.timeLogs.map(function(e){return moment(e.fromTime).format(\"HH:mm\");})});});return _context6.abrupt(\"return\",{data:schduledBookingsdata,total:resJson.total,hasNextPage:resJson.hasNextPage,hasPreviousPage:resJson.hasPreviousPage});case 18:case\"end\":return _context6.stop();}}},_callee6);}));return function getschduleddbookings(){return _ref6.apply(this,arguments);};}();/**\r\n *\r\n * @param {*JWT} token\r\n * @returns get Fetched Past bookings data for dropdown\r\n */export var getPasttbookings=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var size,page,token,applyFilter,filters,res,_resJson3,resJson,pastBookingsdata,_args7=arguments;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:size=_args7.length>0&&_args7[0]!==undefined?_args7[0]:30;page=_args7.length>1&&_args7[1]!==undefined?_args7[1]:1;token=_args7.length>2&&_args7[2]!==undefined?_args7[2]:\"\";applyFilter=_args7.length>3&&_args7[3]!==undefined?_args7[3]:false;filters=_args7.length>4&&_args7[4]!==undefined?_args7[4]:{};_context7.next=7;return fetch(!applyFilter?\"\".concat(DIOM_BASED_URLS,\"/admin-diom-bookings/past?size=\").concat(size,\"&page=\").concat(page):\"\".concat(DIOM_BASED_URLS,\"/admin-diom-bookings/past/\").concat(filters,\"?size=\").concat(size,\"&page=\").concat(page),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 7:res=_context7.sent;if(res.ok){_context7.next=13;break;}_context7.next=11;return res.json();case 11:_resJson3=_context7.sent;throw new Error(_resJson3.error.message);case 13:_context7.next=15;return res.json();case 15:resJson=_context7.sent;// const result = applyFilter\n//   ? (result = resJson.data.bookings)\n//   : (result = resJson.data);\npastBookingsdata=resJson.data.map(function(booking,index){return _objectSpread(_objectSpread({},booking),{},{id:index+1,updatedAt:moment(booking.updatedAt).format(\"YYYY-MM-DD HH:mm\"),_id:booking.id,Bookingstartend:moment(booking.fromTime).format(\"MMM DD \")+\" - \"+moment(booking.toTime).format(\"MMM DD\")// timeLogs: booking.timeLogs.map((e,i) =>(e.fromTime? moment(e.fromTime).format(\"HH:mm\") :null)),\n});});return _context7.abrupt(\"return\",{data:pastBookingsdata,total:resJson.total,hasNextPage:resJson.hasNextPage,hasPreviousPage:resJson.hasPreviousPage});case 18:case\"end\":return _context7.stop();}}},_callee7);}));return function getPasttbookings(){return _ref7.apply(this,arguments);};}();","map":{"version":3,"sources":["D:/diom working project/staging/src/APIS/bookings.js"],"names":["DIOM_BASED_URLS","moment","getBooking","token","id","fetch","method","redirect","headers","Authorization","json","getGuest","getbookinguser","getbookinglocations","gettodaysbookings","size","page","applyFilter","filters","res","ok","resJson","Error","error","message","todayBookingsdata","data","map","booking","index","_id","updatedAt","format","Bookingstartend","fromTime","toTime","timeLogs","length","total","hasNextPage","hasPreviousPage","getschduleddbookings","schduledBookingsdata","e","getPasttbookings","pastBookingsdata"],"mappings":"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","sourcesContent":["import { DIOM_BASED_URLS } from \"../config/url\";\r\nimport moment from \"moment\";\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of BOOKING in DIOM\r\n */\r\nexport const getBooking = async (token = \"\", id) => {\r\n  return await (\r\n    await fetch(`${DIOM_BASED_URLS}/admin-diom-bookings/${id}`, {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n  ).json();\r\n};\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of guests in DIOM\r\n */\r\n\r\nexport const getGuest = async (token = \"\", id) => {\r\n  return await (\r\n    await fetch(`${DIOM_BASED_URLS}/admin-booking-guest/booking/${id}`, {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n  ).json();\r\n};\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of bookinguserdata in DIOM\r\n */\r\n\r\nexport const getbookinguser = async (token, id) => {\r\n  // if (id) {\r\n  return await (\r\n    await fetch(`${DIOM_BASED_URLS}/users/${id}`, {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n  ).json();\r\n  // }\r\n};\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of bookings locations in DIOM\r\n */\r\n\r\nexport const getbookinglocations = async (token = \"\") => {\r\n  return await (\r\n    await fetch(\r\n      `${DIOM_BASED_URLS}/admin-business-locations?filter={\"where\":{\"visibility\":true}}`,\r\n      {\r\n        method: \"GET\",\r\n        redirect: \"follow\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      }\r\n    )\r\n  ).json();\r\n};\r\n\r\n/**\r\n *\r\n * @param {*JWT} token\r\n * @returns get today bookings data for dropdown\r\n */\r\nexport const gettodaysbookings = async (\r\n  size = 30,\r\n  page = 1,\r\n  token = \"\",\r\n  applyFilter = false,\r\n  filters = {}\r\n) => {\r\n  // console.log(\"filters :\", filters);\r\n  // console.log(\"applyFilter : \", applyFilter);\r\n  const res = await fetch(\r\n    !applyFilter\r\n      ? `${DIOM_BASED_URLS}/admin-diom-bookings/today?size=${size}&page=${page}`\r\n      : `${DIOM_BASED_URLS}/admin-diom-bookings/today/${filters}?size=${size}&page=${page}`,\r\n    {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n\r\n  if (!res.ok) {\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n  const resJson = await res.json();\r\n  const todayBookingsdata = resJson.data.map((booking, index) => ({\r\n    ...booking,\r\n\r\n    id: index + 1,\r\n    _id: booking.id,\r\n    updatedAt: moment(booking.updatedAt).format(\"YYYY-MM-DD HH:mm\"),\r\n    Bookingstartend:\r\n      moment(booking.fromTime).format(\"MMM DD \") +\r\n      \" - \" +\r\n      moment(booking.toTime).format(\"MMM DD\"),\r\n\r\n    timeLogs:\r\n      booking.timeLogs.length > 0\r\n        ? moment(booking.timeLogs[booking.timeLogs.length - 1].fromTime).format(\r\n            \"HH:mm\"\r\n          )\r\n        : null,\r\n\r\n    // booking.timeLogs.map((e) => moment(e.fromTime).format(\"HH:mm\"))\r\n    // .join(\", \"),\r\n  }));\r\n  return {\r\n    data: todayBookingsdata,\r\n    total: resJson.total,\r\n    hasNextPage: resJson.hasNextPage,\r\n    hasPreviousPage: resJson.hasPreviousPage,\r\n  };\r\n};\r\n\r\n/**\r\n *\r\n * @param {*JWT} token\r\n * @returns get Fetched bookings data for dropdown\r\n */\r\nexport const getschduleddbookings = async (\r\n  size = 30,\r\n  page = 1,\r\n  token = \"\",\r\n  applyFilter = false,\r\n  filters = {}\r\n) => {\r\n  const res = await fetch(\r\n    !applyFilter\r\n      ? `${DIOM_BASED_URLS}/admin-diom-bookings/scheduled?size=${size}&page=${page}`\r\n      : `${DIOM_BASED_URLS}/admin-diom-bookings/scheduled/${filters}?size=${size}&page=${page}`,\r\n    {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n\r\n  if (!res.ok) {\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n\r\n  const resJson = await res.json();\r\n\r\n  // const result = applyFilter\r\n  //   ? (result = resJson.data.bookings)\r\n  //   : (result = resJson.data);\r\n\r\n  const schduledBookingsdata = resJson.data.map((booking, index) => ({\r\n    ...booking,\r\n    id: index + 1,\r\n    updatedAt: moment(booking.updatedAt).format(\"YYYY-MM-DD HH:mm\"),\r\n    _id: booking.id,\r\n\r\n    Bookingstartend:\r\n      moment(booking.fromTime).format(\"MMM DD \") +\r\n      \" - \" +\r\n      moment(booking.toTime).format(\"MMM DD\"),\r\n    timeLogs: booking.timeLogs.map((e) => moment(e.fromTime).format(\"HH:mm\")),\r\n  }));\r\n  return {\r\n    data: schduledBookingsdata,\r\n    total: resJson.total,\r\n    hasNextPage: resJson.hasNextPage,\r\n    hasPreviousPage: resJson.hasPreviousPage,\r\n  };\r\n};\r\n\r\n/**\r\n *\r\n * @param {*JWT} token\r\n * @returns get Fetched Past bookings data for dropdown\r\n */\r\nexport const getPasttbookings = async (\r\n  size = 30,\r\n  page = 1,\r\n  token = \"\",\r\n  applyFilter = false,\r\n  filters = {}\r\n) => {\r\n  const res = await fetch(\r\n    !applyFilter\r\n      ? `${DIOM_BASED_URLS}/admin-diom-bookings/past?size=${size}&page=${page}`\r\n      : `${DIOM_BASED_URLS}/admin-diom-bookings/past/${filters}?size=${size}&page=${page}`,\r\n    {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n\r\n  if (!res.ok) {\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n\r\n  const resJson = await res.json();\r\n\r\n  // const result = applyFilter\r\n  //   ? (result = resJson.data.bookings)\r\n  //   : (result = resJson.data);\r\n\r\n  const pastBookingsdata = resJson.data.map((booking, index) => ({\r\n    ...booking,\r\n    id: index + 1,\r\n    updatedAt: moment(booking.updatedAt).format(\"YYYY-MM-DD HH:mm\"),\r\n    _id: booking.id,\r\n    Bookingstartend:\r\n      moment(booking.fromTime).format(\"MMM DD \") +\r\n      \" - \" +\r\n      moment(booking.toTime).format(\"MMM DD\"),\r\n    // timeLogs: booking.timeLogs.map((e,i) =>(e.fromTime? moment(e.fromTime).format(\"HH:mm\") :null)),\r\n  }));\r\n  return {\r\n    data: pastBookingsdata,\r\n    total: resJson.total,\r\n    hasNextPage: resJson.hasNextPage,\r\n    hasPreviousPage: resJson.hasPreviousPage,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}