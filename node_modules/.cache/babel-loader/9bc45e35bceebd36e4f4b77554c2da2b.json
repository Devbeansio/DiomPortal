{"ast":null,"code":"import _slicedToArray from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useQueryClient}from\"react-query\";import{useAllDataQuery,usePaginatedQuery}from\"../../../hooks/query\";import{getResourceTypes,getSearchedResourceTypes}from\"../../../APIS/resourceType\";import{getLocations}from\"../../../APIS\";export var useResourceType=function useResourceType(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var token=localStorage.getItem(\"Token\");var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(50),_useState6=_slicedToArray(_useState5,2),pageSize=_useState6[0],setPageSize=_useState6[1];var changeCurrentPage=function changeCurrentPage(pageNum){return setCurrentPage(pageNum);};var queryClient=useQueryClient();var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),applyLocationFilter=_useState8[0],setApplyFilter=_useState8[1];var _useState9=useState(\"All\"),_useState10=_slicedToArray(_useState9,2),filter=_useState10[0],setFilter=_useState10[1];var _usePaginatedQuery=usePaginatedQuery([\"resourceTypes\",pageSize,currentPage,filter],function(){return getResourceTypes(pageSize,currentPage,token,applyLocationFilter,filter);}),_usePaginatedQuery$da=_usePaginatedQuery.data,resourceTypeData=_usePaginatedQuery$da.data,hasNextPage=_usePaginatedQuery$da.hasNextPage,hasPreviousPage=_usePaginatedQuery$da.hasPreviousPage,total=_usePaginatedQuery$da.total,isLoading=_usePaginatedQuery.isLoading;var _usePaginatedQuery2=usePaginatedQuery([\"searchedresourceTypes\",\"\".concat(pageSize),\"\".concat(currentPage)],function(){return getSearchedResourceTypes(token);}),searchedresourceTypeData=_usePaginatedQuery2.data.data;var _useAllDataQuery=useAllDataQuery([\"locations\",\"visible\"],function(){return getLocations(token);}),locationsData=_useAllDataQuery.data,loadingLocations=_useAllDataQuery.isLoading;var toggle=function toggle(){setIsOpen(!isOpen);};var pagelengthnum=function pagelengthnum(e){if(e.target.value===\"1\"){setPageSize(10);}else if(e.target.value===\"2\"){setPageSize(30);}else if(e.target.value===\"3\"){setPageSize(50);}};var pageOptions={sizePerPage:pageSize,totalSize:total!==null&&total!==void 0?total:0,custom:true};var onchangeandeldiomlocation=function onchangeandeldiomlocation(val){if(val===\"All\"){setCurrentPage(1);setApplyFilter(false);setFilter(\"All\");}else{setCurrentPage(1);setApplyFilter(true);setFilter(\"{\\\"BusinessId\\\":\".concat(val,\"}\"));}};useEffect(function(){// FOR PRE-FETCHING NEXT PAGE\nif(hasNextPage){var nextPage=currentPage+1;queryClient.prefetchQuery([\"resourceTypes\",\"\".concat(pageSize),\"\".concat(currentPage)],function(){return getResourceTypes(pageSize,nextPage,token);});}},[currentPage,queryClient,filter,pageSize]);return{currentPage:currentPage,pageOptions:pageOptions,resourceTypeData:resourceTypeData,hasNextPage:hasNextPage,hasPreviousPage:hasPreviousPage,total:total,locationsData:locationsData,loadingLocations:loadingLocations,isLoading:isLoading,onchangeandeldiomlocation:onchangeandeldiomlocation,changeCurrentPage:changeCurrentPage,pagelengthnum:pagelengthnum,pageSize:pageSize,toggle:toggle,isOpen:isOpen,searchedresourceTypeData:searchedresourceTypeData,filter:filter};};","map":{"version":3,"sources":["D:/diom working project/staging/src/pages/Inventories/ResourceType/useResourceType.js"],"names":["useEffect","useState","useQueryClient","useAllDataQuery","usePaginatedQuery","getResourceTypes","getSearchedResourceTypes","getLocations","useResourceType","isOpen","setIsOpen","token","localStorage","getItem","currentPage","setCurrentPage","pageSize","setPageSize","changeCurrentPage","pageNum","queryClient","applyLocationFilter","setApplyFilter","filter","setFilter","data","resourceTypeData","hasNextPage","hasPreviousPage","total","isLoading","searchedresourceTypeData","locationsData","loadingLocations","toggle","pagelengthnum","e","target","value","pageOptions","sizePerPage","totalSize","custom","onchangeandeldiomlocation","val","nextPage","prefetchQuery"],"mappings":"qHAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,cAAT,KAA+B,aAA/B,CACA,OAASC,eAAT,CAA0BC,iBAA1B,KAAmD,sBAAnD,CACA,OACEC,gBADF,CAEEC,wBAFF,KAGO,4BAHP,CAIA,OAASC,YAAT,KAA6B,eAA7B,CAEA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CACnC,cAA4BP,QAAQ,CAAC,KAAD,CAApC,wCAAOQ,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,eAAsCZ,QAAQ,CAAC,CAAD,CAA9C,yCAAOa,WAAP,eAAoBC,cAApB,eACA,eAAgCd,QAAQ,CAAC,EAAD,CAAxC,yCAAOe,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,OAAD,QAAaJ,CAAAA,cAAc,CAACI,OAAD,CAA3B,EAA1B,CACA,GAAMC,CAAAA,WAAW,CAAGlB,cAAc,EAAlC,CACA,eAA8CD,QAAQ,CAAC,KAAD,CAAtD,yCAAOoB,mBAAP,eAA4BC,cAA5B,eACA,eAA4BrB,QAAQ,CAAC,KAAD,CAApC,0CAAOsB,MAAP,gBAAeC,SAAf,gBAEA,uBAGIpB,iBAAiB,CAAC,CAAC,eAAD,CAAkBY,QAAlB,CAA4BF,WAA5B,CAAyCS,MAAzC,CAAD,CAAmD,iBACtElB,CAAAA,gBAAgB,CAACW,QAAD,CAAWF,WAAX,CAAwBH,KAAxB,CAA+BU,mBAA/B,CAAoDE,MAApD,CADsD,EAAnD,CAHrB,0CACEE,IADF,CACgBC,gBADhB,uBACUD,IADV,CACkCE,WADlC,uBACkCA,WADlC,CAC+CC,eAD/C,uBAC+CA,eAD/C,CACgEC,KADhE,uBACgEA,KADhE,CAEEC,SAFF,oBAEEA,SAFF,CAQA,wBAEI1B,iBAAiB,CAAC,CAAC,uBAAD,WAA4BY,QAA5B,YAA0CF,WAA1C,EAAD,CAA2D,iBAC9ER,CAAAA,wBAAwB,CAACK,KAAD,CADsD,EAA3D,CAFrB,CACgBoB,wBADhB,qBACEN,IADF,CACUA,IADV,CAMA,qBAA6DtB,eAAe,CAC1E,CAAC,WAAD,CAAc,SAAd,CAD0E,CAE1E,iBAAMI,CAAAA,YAAY,CAACI,KAAD,CAAlB,EAF0E,CAA5E,CAAcqB,aAAd,kBAAQP,IAAR,CAAwCQ,gBAAxC,kBAA6BH,SAA7B,CAKA,GAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBxB,SAAS,CAAC,CAACD,MAAF,CAAT,CACD,CAFD,CAGA,GAAM0B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3B,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,GAAmB,GAAvB,CAA4B,CAC1BrB,WAAW,CAAC,EAAD,CAAX,CACD,CAFD,IAEO,IAAImB,CAAC,CAACC,MAAF,CAASC,KAAT,GAAmB,GAAvB,CAA4B,CACjCrB,WAAW,CAAC,EAAD,CAAX,CACD,CAFM,IAEA,IAAImB,CAAC,CAACC,MAAF,CAASC,KAAT,GAAmB,GAAvB,CAA4B,CACjCrB,WAAW,CAAC,EAAD,CAAX,CACD,CACF,CARD,CAUA,GAAMsB,CAAAA,WAAW,CAAG,CAClBC,WAAW,CAAExB,QADK,CAElByB,SAAS,CAAEZ,KAAF,SAAEA,KAAF,UAAEA,KAAF,CAAW,CAFF,CAGlBa,MAAM,CAAE,IAHU,CAApB,CAMA,GAAMC,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,CAACC,GAAD,CAAS,CACzC,GAAIA,GAAG,GAAK,KAAZ,CAAmB,CACjB7B,cAAc,CAAC,CAAD,CAAd,CACAO,cAAc,CAAC,KAAD,CAAd,CACAE,SAAS,CAAC,KAAD,CAAT,CACD,CAJD,IAIO,CACLT,cAAc,CAAC,CAAD,CAAd,CACAO,cAAc,CAAC,IAAD,CAAd,CACAE,SAAS,2BAAkBoB,GAAlB,MAAT,CACD,CACF,CAVD,CAYA5C,SAAS,CAAC,UAAM,CACd;AAEA,GAAI2B,WAAJ,CAAiB,CACf,GAAMkB,CAAAA,QAAQ,CAAG/B,WAAW,CAAG,CAA/B,CAEAM,WAAW,CAAC0B,aAAZ,CACE,CAAC,eAAD,WAAoB9B,QAApB,YAAkCF,WAAlC,EADF,CAEE,iBAAMT,CAAAA,gBAAgB,CAACW,QAAD,CAAW6B,QAAX,CAAqBlC,KAArB,CAAtB,EAFF,EAID,CACF,CAXQ,CAWN,CAACG,WAAD,CAAcM,WAAd,CAA2BG,MAA3B,CAAmCP,QAAnC,CAXM,CAAT,CAaA,MAAO,CACLF,WAAW,CAAXA,WADK,CAELyB,WAAW,CAAXA,WAFK,CAGLb,gBAAgB,CAAhBA,gBAHK,CAILC,WAAW,CAAXA,WAJK,CAKLC,eAAe,CAAfA,eALK,CAMLC,KAAK,CAALA,KANK,CAOLG,aAAa,CAAbA,aAPK,CAQLC,gBAAgB,CAAhBA,gBARK,CASLH,SAAS,CAATA,SATK,CAULa,yBAAyB,CAAzBA,yBAVK,CAWLzB,iBAAiB,CAAjBA,iBAXK,CAYLiB,aAAa,CAAbA,aAZK,CAaLnB,QAAQ,CAARA,QAbK,CAcLkB,MAAM,CAANA,MAdK,CAeLzB,MAAM,CAANA,MAfK,CAgBLsB,wBAAwB,CAAxBA,wBAhBK,CAiBLR,MAAM,CAANA,MAjBK,CAAP,CAmBD,CA5FM","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { useAllDataQuery, usePaginatedQuery } from \"../../../hooks/query\";\r\nimport {\r\n  getResourceTypes,\r\n  getSearchedResourceTypes,\r\n} from \"../../../APIS/resourceType\";\r\nimport { getLocations } from \"../../../APIS\";\r\n\r\nexport const useResourceType = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const queryClient = useQueryClient();\r\n  const [applyLocationFilter, setApplyFilter] = useState(false);\r\n  const [filter, setFilter] = useState(\"All\");\r\n\r\n  const {\r\n    data: { data: resourceTypeData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"resourceTypes\", pageSize, currentPage, filter], () =>\r\n    getResourceTypes(pageSize, currentPage, token, applyLocationFilter, filter)\r\n  );\r\n  \r\n\r\n  const {\r\n    data: { data: searchedresourceTypeData },\r\n  } = usePaginatedQuery([\"searchedresourceTypes\",`${pageSize}`,`${currentPage}`], () =>\r\n    getSearchedResourceTypes(token)\r\n  );\r\n\r\n  const { data: locationsData, isLoading: loadingLocations } = useAllDataQuery(\r\n    [\"locations\", \"visible\"],\r\n    () => getLocations(token)\r\n  );\r\n\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n  const pagelengthnum = (e) => {\r\n    if (e.target.value === \"1\") {\r\n      setPageSize(10);\r\n    } else if (e.target.value === \"2\") {\r\n      setPageSize(30);\r\n    } else if (e.target.value === \"3\") {\r\n      setPageSize(50);\r\n    }\r\n  };\r\n\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n\r\n  const onchangeandeldiomlocation = (val) => {\r\n    if (val === \"All\") {\r\n      setCurrentPage(1);\r\n      setApplyFilter(false);\r\n      setFilter(\"All\");\r\n    } else {\r\n      setCurrentPage(1);\r\n      setApplyFilter(true);\r\n      setFilter(`{\"BusinessId\":${val}}`);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // FOR PRE-FETCHING NEXT PAGE\r\n\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n\r\n      queryClient.prefetchQuery(\r\n        [\"resourceTypes\",`${pageSize}`,`${currentPage}`],\r\n        () => getResourceTypes(pageSize, nextPage, token)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient, filter, pageSize]);\r\n\r\n  return {\r\n    currentPage,\r\n    pageOptions,\r\n    resourceTypeData,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    locationsData,\r\n    loadingLocations,\r\n    isLoading,\r\n    onchangeandeldiomlocation,\r\n    changeCurrentPage,\r\n    pagelengthnum,\r\n    pageSize,\r\n    toggle,\r\n    isOpen,\r\n    searchedresourceTypeData,\r\n    filter,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}