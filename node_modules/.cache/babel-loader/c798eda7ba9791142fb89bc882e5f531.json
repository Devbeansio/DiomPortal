{"ast":null,"code":"import _slicedToArray from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";// import { useAllDataQuery, usePaginatedQuery } from \"../../../hooks/query\";\nimport{usePaginatedQuery}from\"../../../hooks/query\";import{getTaxation}from\"../../../APIS/taxation\";import{useQueryClient}from\"react-query\";import LoaderHook from\"./../../../hooks/loaderHook\";import{useHistory}from\"react-router-dom\";export var useTaxation=function useTaxation(){var history=useHistory();var _LoaderHook=LoaderHook(),setLoading=_LoaderHook.setLoading;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(50),_useState6=_slicedToArray(_useState5,2),pageSize=_useState6[0],setPageSize=_useState6[1];var changeCurrentPage=function changeCurrentPage(pageNum){return setCurrentPage(pageNum);};var token=localStorage.getItem(\"Token\");var queryClient=useQueryClient();var _usePaginatedQuery=usePaginatedQuery([\"taxation\",\"\".concat(pageSize),\"\".concat(currentPage)],function(){return getTaxation(pageSize,currentPage,token,history);}),_usePaginatedQuery$da=_usePaginatedQuery.data,taxationData=_usePaginatedQuery$da.data,hasNextPage=_usePaginatedQuery$da.hasNextPage,hasPreviousPage=_usePaginatedQuery$da.hasPreviousPage,total=_usePaginatedQuery$da.total,isLoading=_usePaginatedQuery.isLoading;var toggle=function toggle(){setIsOpen(!isOpen);};var pagelengthnum=function pagelengthnum(e){if(e.target.value===\"1\"){setPageSize(10);}else if(e.target.value===\"2\"){setPageSize(30);}else if(e.target.value===\"3\"){setPageSize(50);}};var pageOptions={sizePerPage:pageSize,totalSize:total!==null&&total!==void 0?total:0,custom:true};var loadingFunc=function loadingFunc(){setLoading(isLoading);};useEffect(function(){isLoading&&loadingFunc();},[isLoading]);useEffect(function(){// FOR PRE-FETCHING NEXT PAGE\nif(hasNextPage){var nextPage=currentPage+1;queryClient.prefetchQuery([\"taxation\",\"\".concat(pageSize),\"\".concat(currentPage)],function(){return getTaxation(pageSize,nextPage,token,history);});}},[currentPage,queryClient]);return{currentPage:currentPage,taxationData:taxationData,pageOptions:pageOptions,isLoading:isLoading,hasNextPage:hasNextPage,hasPreviousPage:hasPreviousPage,total:total,pagelengthnum:pagelengthnum,pageSize:pageSize,toggle:toggle,isOpen:isOpen,changeCurrentPage:changeCurrentPage};};","map":{"version":3,"names":["useEffect","useState","usePaginatedQuery","getTaxation","useQueryClient","LoaderHook","useHistory","useTaxation","history","setLoading","isOpen","setIsOpen","currentPage","setCurrentPage","pageSize","setPageSize","changeCurrentPage","pageNum","token","localStorage","getItem","queryClient","data","taxationData","hasNextPage","hasPreviousPage","total","isLoading","toggle","pagelengthnum","e","target","value","pageOptions","sizePerPage","totalSize","custom","loadingFunc","nextPage","prefetchQuery"],"sources":["C:/Users/tech sign/Desktop/xyz/src/pages/Finance/Taxation/useTaxation.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n// import { useAllDataQuery, usePaginatedQuery } from \"../../../hooks/query\";\r\nimport { usePaginatedQuery } from \"../../../hooks/query\";\r\nimport { getTaxation } from \"../../../APIS/taxation\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport LoaderHook from \"./../../../hooks/loaderHook\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const useTaxation = () => {\r\n  let history = useHistory();\r\n  const { setLoading } = LoaderHook();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const queryClient = useQueryClient();\r\n\r\n  const {\r\n    data: { data: taxationData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"taxation\", `${pageSize}`,`${currentPage}`], () =>\r\n    getTaxation(pageSize, currentPage, token,history)\r\n  );\r\n\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n  const pagelengthnum = (e) => {\r\n    if (e.target.value === \"1\") {\r\n      setPageSize(10);\r\n    } else if (e.target.value === \"2\") {\r\n      setPageSize(30);\r\n    } else if (e.target.value === \"3\") {\r\n      setPageSize(50);\r\n    }\r\n  };\r\n\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n  const loadingFunc = () => {\r\n    setLoading(isLoading);\r\n  };\r\n  useEffect(() => {\r\n    isLoading && loadingFunc();\r\n  }, [isLoading]);\r\n\r\n  useEffect(() => {\r\n    // FOR PRE-FETCHING NEXT PAGE\r\n\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"taxation\", `${pageSize}`,`${currentPage}`], () =>\r\n        getTaxation(pageSize, nextPage, token,history)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient]);\r\n\r\n  return {\r\n    currentPage,\r\n    taxationData,\r\n    pageOptions,\r\n    isLoading,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    \r\n    pagelengthnum,\r\n    pageSize,\r\n    toggle,\r\n    isOpen,\r\n    changeCurrentPage,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}