{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\"; // import { useAllDataQuery, usePaginatedQuery } from \"../../../hooks/query\";\n\nimport { usePaginatedQuery } from \"../../../hooks/query\";\nimport { getTaxation } from \"../../../APIS/taxation\";\nimport { useQueryClient } from \"react-query\";\nimport LoaderHook from \"./../../../hooks/loaderHook\";\nimport { useHistory } from \"react-router-dom\";\nexport const useTaxation = () => {\n  _s();\n\n  let history = useHistory();\n  const {\n    setLoading\n  } = LoaderHook();\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(50);\n\n  const changeCurrentPage = pageNum => setCurrentPage(pageNum);\n\n  const token = localStorage.getItem(\"Token\");\n  const queryClient = useQueryClient();\n  const {\n    data: {\n      data: taxationData,\n      hasNextPage,\n      hasPreviousPage,\n      total\n    },\n    isLoading\n  } = usePaginatedQuery([\"taxation\", `${pageSize}`, `${currentPage}`], () => getTaxation(pageSize, currentPage, token, history));\n\n  const toggle = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const pagelengthnum = e => {\n    if (e.target.value === \"1\") {\n      setPageSize(10);\n    } else if (e.target.value === \"2\") {\n      setPageSize(30);\n    } else if (e.target.value === \"3\") {\n      setPageSize(50);\n    }\n  };\n\n  const pageOptions = {\n    sizePerPage: pageSize,\n    totalSize: total !== null && total !== void 0 ? total : 0,\n    custom: true\n  };\n\n  const loadingFunc = () => {\n    setLoading(isLoading);\n  };\n\n  useEffect(() => {\n    isLoading && loadingFunc();\n  }, [isLoading]);\n  useEffect(() => {\n    // FOR PRE-FETCHING NEXT PAGE\n    if (hasNextPage) {\n      const nextPage = currentPage + 1;\n      queryClient.prefetchQuery([\"taxation\", `${pageSize}`, `${currentPage}`], () => getTaxation(pageSize, nextPage, token, history));\n    }\n  }, [currentPage, queryClient]);\n  return {\n    currentPage,\n    taxationData,\n    pageOptions,\n    isLoading,\n    hasNextPage,\n    hasPreviousPage,\n    total,\n    pagelengthnum,\n    pageSize,\n    toggle,\n    isOpen,\n    changeCurrentPage\n  };\n};\n\n_s(useTaxation, \"GGb3KkrzvFbo+CzQehH+cG7uRnw=\", false, function () {\n  return [useHistory, useQueryClient, usePaginatedQuery];\n});","map":{"version":3,"names":["useEffect","useState","usePaginatedQuery","getTaxation","useQueryClient","LoaderHook","useHistory","useTaxation","history","setLoading","isOpen","setIsOpen","currentPage","setCurrentPage","pageSize","setPageSize","changeCurrentPage","pageNum","token","localStorage","getItem","queryClient","data","taxationData","hasNextPage","hasPreviousPage","total","isLoading","toggle","pagelengthnum","e","target","value","pageOptions","sizePerPage","totalSize","custom","loadingFunc","nextPage","prefetchQuery"],"sources":["C:/Users/tech sign/Desktop/xyz/src/pages/Finance/Taxation/useTaxation.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n// import { useAllDataQuery, usePaginatedQuery } from \"../../../hooks/query\";\r\nimport { usePaginatedQuery } from \"../../../hooks/query\";\r\nimport { getTaxation } from \"../../../APIS/taxation\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport LoaderHook from \"./../../../hooks/loaderHook\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const useTaxation = () => {\r\n  let history = useHistory();\r\n  const { setLoading } = LoaderHook();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const queryClient = useQueryClient();\r\n\r\n  const {\r\n    data: { data: taxationData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"taxation\", `${pageSize}`,`${currentPage}`], () =>\r\n    getTaxation(pageSize, currentPage, token,history)\r\n  );\r\n\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n  const pagelengthnum = (e) => {\r\n    if (e.target.value === \"1\") {\r\n      setPageSize(10);\r\n    } else if (e.target.value === \"2\") {\r\n      setPageSize(30);\r\n    } else if (e.target.value === \"3\") {\r\n      setPageSize(50);\r\n    }\r\n  };\r\n\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n  const loadingFunc = () => {\r\n    setLoading(isLoading);\r\n  };\r\n  useEffect(() => {\r\n    isLoading && loadingFunc();\r\n  }, [isLoading]);\r\n\r\n  useEffect(() => {\r\n    // FOR PRE-FETCHING NEXT PAGE\r\n\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"taxation\", `${pageSize}`,`${currentPage}`], () =>\r\n        getTaxation(pageSize, nextPage, token,history)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient]);\r\n\r\n  return {\r\n    currentPage,\r\n    taxationData,\r\n    pageOptions,\r\n    isLoading,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    \r\n    pagelengthnum,\r\n    pageSize,\r\n    toggle,\r\n    isOpen,\r\n    changeCurrentPage,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}