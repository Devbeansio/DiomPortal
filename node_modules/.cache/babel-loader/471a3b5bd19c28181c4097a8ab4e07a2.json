{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useQueryClient } from \"react-query\";\nimport { getcustomers } from \"../../../APIS/customerCheckedIn\";\nimport { usePaginatedQuery } from \"../../../hooks/query\";\nimport { getcheckInLocations, getLocations } from \"../../../APIS\";\nimport { useAllDataQuery } from \"../../../hooks/query\";\nexport const useCheckedInCustomer = () => {\n  _s();\n\n  const [filter, setFilter] = useState(\"\");\n  const [isOpen, setIsOpen] = useState(false);\n  const token = localStorage.getItem(\"Token\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(50);\n  const [applyLocationFilter, setApplyLocationFilter] = useState(false);\n\n  const changeCurrentPage = pageNum => setCurrentPage(pageNum);\n\n  const queryClient = useQueryClient();\n  const {\n    data: {\n      data: customerCheckInData,\n      hasNextPage,\n      hasPreviousPage,\n      total\n    },\n    isLoading\n  } = usePaginatedQuery([\"checkedcustomers\", currentPage, filter], () => getcustomers(filter, pageSize, currentPage, token, applyLocationFilter));\n  const {\n    data: locationsData,\n    isLoading: loadingLocations\n  } = useAllDataQuery([\"locations\", \"visible\"], () => getcheckInLocations(token));\n\n  const toggle = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const pagelengthnum = e => {\n    if (e.target.value === \"1\") {\n      setPageSize(10);\n    } else if (e.target.value === \"2\") {\n      setPageSize(30);\n    } else if (e.target.value === \"3\") {\n      setPageSize(50);\n    }\n  };\n\n  const pageOptions = {\n    sizePerPage: pageSize,\n    totalSize: total !== null && total !== void 0 ? total : 0,\n    custom: true\n  };\n\n  const handeldiomlocation = async val => {\n    if (val === \"All\") {\n      setCurrentPage(1);\n      setApplyLocationFilter(false);\n      setFilter();\n      queryClient.invalidateQueries(\"checkedcustomers\");\n    } else {\n      setCurrentPage(1);\n      setFilter(val);\n      setApplyLocationFilter(true);\n      queryClient.invalidateQueries(\"checkedcustomers\");\n    }\n  };\n\n  useEffect(() => {\n    if (hasNextPage) {\n      const nextPage = currentPage + 1;\n      queryClient.prefetchQuery([\"checkedcustomer\", nextPage], () => getcustomers(filter, pageSize, nextPage, token, applyLocationFilter));\n    }\n  }, [currentPage, queryClient]);\n  return {\n    currentPage,\n    pageOptions,\n    customerCheckInData,\n    hasNextPage,\n    hasPreviousPage,\n    total,\n    pagelengthnum,\n    pageSize,\n    toggle,\n    isOpen,\n    isLoading,\n    handeldiomlocation,\n    // diomLocation,\n    locationsData,\n    changeCurrentPage\n  };\n};\n\n_s(useCheckedInCustomer, \"PJFwthlB5W2OuW41we7c4hcR3Dc=\", false, function () {\n  return [useQueryClient, usePaginatedQuery, useAllDataQuery];\n});","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom (1)/diom/src/pages/MyDashboard/CheckedinCustomer/useCheckedInCustomer.js"],"names":["useEffect","useState","useQueryClient","getcustomers","usePaginatedQuery","getcheckInLocations","getLocations","useAllDataQuery","useCheckedInCustomer","filter","setFilter","isOpen","setIsOpen","token","localStorage","getItem","currentPage","setCurrentPage","pageSize","setPageSize","applyLocationFilter","setApplyLocationFilter","changeCurrentPage","pageNum","queryClient","data","customerCheckInData","hasNextPage","hasPreviousPage","total","isLoading","locationsData","loadingLocations","toggle","pagelengthnum","e","target","value","pageOptions","sizePerPage","totalSize","custom","handeldiomlocation","val","invalidateQueries","nextPage","prefetchQuery"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { getcustomers } from \"../../../APIS/customerCheckedIn\";\r\nimport { usePaginatedQuery } from \"../../../hooks/query\";\r\nimport { getcheckInLocations, getLocations } from \"../../../APIS\";\r\nimport { useAllDataQuery } from \"../../../hooks/query\";\r\n\r\nexport const useCheckedInCustomer = () => {\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const [applyLocationFilter, setApplyLocationFilter] = useState(false);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const queryClient = useQueryClient();\r\n  const {\r\n    data: { data: customerCheckInData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"checkedcustomers\", currentPage, filter], () =>\r\n    getcustomers(filter, pageSize, currentPage, token, applyLocationFilter)\r\n  );\r\n  const { data: locationsData, isLoading: loadingLocations } = useAllDataQuery(\r\n    [\"locations\", \"visible\"],\r\n    () => getcheckInLocations(token)\r\n  );\r\n\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n  const pagelengthnum = (e) => {\r\n    if (e.target.value === \"1\") {\r\n      setPageSize(10);\r\n    } else if (e.target.value === \"2\") {\r\n      setPageSize(30);\r\n    } else if (e.target.value === \"3\") {\r\n      setPageSize(50);\r\n    }\r\n  };\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n\r\n  const handeldiomlocation = async (val) => {\r\n    if (val === \"All\") {\r\n      setCurrentPage(1);\r\n      setApplyLocationFilter(false);\r\n      setFilter();\r\n      queryClient.invalidateQueries(\"checkedcustomers\");\r\n    } else {\r\n      setCurrentPage(1);\r\n      setFilter(val);\r\n      setApplyLocationFilter(true);\r\n      queryClient.invalidateQueries(\"checkedcustomers\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"checkedcustomer\", nextPage], () =>\r\n        getcustomers(filter, pageSize, nextPage, token, applyLocationFilter)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient]);\r\n  return {\r\n    currentPage,\r\n    pageOptions,\r\n    customerCheckInData,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    pagelengthnum,\r\n    pageSize,\r\n    toggle,\r\n    isOpen,\r\n    isLoading,\r\n    handeldiomlocation,\r\n    // diomLocation,\r\n    locationsData,\r\n    changeCurrentPage,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}