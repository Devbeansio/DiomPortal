{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useHistory}from\"react-router-dom\";import{DIOM_BASED_URLS}from\"../config/url\";/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */export var getResources=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(size,page){var _resJson$hasNextPage,_resJson$hasPreviousP;var token,applyFilter,filters,history,res,_resJson,resJson,resourcesData,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=_args.length>2&&_args[2]!==undefined?_args[2]:\"\";applyFilter=_args.length>3&&_args[3]!==undefined?_args[3]:false;filters=_args.length>4&&_args[4]!==undefined?_args[4]:{};history=_args.length>5?_args[5]:undefined;_context.next=6;return fetch(!applyFilter?\"\".concat(DIOM_BASED_URLS,\"/admin-resources-inventories?size=\").concat(size,\"&page=\").concat(page):\"\".concat(DIOM_BASED_URLS,\"/admin-resources-inventories?size=\").concat(size,\"&page=\").concat(page,\"&filter={\\\"where\\\":\").concat(filters,\"}\"),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 6:res=_context.sent;if(res.ok){_context.next=15;break;}if(!(res.status===401)){_context.next=11;break;}history.push(\"/login\");throw new Error(_resJson.error.message);case 11:_context.next=13;return res.json();case 13:_resJson=_context.sent;throw new Error(_resJson.error.message);case 15:_context.next=17;return res.json();case 17:resJson=_context.sent;resourcesData=resJson.data.map(function(element,index){return{id:index+1,_id:element.id,Resource:element.Name,Location:element.BusinessName,ResourceType:element.ResourceTypeName};});return _context.abrupt(\"return\",{data:resourcesData.length>0?resourcesData:[],total:resJson?resJson.total:0,hasNextPage:(_resJson$hasNextPage=resJson.hasNextPage)!==null&&_resJson$hasNextPage!==void 0?_resJson$hasNextPage:false,hasPreviousPage:(_resJson$hasPreviousP=resJson.hasPreviousPage)!==null&&_resJson$hasPreviousP!==void 0?_resJson$hasPreviousP:false});case 20:case\"end\":return _context.stop();}}},_callee);}));return function getResources(_x,_x2){return _ref.apply(this,arguments);};}();/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */export var getSearchedResources=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(token,history){var res,_resJson2,resJson,resourcessearchedData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-resources-inventories\"),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 2:res=_context2.sent;if(res.ok){_context2.next=11;break;}if(!(res.status===401)){_context2.next=7;break;}history.push(\"/login\");throw new Error(_resJson2.error.message);case 7:_context2.next=9;return res.json();case 9:_resJson2=_context2.sent;throw new Error(_resJson2.error.message);case 11:_context2.next=13;return res.json();case 13:resJson=_context2.sent;resourcessearchedData=resJson.data.map(function(element,index){return{id:index+1,_id:element.id,Resource:element.Name,Location:element.BusinessName,ResourceType:element.ResourceTypeName};});return _context2.abrupt(\"return\",{data:resourcessearchedData,total:resJson.total,hasNextPage:resJson.hasNextPage,hasPreviousPage:resJson.hasPreviousPage});case 16:case\"end\":return _context2.stop();}}},_callee2);}));return function getSearchedResources(_x3,_x4){return _ref2.apply(this,arguments);};}();/**\r\n *\r\n * @param {ResourceId} id\r\n * @param {JWT} token\r\n * @returns  object of a single resource\r\n */export var getResource=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,token,history){var res,resJson,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-resources-inventories/\").concat(id),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 2:res=_context3.sent;if(res.ok){_context3.next=11;break;}if(!(res.status===401)){_context3.next=7;break;}history.push(\"/login\");throw new Error(resJson.error.message);case 7:_context3.next=9;return res.json();case 9:resJson=_context3.sent;throw new Error(resJson.error.message);case 11:_context3.next=13;return res.json();case 13:data=_context3.sent;return _context3.abrupt(\"return\",{data:data});case 15:case\"end\":return _context3.stop();}}},_callee3);}));return function getResource(_x5,_x6,_x7){return _ref3.apply(this,arguments);};}();","map":{"version":3,"names":["useHistory","DIOM_BASED_URLS","getResources","size","page","token","applyFilter","filters","history","fetch","method","redirect","headers","Authorization","res","ok","status","push","Error","resJson","error","message","json","resourcesData","data","map","element","index","id","_id","Resource","Name","Location","BusinessName","ResourceType","ResourceTypeName","length","total","hasNextPage","hasPreviousPage","getSearchedResources","resourcessearchedData","getResource"],"sources":["C:/Users/tech sign/Desktop/xyz/src/APIS/resources.js"],"sourcesContent":["import { useHistory } from \"react-router-dom\";\r\nimport { DIOM_BASED_URLS } from \"../config/url\";\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */\r\n\r\nexport const getResources = async (\r\n  size,\r\n  page,\r\n  token = \"\",\r\n  applyFilter = false,\r\n  filters = {},\r\n  history\r\n) => {\r\n\r\n  // console.log(\"page : \", page);\r\n  const res = await fetch(\r\n    !applyFilter\r\n      ? `${DIOM_BASED_URLS}/admin-resources-inventories?size=${size}&page=${page}`\r\n      : `${DIOM_BASED_URLS}/admin-resources-inventories?size=${size}&page=${page}&filter={\"where\":${filters}}`,\r\n    {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n\r\n  if (!res.ok) {\r\n    \r\n    if(res.status === 401){\r\n      history.push(\"/login\");\r\n      throw new Error(resJson.error.message);\r\n   \r\n  }\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n  const resJson = await res.json();\r\n  const resourcesData = resJson.data.map((element, index) => ({\r\n    id: index + 1,\r\n    _id: element.id,\r\n    Resource: element.Name,\r\n    Location: element.BusinessName,\r\n    ResourceType: element.ResourceTypeName,\r\n  }));\r\n  return {\r\n    data: resourcesData.length > 0 ? resourcesData : [],\r\n    total: resJson ? resJson.total : 0,\r\n    hasNextPage: resJson.hasNextPage ?? false,\r\n    hasPreviousPage: resJson.hasPreviousPage ?? false,\r\n  };\r\n};\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */\r\nexport const getSearchedResources = async (token,history) => {\r\n  const res = await fetch(`${DIOM_BASED_URLS}/admin-resources-inventories`, {\r\n    method: \"GET\",\r\n    redirect: \"follow\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  });\r\n\r\n  if (!res.ok) {\r\n    if(res.status === 401){\r\n      history.push(\"/login\");\r\n      throw new Error(resJson.error.message);\r\n   \r\n  }\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n  const resJson = await res.json();\r\n  const resourcessearchedData = resJson.data.map((element, index) => ({\r\n    id: index + 1,\r\n    _id: element.id,\r\n    Resource: element.Name,\r\n    Location: element.BusinessName,\r\n    ResourceType: element.ResourceTypeName,\r\n  }));\r\n  return {\r\n    data: resourcessearchedData,\r\n    total: resJson.total,\r\n    hasNextPage: resJson.hasNextPage,\r\n    hasPreviousPage: resJson.hasPreviousPage,\r\n  };\r\n};\r\n\r\n/**\r\n *\r\n * @param {ResourceId} id\r\n * @param {JWT} token\r\n * @returns  object of a single resource\r\n */\r\nexport const getResource = async (id, token,history) => {\r\n  // return await (\r\n    const res =\r\n    await fetch(`${DIOM_BASED_URLS}/admin-resources-inventories/${id}`, {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n\r\n    if (!res.ok) {\r\n      if(res.status === 401){\r\n        history.push(\"/login\");\r\n        throw new Error(resJson.error.message);\r\n     \r\n    }\r\n      const resJson = await res.json();\r\n      throw new Error(resJson.error.message);\r\n    }\r\n    const data = await res.json();\r\n    \r\n    return {\r\n      data\r\n    };\r\n  // ).json();\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}