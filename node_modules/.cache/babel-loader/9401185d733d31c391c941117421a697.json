{"ast":null,"code":"import _classCallCheck from\"C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";// import firebase from \"firebase\";\nimport{initializeApp}from\"firebase/app\";import{getAuth}from\"firebase/auth\";// Add the Firebase products that you want to use\nimport\"firebase/auth\";import\"firebase/firestore\";var auth=getAuth();var FirebaseAuthBackend=/*#__PURE__*/function(){function FirebaseAuthBackend(firebaseConfig){var _this=this;_classCallCheck(this,FirebaseAuthBackend);this.registerUser=function(email,password){return new Promise(function(resolve,reject){auth().createUserWithEmailAndPassword(email,password).then(function(user){resolve(auth().currentUser);},function(error){reject(_this._handleError(error));});});};this.loginUser=function(email,password){return new Promise(function(resolve,reject){auth().signInWithEmailAndPassword(email,password).then(function(user){resolve(auth().currentUser);},function(error){reject(_this._handleError(error));});});};this.forgetPassword=function(email){return new Promise(function(resolve,reject){auth().sendPasswordResetEmail(email,{url:window.location.protocol+\"//\"+window.location.host+\"/login\"}).then(function(){resolve(true);}).catch(function(error){reject(_this._handleError(error));});});};this.logout=function(){return new Promise(function(resolve,reject){auth().signOut().then(function(){resolve(true);}).catch(function(error){reject(_this._handleError(error));});});};this.setLoggeedInUser=function(user){localStorage.setItem(\"authUser\",JSON.stringify(user));};this.getAuthenticatedUser=function(){if(!localStorage.getItem(\"authUser\"))return null;return JSON.parse(localStorage.getItem(\"authUser\"));};if(firebaseConfig){// Initialize Firebase\ninitializeApp(firebaseConfig);auth().onAuthStateChanged(function(user){if(user){localStorage.setItem(\"authUser\",JSON.stringify(user));}else{localStorage.removeItem(\"authUser\");}});}}/**\r\n   * Registers the user with given details\r\n   */_createClass(FirebaseAuthBackend,[{key:\"_handleError\",value:/**\r\n   * Handle the error\r\n   * @param {*} error\r\n   */function _handleError(error){// var errorCode = error.code;\nvar errorMessage=error.message;return errorMessage;}}]);return FirebaseAuthBackend;}();var _fireBaseBackend=null;/**\r\n * Initilize the backend\r\n * @param {*} config\r\n */var initFirebaseBackend=function initFirebaseBackend(config){if(!_fireBaseBackend){_fireBaseBackend=new FirebaseAuthBackend(config);}return _fireBaseBackend;};/**\r\n * Returns the firebase backend\r\n */var getFirebaseBackend=function getFirebaseBackend(){return _fireBaseBackend;};export{initFirebaseBackend,getFirebaseBackend};","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/src/helpers/firebase_helper.js"],"names":["initializeApp","getAuth","auth","FirebaseAuthBackend","firebaseConfig","registerUser","email","password","Promise","resolve","reject","createUserWithEmailAndPassword","then","user","currentUser","error","_handleError","loginUser","signInWithEmailAndPassword","forgetPassword","sendPasswordResetEmail","url","window","location","protocol","host","catch","logout","signOut","setLoggeedInUser","localStorage","setItem","JSON","stringify","getAuthenticatedUser","getItem","parse","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["// import firebase from \"firebase\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\n\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nconst auth = getAuth();\r\nclass FirebaseAuthBackend {\r\n  constructor(firebaseConfig) {\r\n    if (firebaseConfig) {\r\n      // Initialize Firebase\r\n      initializeApp(firebaseConfig);\r\n      auth().onAuthStateChanged((user) => {\r\n        if (user) {\r\n          localStorage.setItem(\"authUser\", JSON.stringify(user));\r\n        } else {\r\n          localStorage.removeItem(\"authUser\");\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Registers the user with given details\r\n   */\r\n  registerUser = (email, password) => {\r\n    return new Promise((resolve, reject) => {\r\n      auth()\r\n        .createUserWithEmailAndPassword(email, password)\r\n        .then(\r\n          (user) => {\r\n            resolve(auth().currentUser);\r\n          },\r\n          (error) => {\r\n            reject(this._handleError(error));\r\n          }\r\n        );\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Login user with given details\r\n   */\r\n  loginUser = (email, password) => {\r\n    return new Promise((resolve, reject) => {\r\n      auth()\r\n        .signInWithEmailAndPassword(email, password)\r\n        .then(\r\n          (user) => {\r\n            resolve(auth().currentUser);\r\n          },\r\n          (error) => {\r\n            reject(this._handleError(error));\r\n          }\r\n        );\r\n    });\r\n  };\r\n\r\n  /**\r\n   * forget Password user with given details\r\n   */\r\n  forgetPassword = (email) => {\r\n    return new Promise((resolve, reject) => {\r\n      auth()\r\n        .sendPasswordResetEmail(email, {\r\n          url:\r\n            window.location.protocol + \"//\" + window.location.host + \"/login\",\r\n        })\r\n        .then(() => {\r\n          resolve(true);\r\n        })\r\n        .catch((error) => {\r\n          reject(this._handleError(error));\r\n        });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Logout the user\r\n   */\r\n  logout = () => {\r\n    return new Promise((resolve, reject) => {\r\n      auth()\r\n        .signOut()\r\n        .then(() => {\r\n          resolve(true);\r\n        })\r\n        .catch((error) => {\r\n          reject(this._handleError(error));\r\n        });\r\n    });\r\n  };\r\n\r\n  setLoggeedInUser = (user) => {\r\n    localStorage.setItem(\"authUser\", JSON.stringify(user));\r\n  };\r\n\r\n  /**\r\n   * Returns the authenticated user\r\n   */\r\n  getAuthenticatedUser = () => {\r\n    if (!localStorage.getItem(\"authUser\")) return null;\r\n    return JSON.parse(localStorage.getItem(\"authUser\"));\r\n  };\r\n\r\n  /**\r\n   * Handle the error\r\n   * @param {*} error\r\n   */\r\n  _handleError(error) {\r\n    // var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n    return errorMessage;\r\n  }\r\n}\r\n\r\nlet _fireBaseBackend = null;\r\n\r\n/**\r\n * Initilize the backend\r\n * @param {*} config\r\n */\r\nconst initFirebaseBackend = (config) => {\r\n  if (!_fireBaseBackend) {\r\n    _fireBaseBackend = new FirebaseAuthBackend(config);\r\n  }\r\n  return _fireBaseBackend;\r\n};\r\n\r\n/**\r\n * Returns the firebase backend\r\n */\r\nconst getFirebaseBackend = () => {\r\n  return _fireBaseBackend;\r\n};\r\n\r\nexport { initFirebaseBackend, getFirebaseBackend };\r\n"]},"metadata":{},"sourceType":"module"}