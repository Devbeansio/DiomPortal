{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { DIOM_BASED_URLS } from \"../../../.././config/url\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\nimport { getBooking } from \"../../../../APIS/bookings\";\nimport { getGuest } from \"../../../../APIS/bookings\";\nimport { getbookinguser } from \"../../../../APIS/bookings\";\nimport { toast } from \"react-toastify\";\nexport const useBookingDetails = () => {\n  _s();\n\n  var _bookingData$data, _bookingguestData$dat, _bookinguserData$data;\n\n  const [error, setError] = useState(null);\n  const [bookingDetails, setBookingDetails] = useState({});\n  const [checkInCheckout, setCheckInCheckout] = useState([]); // const [bookingUserName, setBookingUserName] = useState([]);\n  // const [userBookings, setUserBookings] = useState([]);\n\n  const [loaded, setLoaded] = useState(false);\n  const [abc, setAbc] = useState(true);\n  const [guestData, setGuestData] = useState([]);\n  const [revokeBookingStatus, setRevokeBookingStatus] = useState();\n  const history = useHistory();\n  const token = localStorage.getItem(\"Token\");\n  const {\n    id,\n    t_ID\n  } = useParams();\n  const componentRef = useRef(); // *************\n\n  const bookingData = useQuery([\"bookingsDetails\", id], () => getBooking(token, id));\n  const bookingsDailedData = bookingData === null || bookingData === void 0 ? void 0 : (_bookingData$data = bookingData.data) === null || _bookingData$data === void 0 ? void 0 : _bookingData$data.data; // *************\n\n  const bookingdetails = async () => {\n    setBookingDetails(bookingsDailedData); // bookingusername();\n\n    checkinCheckoutfunc(bookingsDailedData);\n  };\n\n  const bookingguestData = useQuery([\"guestDetails\", id], () => getGuest(token, id));\n  const bookingsguestData = bookingguestData === null || bookingguestData === void 0 ? void 0 : (_bookingguestData$dat = bookingguestData.data) === null || _bookingguestData$dat === void 0 ? void 0 : _bookingguestData$dat.data;\n\n  const guestinfofunc = async () => {\n    setGuestData(bookingsguestData);\n  }; // const condition = bookingsDailedData?.userId.length !==0? true : false\n\n\n  const bookinguserData = useQuery([\"userDetails\", id], () => getbookinguser(token, bookingsDailedData === null || bookingsDailedData === void 0 ? void 0 : bookingsDailedData.userId), {\n    enabled: bookingsDailedData ? true : false\n  });\n  const userbookingData = bookinguserData === null || bookinguserData === void 0 ? void 0 : (_bookinguserData$data = bookinguserData.data) === null || _bookinguserData$data === void 0 ? void 0 : _bookinguserData$data.data;\n  const isLoading = bookinguserData.isLoading; // ********\n  // const bookingusername = async () => {\n  // setBookingUserName(userbookingData?.username);\n  // setUserBookings(userbookingData ? userbookingData : null);\n  // };\n\n  const checkinCheckoutfunc = result => {\n    const newArr = [...result.timeLogs];\n    const sortedData = newArr.reverse();\n    setCheckInCheckout(sortedData);\n    return [sortedData];\n  }; //   const getrevokedbookings = async () => {\n  //     fetch(`${DIOM_BASED_URLS}/admin-diom-bookings/revoked/${id}`, {\n  //       method: \"GET\",\n  //       redirect: \"follow\",\n  //     })\n  //       .then((response) => response.json())\n  //       .then((result) => {\n  //         const mappeddata = result.data.map((e) => ({\n  //           bookingStatus: e.bookingStatus,\n  //         }));\n  //         setRevokeBookingStatus(mappeddata);\n  //       })\n  //       .catch((error) => console.log(\"error\", error));\n  //   };\n\n\n  useEffect(() => {\n    (async () => {\n      bookingsDailedData && (await bookingdetails());\n      bookingsguestData && (await guestinfofunc()); //   await getrevokedbookings();\n    })();\n  }, [bookingsDailedData, bookingsguestData]);\n  return {\n    error,\n    setError,\n    bookingDetails,\n    setBookingDetails,\n    checkInCheckout,\n    setCheckInCheckout,\n    // bookingUserName,\n    // setBookingUserName,\n    // userBookings,\n    // setUserBookings,\n    loaded,\n    setLoaded,\n    guestData,\n    setGuestData,\n    revokeBookingStatus,\n    setRevokeBookingStatus,\n    bookingdetails,\n    guestinfofunc,\n    // bookingusername,\n    abc,\n    isLoading,\n    setAbc,\n    checkinCheckoutfunc,\n    // getrevokedbookings,\n    userbookingData\n  };\n};\n\n_s(useBookingDetails, \"NS7G9CmVqb8ei8olZsJ2VX4e79Q=\", false, function () {\n  return [useHistory, useParams, useQuery, useQuery, useQuery];\n});","map":{"version":3,"names":["useState","useEffect","useRef","DIOM_BASED_URLS","useParams","useHistory","useQuery","getBooking","getGuest","getbookinguser","toast","useBookingDetails","error","setError","bookingDetails","setBookingDetails","checkInCheckout","setCheckInCheckout","loaded","setLoaded","abc","setAbc","guestData","setGuestData","revokeBookingStatus","setRevokeBookingStatus","history","token","localStorage","getItem","id","t_ID","componentRef","bookingData","bookingsDailedData","data","bookingdetails","checkinCheckoutfunc","bookingguestData","bookingsguestData","guestinfofunc","bookinguserData","userId","enabled","userbookingData","isLoading","result","newArr","timeLogs","sortedData","reverse"],"sources":["D:/diom working project/staging/src/pages/MyDashboard/RequestBookings/BookingDetail/useBookingDetails.js"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport { DIOM_BASED_URLS } from \"../../../.././config/url\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getBooking } from \"../../../../APIS/bookings\";\r\nimport { getGuest } from \"../../../../APIS/bookings\";\r\nimport { getbookinguser } from \"../../../../APIS/bookings\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport const useBookingDetails = () => {\r\n  const [error, setError] = useState(null);\r\n  const [bookingDetails, setBookingDetails] = useState({});\r\n  const [checkInCheckout, setCheckInCheckout] = useState([]);\r\n  // const [bookingUserName, setBookingUserName] = useState([]);\r\n  // const [userBookings, setUserBookings] = useState([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [abc, setAbc] = useState(true);\r\n  const [guestData, setGuestData] = useState([]);\r\n  const [revokeBookingStatus, setRevokeBookingStatus] = useState();\r\n\r\n  const history = useHistory();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const { id, t_ID } = useParams();\r\n  const componentRef = useRef();\r\n\r\n  // *************\r\n  const bookingData = useQuery([\"bookingsDetails\", id], () =>\r\n    getBooking(token, id)\r\n  );\r\n  const bookingsDailedData = bookingData?.data?.data;\r\n\r\n  // *************\r\n\r\n  const bookingdetails = async () => {\r\n    setBookingDetails(bookingsDailedData);\r\n    // bookingusername();\r\n    checkinCheckoutfunc(bookingsDailedData);\r\n  };\r\n\r\n  const bookingguestData = useQuery([\"guestDetails\", id], () =>\r\n    getGuest(token, id)\r\n  );\r\n  const bookingsguestData = bookingguestData?.data?.data;\r\n\r\n  const guestinfofunc = async () => {\r\n    setGuestData(bookingsguestData);\r\n  };\r\n\r\n  // const condition = bookingsDailedData?.userId.length !==0? true : false\r\n  const bookinguserData = useQuery(\r\n    [\"userDetails\", id],\r\n\r\n    () => getbookinguser(token, bookingsDailedData?.userId),\r\n    { enabled: bookingsDailedData ? true : false }\r\n  );\r\n\r\n  const userbookingData = bookinguserData?.data?.data;\r\n  const isLoading = bookinguserData.isLoading;\r\n\r\n  // ********\r\n  // const bookingusername = async () => {\r\n  // setBookingUserName(userbookingData?.username);\r\n  // setUserBookings(userbookingData ? userbookingData : null);\r\n  // };\r\n\r\n  const checkinCheckoutfunc = (result) => {\r\n    const newArr = [...result.timeLogs];\r\n    const sortedData = newArr.reverse();\r\n    setCheckInCheckout(sortedData);\r\n    return [sortedData];\r\n  };\r\n\r\n  //   const getrevokedbookings = async () => {\r\n  //     fetch(`${DIOM_BASED_URLS}/admin-diom-bookings/revoked/${id}`, {\r\n  //       method: \"GET\",\r\n  //       redirect: \"follow\",\r\n  //     })\r\n  //       .then((response) => response.json())\r\n  //       .then((result) => {\r\n  //         const mappeddata = result.data.map((e) => ({\r\n  //           bookingStatus: e.bookingStatus,\r\n  //         }));\r\n  //         setRevokeBookingStatus(mappeddata);\r\n  //       })\r\n  //       .catch((error) => console.log(\"error\", error));\r\n  //   };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      bookingsDailedData && (await bookingdetails());\r\n      bookingsguestData && (await guestinfofunc());\r\n      //   await getrevokedbookings();\r\n    })();\r\n  }, [bookingsDailedData, bookingsguestData]);\r\n\r\n  return {\r\n    error,\r\n    setError,\r\n    bookingDetails,\r\n    setBookingDetails,\r\n    checkInCheckout,\r\n    setCheckInCheckout,\r\n    // bookingUserName,\r\n    // setBookingUserName,\r\n    // userBookings,\r\n    // setUserBookings,\r\n    loaded,\r\n    setLoaded,\r\n    guestData,\r\n    setGuestData,\r\n    revokeBookingStatus,\r\n    setRevokeBookingStatus,\r\n    bookingdetails,\r\n    guestinfofunc,\r\n    // bookingusername,\r\n    abc,\r\n    isLoading,\r\n    setAbc,\r\n    checkinCheckoutfunc,\r\n    // getrevokedbookings,\r\n    userbookingData,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}