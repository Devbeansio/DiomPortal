{"ast":null,"code":"import _slicedToArray from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{Row,Col,Button,Alert,Container,Label}from\"reactstrap\";import sign_up_image from\"./pic/sign_up_image.png\";import\"./css/Login.css\";import{AvForm,AvField}from\"availity-reactstrap-validation\";import{ToastContainer}from\"react-toastify\";import{checkLogin,apiError}from\"../../store/actions\";import{DIOM_BASED_URLS}from\"../../config/url\";import{getMessaging,onMessage,getToken}from\"firebase/messaging\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),userpassword=_useState4[0],setUserpassword=_useState4[1];var dispatch=useDispatch();var history=useHistory();// const { loginError } = useSelector((state) => state.Login);\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),currentTokenOfUser=_useState6[0],setCurrentTokenOfUser=_useState6[1];var handleSubmit=function handleSubmit(event,values){// *************API START***************\nfetch(\"\".concat(DIOM_BASED_URLS,\"/diom/spaces/admin/login\"),{method:\"POST\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\"},body:JSON.stringify({email:username,password:userpassword,userDeviceToken:currentTokenOfUser})}).then(function(response){return response.json();}).then(function(resp){localStorage.setItem(\"Token\",resp.token);// history.push(\"/mydashboard\");\ndispatch(checkLogin({username:username,password:userpassword,currentTokenOfUser:currentTokenOfUser},history));});// .catch((error) => console.log(\"error\", error));\n//   ***********API END**************\n};var UserPasswordFunc=function UserPasswordFunc(e){setUserpassword(e.target.value);};var UserNameFunc=function UserNameFunc(e){setUsername(e.target.value);};useEffect(function(){var messaging=getMessaging();getToken(messaging,{vapidKey:\"BM1fWytNemYmBDWXErhlC830Pawh6YMuAXqU1T7XWsUm5_U7ZCXIZipfmwkcLIOlcz8uexN7u-9EtqpQWChFb-E\"}).then(function(currentToken){if(currentToken){setCurrentTokenOfUser(currentToken);}});// dispatch(apiError(\"\"));\ndocument.body.classList.add(\"auth-body-bg\");return document.body.classList.remove(\"auth-body-bg\");},[]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{fluid:true,className:\"p-0\",children:/*#__PURE__*/_jsxs(Row,{className:\"g-0\",children:[/*#__PURE__*/_jsx(Col,{lg:5,md:5,className:\"\",children:/*#__PURE__*/_jsx(\"div\",{className:\"image-wrap \",children:/*#__PURE__*/_jsx(\"img\",{className:\" img-responsive  \",src:sign_up_image,alt:\"img\"})})}),/*#__PURE__*/_jsx(Col,{lg:7,md:7,children:/*#__PURE__*/_jsx(\"div\",{className:\"authentication-page-content p-4 d-flex align-items-center min-vh-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{lg:9,md:9,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"wellcomepanel\",children:\"Welcome to Diom Admin Panel\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 mt-5\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"username\",className:\"logininboxpanels\",children:\"Username\"}),/*#__PURE__*/_jsxs(AvForm,{className:\"form-horizontal \",onValidSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form-group-custom mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-user-2-line auti-custom-input-icon\"}),/*#__PURE__*/_jsx(AvField,{name:\"username\",onChange:UserNameFunc,value:username,type:\"text\",className:\"form-control paddingbottominputlogin\",id:\"username\",validate:{email:true,required:true},placeholder:\"Enter username\"})]}),/*#__PURE__*/_jsx(Label,{htmlFor:\"userpassword\",className:\"logininboxpanels\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form-group-custom mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-lock-2-line auti-custom-input-icon\"}),/*#__PURE__*/_jsx(AvField,{name:\"password\",value:userpassword,type:\"password\",onChange:UserPasswordFunc,className:\"form-control paddingbottominputlogin\",id:\"userpassword\",placeholder:\"Enter password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 text-center\",children:/*#__PURE__*/_jsx(Button,{color:\"success\",className:\"waves-effect waves-light mr-1 w-100 \",block:true// onClick={LoginFunc}\n,children:/*#__PURE__*/_jsx(\"span\",{className:\" signinbutton\",children:\"SIGN IN\"})})})]})]})]})})})})})})]})})}),/*#__PURE__*/_jsx(ToastContainer,{autoClose:8000})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","useHistory","Row","Col","Button","Alert","Container","Label","sign_up_image","AvForm","AvField","ToastContainer","checkLogin","apiError","DIOM_BASED_URLS","getMessaging","onMessage","getToken","Login","username","setUsername","userpassword","setUserpassword","dispatch","history","currentTokenOfUser","setCurrentTokenOfUser","handleSubmit","event","values","fetch","method","headers","Accept","body","JSON","stringify","email","password","userDeviceToken","then","response","json","resp","localStorage","setItem","token","UserPasswordFunc","e","target","value","UserNameFunc","messaging","vapidKey","currentToken","document","classList","add","remove","required"],"sources":["D:/diom working project/staging/src/pages/Authentication/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Row, Col, Button, Alert, Container, Label } from \"reactstrap\";\r\nimport sign_up_image from \"./pic/sign_up_image.png\";\r\nimport \"./css/Login.css\";\r\nimport { AvForm, AvField } from \"availity-reactstrap-validation\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { checkLogin, apiError } from \"../../store/actions\";\r\nimport { DIOM_BASED_URLS } from \"../../config/url\";\r\nimport { getMessaging, onMessage, getToken } from \"firebase/messaging\";\r\nconst Login = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [userpassword, setUserpassword] = useState(\"\");\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  // const { loginError } = useSelector((state) => state.Login);\r\n  const [currentTokenOfUser, setCurrentTokenOfUser] = useState(\"\");\r\n\r\n  const handleSubmit = (event, values) => {\r\n    // *************API START***************\r\n    fetch(`${DIOM_BASED_URLS}/diom/spaces/admin/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: username,\r\n        password: userpassword,\r\n        userDeviceToken: currentTokenOfUser,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((resp) => {\r\n      \r\n        localStorage.setItem(\"Token\", resp.token);\r\n    \r\n    // history.push(\"/mydashboard\");\r\n    dispatch(\r\n      checkLogin(\r\n        { username, password: userpassword, currentTokenOfUser },\r\n        history\r\n      )\r\n     \r\n    ) \r\n    })\r\n    // .catch((error) => console.log(\"error\", error));\r\n    //   ***********API END**************\r\n  };\r\n  const UserPasswordFunc = (e) => {\r\n    setUserpassword(e.target.value);\r\n  };\r\n  const UserNameFunc = (e) => {\r\n    setUsername(e.target.value);\r\n  };\r\n  useEffect(() => {\r\n    const messaging = getMessaging();\r\n    getToken(messaging, {\r\n      vapidKey:\r\n        \"BM1fWytNemYmBDWXErhlC830Pawh6YMuAXqU1T7XWsUm5_U7ZCXIZipfmwkcLIOlcz8uexN7u-9EtqpQWChFb-E\",\r\n    }).then((currentToken) => {\r\n      if (currentToken) {\r\n       \r\n        setCurrentTokenOfUser(currentToken);\r\n      }\r\n    });\r\n\r\n    // dispatch(apiError(\"\"));\r\n    document.body.classList.add(\"auth-body-bg\");\r\n    return document.body.classList.remove(\"auth-body-bg\");\r\n  }, []);\r\n  return (\r\n    <React.Fragment>\r\n      <div>\r\n        <Container fluid className=\"p-0\">\r\n          <Row className=\"g-0\">\r\n            <Col lg={5} md={5} className=\"\">\r\n              {/* <div className=\"bg-overlay \"> */}\r\n              <div className=\"image-wrap \">\r\n                <img\r\n                  className=\" img-responsive  \"\r\n                  src={sign_up_image}\r\n                  alt=\"img\"\r\n                />\r\n              </div>\r\n              {/* </div> */}\r\n            </Col>\r\n            <Col lg={7} md={7}>\r\n              <div className=\"authentication-page-content p-4 d-flex align-items-center min-vh-100\">\r\n                <div className=\"w-100\">\r\n                  <Row className=\"justify-content-center\">\r\n                    <Col lg={9} md={9}>\r\n                      <div>\r\n                        <div className=\"text-center\">\r\n                          <h4 className=\"wellcomepanel\">\r\n                            Welcome to Diom Admin Panel\r\n                          </h4>\r\n                        </div>\r\n                        {/* {loginError && loginError ? (\r\n                          <Alert color=\"danger\">{loginError}</Alert>\r\n                        ) : null} */}\r\n                        <div className=\"p-2 mt-5\">\r\n                          <Label\r\n                            htmlFor=\"username\"\r\n                            className=\"logininboxpanels\"\r\n                          >\r\n                            Username\r\n                          </Label>\r\n                          <AvForm\r\n                            className=\"form-horizontal \"\r\n                            onValidSubmit={handleSubmit}\r\n                          >\r\n                            <div className=\"auth-form-group-custom mb-4\">\r\n                              <i className=\"ri-user-2-line auti-custom-input-icon\"></i>\r\n                              <AvField\r\n                                name=\"username\"\r\n                                onChange={UserNameFunc}\r\n                                value={username}\r\n                                type=\"text\"\r\n                                className=\"form-control paddingbottominputlogin\"\r\n                                id=\"username\"\r\n                                validate={{ email: true, required: true }}\r\n                                placeholder=\"Enter username\"\r\n                              />\r\n                            </div>\r\n                            {/* <div className=\"auth-form-group-custom mb-4\">\r\n                                <AvField\r\n                                  name=\"username\"\r\n                                  value={state.username}\r\n                                  type=\"text\"\r\n                                  onChange={UserNameFunc}\r\n                                  className=\"form-control\"\r\n                                  id=\"username\"\r\n                                  validate={{ email: true, required: true }}\r\n                                  placeholder=\"Enter username\"\r\n                                />\r\n                              </div> */}\r\n                            <Label\r\n                              htmlFor=\"userpassword\"\r\n                              className=\"logininboxpanels\"\r\n                            >\r\n                              Password\r\n                            </Label>\r\n                            <div className=\"auth-form-group-custom mb-4\">\r\n                              <i className=\"ri-lock-2-line auti-custom-input-icon\"></i>\r\n                              <AvField\r\n                                name=\"password\"\r\n                                value={userpassword}\r\n                                type=\"password\"\r\n                                onChange={UserPasswordFunc}\r\n                                className=\"form-control paddingbottominputlogin\"\r\n                                id=\"userpassword\"\r\n                                placeholder=\"Enter password\"\r\n                              />\r\n                            </div>\r\n                            {/* <div className=\"auth-form-group-custom  mb-4\">\r\n                                <AvField\r\n                                  name=\"password\"\r\n                                  value={state.userpassword}\r\n                                  type=\"password\"\r\n                                  className=\"form-control\"\r\n                                  id=\"userpassword\"\r\n                                  placeholder=\"Enter password\"\r\n                                  onChange={UserPasswordFunc}\r\n                                />\r\n                              </div> */}\r\n                            <div className=\"mt-5 text-center\">\r\n                              <Button\r\n                                color=\"success\"\r\n                                className=\"waves-effect waves-light mr-1 w-100 \"\r\n                                block\r\n                                // onClick={LoginFunc}\r\n                              >\r\n                                <span className=\" signinbutton\">SIGN IN</span>\r\n                              </Button>\r\n                            </div>\r\n                          </AvForm>\r\n                        </div>\r\n                      </div>\r\n                    </Col>\r\n                  </Row>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n      <ToastContainer autoClose={8000} />\r\n    </React.Fragment>\r\n  );\r\n};\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}