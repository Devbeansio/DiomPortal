{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSnackbar } from \"notistack\";\nimport { usePaginatedQuery } from '../../../hooks/query';\nimport { getNewreports, getPastreports } from '../../../APIS/reports';\nimport { QueryClient } from 'react-query';\nimport { DIOM_BASED_URLS } from '../../../config/url';\n\nconst useReportRequest = () => {\n  _s();\n\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const token = localStorage.getItem(\"Token\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [newOldReportsData, setNewOldReportsData] = useState([]);\n  const queryClient = new QueryClient();\n  const [postFilter, setPostFilter] = useState(false);\n  const [selectedReportType, setSelectedReportType] = useState(\"USER_REPORTS\");\n  const reportTypeOptions = [{\n    label: \"Booking Report\",\n    value: \"BOOKING_REPORTS\"\n  }, {\n    label: \"User Report\",\n    value: \"USER_REPORTS\"\n  }, {\n    label: \"User Ananlysis Report\",\n    value: \"USER_ANALYSIS_REPORTS\"\n  }, {\n    label: \"Cancelled Bookings\",\n    value: \"CANCELLED_BOOKINGS_REPORTS\"\n  }];\n\n  const retryFunc = () => {\n    // alert(\" i am retry presses\")\n    const message = 'Gathering Report Data';\n    enqueueSnackbar(message, {\n      variant: 'success'\n    }); // const message1 = 'Exporting Report ';\n    //   enqueueSnackbar(message1, { \n    //     variant: 'success', \n    // });\n  };\n\n  const downloadFunc = rowId => {\n    const message1 = 'Your Report has started  to download';\n    enqueueSnackbar(message1, {\n      variant: 'success'\n    }); ////////////\n\n    fetch(`${DIOM_BASED_URLS}/reports/commands`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        \"id\": `${rowId}`,\n        \"command\": \"MARK_READ\"\n      })\n    }).then(result3 => {}).catch(error => toast.error(\" Something went wrong\")); ////////////\n  };\n\n  const reportTyperequestFunc = e => {\n    setPostFilter(true);\n    setSelectedReportType(e.value);\n  }; // *************\n\n\n  const {\n    data: {\n      data: pastReportsDataa,\n      hasNextPage,\n      hasPreviousPage,\n      total,\n      refetch: pastReportsRefteh\n    },\n    isLoading\n  } = usePaginatedQuery([\"pastReprtssData\", `${selectedReportType}`], () => getPastreports(token, selectedReportType, postFilter)); // *************\n  // *************\n\n  const {\n    data: {\n      data: newReportsDataa\n    }\n  } = usePaginatedQuery([\"newReportssData\",, `${selectedReportType}`], () => getNewreports(token, selectedReportType, postFilter)); // const newReportsDataa = newReportsData.data;\n  // console.log(\"New reports : \",newReportsDataa)\n  // *************\n  // useEffect(\n  //   // FOR PRE-FETCHING NEXT PAGE\n  //   async () => {\n  //      await getPastreports(token,selectedReportType,postFilter);\n  //   },\n  //   [selectedReportType]\n  // );\n\n  return {\n    reportTypeOptions,\n    retryFunc,\n    downloadFunc,\n    pastReportsDataa,\n    newReportsDataa,\n    newOldReportsData,\n    setNewOldReportsData,\n    isLoading,\n    reportTyperequestFunc\n  };\n};\n\n_s(useReportRequest, \"jib6+WhHRxD83fsx121NuPyOt98=\", false, function () {\n  return [useSnackbar, usePaginatedQuery, usePaginatedQuery];\n});\n\nexport default useReportRequest;","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom(3)/src/pages/Reports/generateodf/useReportRequest.js"],"names":["React","useState","useEffect","useSnackbar","usePaginatedQuery","getNewreports","getPastreports","QueryClient","DIOM_BASED_URLS","useReportRequest","enqueueSnackbar","token","localStorage","getItem","currentPage","setCurrentPage","newOldReportsData","setNewOldReportsData","queryClient","postFilter","setPostFilter","selectedReportType","setSelectedReportType","reportTypeOptions","label","value","retryFunc","message","variant","downloadFunc","rowId","message1","fetch","method","headers","Accept","Authorization","body","JSON","stringify","then","result3","catch","error","toast","reportTyperequestFunc","e","data","pastReportsDataa","hasNextPage","hasPreviousPage","total","refetch","pastReportsRefteh","isLoading","newReportsDataa"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport {  useSnackbar } from \"notistack\";\r\nimport { usePaginatedQuery } from '../../../hooks/query';\r\nimport { getNewreports, getPastreports } from '../../../APIS/reports';\r\nimport { QueryClient } from 'react-query';\r\nimport { DIOM_BASED_URLS } from '../../../config/url';\r\n\r\nconst useReportRequest = () => {\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [newOldReportsData,setNewOldReportsData] = useState([])\r\n  const queryClient =new QueryClient();\r\n  const[postFilter,setPostFilter]=useState(false)\r\n  const[selectedReportType,setSelectedReportType]=useState(\"USER_REPORTS\")\r\n    const reportTypeOptions = [\r\n      { label: \"Booking Report\", value: \"BOOKING_REPORTS\" },\r\n      { label: \"User Report\", value: \"USER_REPORTS\" },\r\n      { label: \"User Ananlysis Report\", value: \"USER_ANALYSIS_REPORTS\" },\r\n      { label: \"Cancelled Bookings\", value: \"CANCELLED_BOOKINGS_REPORTS\" },\r\n      ];\r\n\r\n      const retryFunc=()=>{\r\n        // alert(\" i am retry presses\")\r\n        const message = 'Gathering Report Data';\r\n        enqueueSnackbar(message, { \r\n          variant: 'success', \r\n      });\r\n      // const message1 = 'Exporting Report ';\r\n      //   enqueueSnackbar(message1, { \r\n      //     variant: 'success', \r\n      // });\r\n      }\r\n      const downloadFunc=(rowId)=>{\r\n        \r\n        const message1 = 'Your Report has started  to download';\r\n        enqueueSnackbar(message1, { \r\n          variant: 'success', \r\n      });\r\n////////////\r\nfetch(`${DIOM_BASED_URLS}/reports/commands`, {\r\n  method: \"POST\",\r\n  headers: {\r\n    Accept: \"application/json, text/plain\",\r\n    \"Content-Type\": \"application/json;charset=UTF-8\",\r\n    Authorization: \"Bearer \" + token,\r\n  },\r\n  body: JSON.stringify({\r\n    \"id\": `${rowId}`,\r\n    \"command\":\"MARK_READ\"\r\n  }),\r\n})\r\n  .then((result3) => {\r\n   \r\n     \r\n    \r\n  })\r\n  .catch((error) => \r\n  toast.error(\" Something went wrong\"));\r\n\r\n////////////\r\n\r\n\r\n\r\n      }\r\n\r\n      const reportTyperequestFunc = (e)=>{\r\n        setPostFilter(true)\r\n        setSelectedReportType(e.value);\r\n  \r\n      }\r\n\r\n      \r\n  \r\n\r\n\r\n      \r\n// *************\r\n\r\nconst {\r\n  data: { data: pastReportsDataa, hasNextPage, hasPreviousPage, total,refetch:pastReportsRefteh },\r\n  isLoading,\r\n} = usePaginatedQuery(\r\n  [\"pastReprtssData\",`${selectedReportType}`],\r\n  () =>\r\n  getPastreports(token,selectedReportType,postFilter)\r\n\r\n);\r\n\r\n\r\n\r\n// *************\r\n// *************\r\nconst {\r\n  data: { data: newReportsDataa},\r\n  \r\n} = usePaginatedQuery(\r\n  [\"newReportssData\",,`${selectedReportType}`],\r\n  () =>\r\n  getNewreports(token,selectedReportType,postFilter)\r\n);\r\n\r\n// const newReportsDataa = newReportsData.data;\r\n// console.log(\"New reports : \",newReportsDataa)\r\n\r\n// *************\r\n// useEffect(\r\n//   // FOR PRE-FETCHING NEXT PAGE\r\n//   async () => {\r\n//      await getPastreports(token,selectedReportType,postFilter);\r\n    \r\n//   },\r\n//   [selectedReportType]\r\n// );\r\n\r\n\r\n  return (\r\n    {\r\n        reportTypeOptions,\r\n        retryFunc,\r\n        downloadFunc,\r\n        pastReportsDataa,\r\n        newReportsDataa,\r\n        newOldReportsData,setNewOldReportsData,\r\n        isLoading,\r\n        reportTyperequestFunc\r\n    }\r\n  )\r\n}\r\n\r\nexport default useReportRequest"]},"metadata":{},"sourceType":"module"}