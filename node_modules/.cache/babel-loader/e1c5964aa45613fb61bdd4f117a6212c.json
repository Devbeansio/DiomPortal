{"ast":null,"code":"import _slicedToArray from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useQueryClient}from\"react-query\";import{getInvoice}from\"../../../../APIS/invoices\";import{usePaginatedQuery}from\"../../../../hooks/query\";import{useHistory,useParams}from\"react-router-dom\";export var useInvoice=function useInvoice(){var history=useHistory();var token=localStorage.getItem(\"Token\");var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(50),_useState4=_slicedToArray(_useState3,1),pageSize=_useState4[0];var changeCurrentPage=function changeCurrentPage(pageNum){return setCurrentPage(pageNum);};var queryClient=useQueryClient();var _useParams=useParams(),id=_useParams.id;var _usePaginatedQuery=usePaginatedQuery([\"Invoice\",currentPage],function(){return getInvoice(pageSize,currentPage,token,id,history);}),_usePaginatedQuery$da=_usePaginatedQuery.data,InvoiceData=_usePaginatedQuery$da.data,hasNextPage=_usePaginatedQuery$da.hasNextPage,hasPreviousPage=_usePaginatedQuery$da.hasPreviousPage,total=_usePaginatedQuery$da.total,isLoading=_usePaginatedQuery.isLoading;var pageOptions={sizePerPage:pageSize,totalSize:total!==null&&total!==void 0?total:0,custom:true};useEffect(function(){// FOR PRE-FETCHING NEXT PAGE\nif(hasNextPage){var nextPage=currentPage+1;queryClient.prefetchQuery([\"Invoice\",nextPage],function(){return getInvoice(pageSize,nextPage,token,id,history);});}},[currentPage,queryClient]);return{currentPage:currentPage,pageOptions:pageOptions,InvoiceData:InvoiceData,hasNextPage:hasNextPage,hasPreviousPage:hasPreviousPage,total:total,isLoading:isLoading,changeCurrentPage:changeCurrentPage};};","map":{"version":3,"names":["useEffect","useState","useQueryClient","getInvoice","usePaginatedQuery","useHistory","useParams","useInvoice","history","token","localStorage","getItem","currentPage","setCurrentPage","pageSize","changeCurrentPage","pageNum","queryClient","id","data","InvoiceData","hasNextPage","hasPreviousPage","total","isLoading","pageOptions","sizePerPage","totalSize","custom","nextPage","prefetchQuery"],"sources":["C:/Users/tech sign/Desktop/xyz/src/pages/Finance/InvoicesMainPage/InvoicesDetailPage/useInvoicesDetail.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { getInvoice } from \"../../../../APIS/invoices\";\r\nimport { usePaginatedQuery } from \"../../../../hooks/query\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nexport const useInvoice = () => {\r\n  let history = useHistory();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize] = useState(50);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const queryClient = useQueryClient();\r\n  const { id } = useParams();\r\n\r\n  const {\r\n    data: { data: InvoiceData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"Invoice\", currentPage], () =>\r\n    getInvoice(pageSize, currentPage, token, id,history)\r\n  );\r\n\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n\r\n  useEffect(() => {\r\n    // FOR PRE-FETCHING NEXT PAGE\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"Invoice\", nextPage], () =>\r\n        getInvoice(pageSize, nextPage, token, id,history)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient]);\r\n\r\n  return {\r\n    currentPage,\r\n    pageOptions,\r\n    InvoiceData,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    isLoading,\r\n    changeCurrentPage,\r\n  };\r\n};\r\n"],"mappings":"oHAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,cAAT,KAA+B,aAA/B,CACA,OAASC,UAAT,KAA2B,2BAA3B,CACA,OAASC,iBAAT,KAAkC,yBAAlC,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,kBAAtC,CAEA,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CAC9B,GAAIC,QAAO,CAAGH,UAAU,EAAxB,CACA,GAAMI,MAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,cAAsCV,QAAQ,CAAC,CAAD,CAA9C,wCAAOW,WAAP,eAAoBC,cAApB,eACA,eAAmBZ,QAAQ,CAAC,EAAD,CAA3B,yCAAOa,QAAP,eACA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,OAAD,QAAaH,eAAc,CAACG,OAAD,CAA3B,EAA1B,CACA,GAAMC,YAAW,CAAGf,cAAc,EAAlC,CACA,eAAeI,SAAS,EAAxB,CAAQY,EAAR,YAAQA,EAAR,CAEA,uBAGId,iBAAiB,CAAC,CAAC,SAAD,CAAYQ,WAAZ,CAAD,CAA2B,iBAC9CT,WAAU,CAACW,QAAD,CAAWF,WAAX,CAAwBH,KAAxB,CAA+BS,EAA/B,CAAkCV,OAAlC,CADoC,EAA3B,CAHrB,0CACEW,IADF,CACgBC,WADhB,uBACUD,IADV,CAC6BE,WAD7B,uBAC6BA,WAD7B,CAC0CC,eAD1C,uBAC0CA,eAD1C,CAC2DC,KAD3D,uBAC2DA,KAD3D,CAEEC,SAFF,oBAEEA,SAFF,CAOA,GAAMC,YAAW,CAAG,CAClBC,WAAW,CAAEZ,QADK,CAElBa,SAAS,CAAEJ,KAAF,SAAEA,KAAF,UAAEA,KAAF,CAAW,CAFF,CAGlBK,MAAM,CAAE,IAHU,CAApB,CAMA5B,SAAS,CAAC,UAAM,CACd;AACA,GAAIqB,WAAJ,CAAiB,CACf,GAAMQ,SAAQ,CAAGjB,WAAW,CAAG,CAA/B,CACAK,WAAW,CAACa,aAAZ,CAA0B,CAAC,SAAD,CAAYD,QAAZ,CAA1B,CAAiD,iBAC/C1B,WAAU,CAACW,QAAD,CAAWe,QAAX,CAAqBpB,KAArB,CAA4BS,EAA5B,CAA+BV,OAA/B,CADqC,EAAjD,EAGD,CACF,CARQ,CAQN,CAACI,WAAD,CAAcK,WAAd,CARM,CAAT,CAUA,MAAO,CACLL,WAAW,CAAXA,WADK,CAELa,WAAW,CAAXA,WAFK,CAGLL,WAAW,CAAXA,WAHK,CAILC,WAAW,CAAXA,WAJK,CAKLC,eAAe,CAAfA,eALK,CAMLC,KAAK,CAALA,KANK,CAOLC,SAAS,CAATA,SAPK,CAQLT,iBAAiB,CAAjBA,iBARK,CAAP,CAUD,CA1CM"},"metadata":{},"sourceType":"module"}