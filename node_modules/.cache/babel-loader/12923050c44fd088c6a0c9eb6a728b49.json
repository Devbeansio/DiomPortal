{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useQuery } from \"react-query\";\nimport { getAdminNotifications } from \"../../APIS/notifications\";\nimport { DIOM_BASED_URLS } from \"../../config/url\";\nimport { useQueryClient } from \"react-query\";\n\nfunction UseNotifications() {\n  _s();\n\n  const token = localStorage.getItem(\"Token\");\n  const QueryClient = useQueryClient();\n\n  const markAllReadFunc = () => {\n    fetch(`${DIOM_BASED_URLS}/admin-notifications`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        markRead: true\n      })\n    }).then(result3 => {\n      QueryClient.invalidateQueries(\"adminNotifications\");\n    }).catch(error => toast.error(\" Something went wrong\"));\n  };\n\n  const notificationSeenFunc = e => {\n    fetch(`${DIOM_BASED_URLS}/admin-notifications/${e.id}`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        markRead: true\n      })\n    }).then(result3 => {\n      QueryClient.invalidateQueries(\"adminNotifications\");\n    }).catch(error => toast.error(\" Something went wrong\"));\n  }; // *************\n\n\n  const adminNotificationsdata = useQuery([\"adminNotifications\"], () => getAdminNotifications(token));\n  const adminNotificationdata = adminNotificationsdata.data; // *************\n\n  return {\n    adminNotificationdata,\n    notificationSeenFunc,\n    markAllReadFunc\n  };\n}\n\n_s(UseNotifications, \"2v5msc9f9VyMbqLY18RYa9MsX9Q=\", false, function () {\n  return [useQueryClient, useQuery];\n});\n\n_c = UseNotifications;\nexport default UseNotifications;\n\nvar _c;\n\n$RefreshReg$(_c, \"UseNotifications\");","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom(3)/src/pages/Notifications/useNotifications.js"],"names":["React","useQuery","getAdminNotifications","DIOM_BASED_URLS","useQueryClient","UseNotifications","token","localStorage","getItem","QueryClient","markAllReadFunc","fetch","method","headers","Accept","Authorization","body","JSON","stringify","markRead","then","result3","invalidateQueries","catch","error","toast","notificationSeenFunc","e","id","adminNotificationsdata","adminNotificationdata","data"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,qBAAT,QAAsC,0BAAtC;AACA,SAASC,eAAT,QAAgC,kBAAhC;AACA,SAASC,cAAT,QAA+B,aAA/B;;AAEA,SAASC,gBAAT,GAA4B;AAAA;;AAC1B,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,QAAMC,WAAW,GAAGL,cAAc,EAAlC;;AAKA,QAAMM,eAAe,GAAC,MAAI;AAExBC,IAAAA,KAAK,CAAE,GAAER,eAAgB,sBAApB,EAA2C;AAC9CS,MAAAA,MAAM,EAAE,OADsC;AAE9CC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,8BADD;AAEP,wBAAgB,gCAFT;AAGPC,QAAAA,aAAa,EAAE,YAAYT;AAHpB,OAFqC;AAO9CU,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,QAAQ,EAAE;AADS,OAAf;AAPwC,KAA3C,CAAL,CAWGC,IAXH,CAWSC,OAAD,IAAa;AACjBZ,MAAAA,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B;AAGD,KAfH,EAgBGC,KAhBH,CAgBUC,KAAD,IAAWC,KAAK,CAACD,KAAN,CAAY,uBAAZ,CAhBpB;AAkBD,GApBD;;AAsBA,QAAME,oBAAoB,GAAIC,CAAD,IAAK;AAKhChB,IAAAA,KAAK,CAAE,GAAER,eAAgB,wBAAuBwB,CAAC,CAACC,EAAG,EAAhD,EAAmD;AACtDhB,MAAAA,MAAM,EAAE,OAD8C;AAEtDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,8BADD;AAEP,wBAAgB,gCAFT;AAGPC,QAAAA,aAAa,EAAE,YAAYT;AAHpB,OAF6C;AAOtDU,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,QAAQ,EAAE;AADS,OAAf;AAPgD,KAAnD,CAAL,CAWGC,IAXH,CAWSC,OAAD,IAAa;AACjBZ,MAAAA,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B;AAGD,KAfH,EAgBGC,KAhBH,CAgBUC,KAAD,IAAWC,KAAK,CAACD,KAAN,CAAY,uBAAZ,CAhBpB;AAiBD,GAtBD,CA7B0B,CAsD1B;;;AACA,QAAMK,sBAAsB,GAAG5B,QAAQ,CAAC,CAAC,oBAAD,CAAD,EAAyB,MAC9DC,qBAAqB,CAACI,KAAD,CADgB,CAAvC;AAGA,QAAMwB,qBAAqB,GAAGD,sBAAsB,CAACE,IAArD,CA1D0B,CA6D1B;;AAKA,SAAO;AAAED,IAAAA,qBAAF;AAAwBJ,IAAAA,oBAAxB;AAA6ChB,IAAAA;AAA7C,GAAP;AACD;;GAnEQL,gB;UAEaD,c,EAqDWH,Q;;;KAvDxBI,gB;AAqET,eAAeA,gBAAf","sourcesContent":["import React from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getAdminNotifications } from \"../../APIS/notifications\";\r\nimport { DIOM_BASED_URLS } from \"../../config/url\";\r\nimport { useQueryClient } from \"react-query\";\r\n\r\nfunction UseNotifications() {\r\n  const token = localStorage.getItem(\"Token\");\r\n  const QueryClient = useQueryClient()\r\n\r\n\r\n\r\n\r\n  const markAllReadFunc=()=>{\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n  }\r\n\r\n  const notificationSeenFunc = (e)=>{\r\n   \r\n   \r\n\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications/${e.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  }\r\n\r\n\r\n  // *************\r\n  const adminNotificationsdata = useQuery([\"adminNotifications\"], () =>\r\n    getAdminNotifications(token)\r\n  );\r\n  const adminNotificationdata = adminNotificationsdata.data;\r\n \r\n\r\n  // *************\r\n\r\n\r\n\r\n\r\n  return { adminNotificationdata,notificationSeenFunc,markAllReadFunc };\r\n}\r\n\r\nexport default UseNotifications;\r\n"]},"metadata":{},"sourceType":"module"}