{"ast":null,"code":"import _toConsumableArray from\"C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\tech sign\\\\Desktop\\\\1diom-frontend\\\\diom-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect,useRef}from\"react\";import{DIOM_BASED_URLS}from\"../../../.././config/url\";import{useParams,useHistory}from\"react-router-dom\";import{useQuery}from\"react-query\";import{getBooking}from\"../../../../APIS/bookings\";import{getGuest}from\"../../../../APIS/bookings\";import{getbookinguser}from\"../../../../APIS/bookings\";import{toast}from\"react-toastify\";export var useBookingDetails=function useBookingDetails(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),bookingDetails=_useState4[0],setBookingDetails=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),checkInCheckout=_useState6[0],setCheckInCheckout=_useState6[1];// const [bookingUserName, setBookingUserName] = useState([]);\n// const [userBookings, setUserBookings] = useState([]);\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loaded=_useState8[0],setLoaded=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),abc=_useState10[0],setAbc=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),guestData=_useState12[0],setGuestData=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),revokeBookingStatus=_useState14[0],setRevokeBookingStatus=_useState14[1];var history=useHistory();var token=localStorage.getItem(\"Token\");var _useParams=useParams(),id=_useParams.id,t_ID=_useParams.t_ID;var componentRef=useRef();// *************\nvar bookingData=useQuery([\"bookingsDetails\",id],function(){return getBooking(token,id);});var bookingsDailedData=bookingData.data;// *************\nvar bookingdetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setBookingDetails(bookingsDailedData);// bookingusername();\ncheckinCheckoutfunc(bookingsDailedData);case 2:case\"end\":return _context.stop();}}},_callee);}));return function bookingdetails(){return _ref.apply(this,arguments);};}();var bookingguestData=useQuery([\"guestDetails\",id],function(){return getGuest(token,id);});var bookingsguestData=bookingguestData.data;var guestinfofunc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setGuestData(bookingsguestData);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function guestinfofunc(){return _ref2.apply(this,arguments);};}();// const condition = bookingsDailedData?.userId.length !==0? true : false\nvar bookinguserData=useQuery([\"userDetails\",id],function(){return getbookinguser(token,bookingsDailedData===null||bookingsDailedData===void 0?void 0:bookingsDailedData.userId);},{enabled:bookingsDailedData?true:false});var userbookingData=bookinguserData.data;var isLoading=bookinguserData.isLoading;// ********\n// const bookingusername = async () => {\n// setBookingUserName(userbookingData?.username);\n// setUserBookings(userbookingData ? userbookingData : null);\n// };\nvar checkinCheckoutfunc=function checkinCheckoutfunc(result){var newArr=_toConsumableArray(result.timeLogs);var sortedData=newArr.reverse();setCheckInCheckout(sortedData);return[sortedData];};//   const getrevokedbookings = async () => {\n//     fetch(`${DIOM_BASED_URLS}/admin-diom-bookings/revoked/${id}`, {\n//       method: \"GET\",\n//       redirect: \"follow\",\n//     })\n//       .then((response) => response.json())\n//       .then((result) => {\n//         const mappeddata = result.data.map((e) => ({\n//           bookingStatus: e.bookingStatus,\n//         }));\n//         setRevokeBookingStatus(mappeddata);\n//       })\n//       .catch((error) => console.log(\"error\", error));\n//   };\nuseEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=bookingsDailedData;if(!_context3.t0){_context3.next=4;break;}_context3.next=4;return bookingdetails();case 4:_context3.t1=bookingsguestData;if(!_context3.t1){_context3.next=8;break;}_context3.next=8;return guestinfofunc();case 8:case\"end\":return _context3.stop();}}},_callee3);}))();},[bookingsDailedData,bookingsguestData]);return{error:error,setError:setError,bookingDetails:bookingDetails,setBookingDetails:setBookingDetails,checkInCheckout:checkInCheckout,setCheckInCheckout:setCheckInCheckout,// bookingUserName,\n// setBookingUserName,\n// userBookings,\n// setUserBookings,\nloaded:loaded,setLoaded:setLoaded,guestData:guestData,setGuestData:setGuestData,revokeBookingStatus:revokeBookingStatus,setRevokeBookingStatus:setRevokeBookingStatus,bookingdetails:bookingdetails,guestinfofunc:guestinfofunc,// bookingusername,\nabc:abc,isLoading:isLoading,setAbc:setAbc,checkinCheckoutfunc:checkinCheckoutfunc,// getrevokedbookings,\nuserbookingData:userbookingData};};","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/src/pages/MyDashboard/RequestBookings/BookingDetail/useBookingDetails.js"],"names":["useState","useEffect","useRef","DIOM_BASED_URLS","useParams","useHistory","useQuery","getBooking","getGuest","getbookinguser","toast","useBookingDetails","error","setError","bookingDetails","setBookingDetails","checkInCheckout","setCheckInCheckout","loaded","setLoaded","abc","setAbc","guestData","setGuestData","revokeBookingStatus","setRevokeBookingStatus","history","token","localStorage","getItem","id","t_ID","componentRef","bookingData","bookingsDailedData","data","bookingdetails","checkinCheckoutfunc","bookingguestData","bookingsguestData","guestinfofunc","bookinguserData","userId","enabled","userbookingData","isLoading","result","newArr","timeLogs","sortedData","reverse"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport { DIOM_BASED_URLS } from \"../../../.././config/url\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getBooking } from \"../../../../APIS/bookings\";\r\nimport { getGuest } from \"../../../../APIS/bookings\";\r\nimport { getbookinguser } from \"../../../../APIS/bookings\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport const useBookingDetails = () => {\r\n  const [error, setError] = useState(null);\r\n  const [bookingDetails, setBookingDetails] = useState({});\r\n  const [checkInCheckout, setCheckInCheckout] = useState([]);\r\n  // const [bookingUserName, setBookingUserName] = useState([]);\r\n  // const [userBookings, setUserBookings] = useState([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [abc, setAbc] = useState(true);\r\n  const [guestData, setGuestData] = useState([]);\r\n  const [revokeBookingStatus, setRevokeBookingStatus] = useState();\r\n\r\n  const history = useHistory();\r\n  const token = localStorage.getItem(\"Token\");\r\n  const { id, t_ID } = useParams();\r\n  const componentRef = useRef();\r\n\r\n  // *************\r\n  const bookingData = useQuery([\"bookingsDetails\", id], () =>\r\n    getBooking(token, id)\r\n  );\r\n  const bookingsDailedData = bookingData.data;\r\n\r\n  // *************\r\n\r\n  const bookingdetails = async () => {\r\n    setBookingDetails(bookingsDailedData);\r\n    // bookingusername();\r\n    checkinCheckoutfunc(bookingsDailedData);\r\n  };\r\n\r\n  const bookingguestData = useQuery([\"guestDetails\", id], () =>\r\n    getGuest(token, id)\r\n  );\r\n  const bookingsguestData = bookingguestData.data;\r\n\r\n  const guestinfofunc = async () => {\r\n    setGuestData(bookingsguestData);\r\n  };\r\n\r\n  // const condition = bookingsDailedData?.userId.length !==0? true : false\r\n  const bookinguserData = useQuery(\r\n    [\"userDetails\", id],\r\n\r\n    () => getbookinguser(token, bookingsDailedData?.userId),\r\n    { enabled: bookingsDailedData ? true : false }\r\n  );\r\n\r\n  const userbookingData = bookinguserData.data;\r\n  const isLoading = bookinguserData.isLoading;\r\n\r\n  // ********\r\n  // const bookingusername = async () => {\r\n  // setBookingUserName(userbookingData?.username);\r\n  // setUserBookings(userbookingData ? userbookingData : null);\r\n  // };\r\n\r\n  const checkinCheckoutfunc = (result) => {\r\n    const newArr = [...result.timeLogs];\r\n    const sortedData = newArr.reverse();\r\n    setCheckInCheckout(sortedData);\r\n    return [sortedData];\r\n  };\r\n\r\n  //   const getrevokedbookings = async () => {\r\n  //     fetch(`${DIOM_BASED_URLS}/admin-diom-bookings/revoked/${id}`, {\r\n  //       method: \"GET\",\r\n  //       redirect: \"follow\",\r\n  //     })\r\n  //       .then((response) => response.json())\r\n  //       .then((result) => {\r\n  //         const mappeddata = result.data.map((e) => ({\r\n  //           bookingStatus: e.bookingStatus,\r\n  //         }));\r\n  //         setRevokeBookingStatus(mappeddata);\r\n  //       })\r\n  //       .catch((error) => console.log(\"error\", error));\r\n  //   };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      bookingsDailedData && (await bookingdetails());\r\n      bookingsguestData && (await guestinfofunc());\r\n      //   await getrevokedbookings();\r\n    })();\r\n  }, [bookingsDailedData, bookingsguestData]);\r\n\r\n  return {\r\n    error,\r\n    setError,\r\n    bookingDetails,\r\n    setBookingDetails,\r\n    checkInCheckout,\r\n    setCheckInCheckout,\r\n    // bookingUserName,\r\n    // setBookingUserName,\r\n    // userBookings,\r\n    // setUserBookings,\r\n    loaded,\r\n    setLoaded,\r\n    guestData,\r\n    setGuestData,\r\n    revokeBookingStatus,\r\n    setRevokeBookingStatus,\r\n    bookingdetails,\r\n    guestinfofunc,\r\n    // bookingusername,\r\n    abc,\r\n    isLoading,\r\n    setAbc,\r\n    checkinCheckoutfunc,\r\n    // getrevokedbookings,\r\n    userbookingData,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}