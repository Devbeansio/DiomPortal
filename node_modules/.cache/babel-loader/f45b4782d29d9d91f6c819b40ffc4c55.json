{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\tech sign\\\\Desktop\\\\1diom-frontend\\\\diom-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{DIOM_BASED_URLS}from\"../../../../config/url\";import{toast}from\"react-toastify\";import{getCategoryDetails}from\"../../../../APIS/categories\";import{useQueryClient,useQuery}from\"react-query\";import{getResourcetypeDropdown}from\"../../../../APIS/categories\";import{getCategoryDetaildropdown}from\"../../../../APIS/categories\";var UseCategoryDetail=function UseCategoryDetail(){var QueryClient=useQueryClient();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedMulti=_useState4[0],setSelectedMulti=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modal_static=_useState6[0],setModal_static=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modal_static1=_useState8[0],setModal_static1=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),categoryDetail=_useState10[0],setCategoryDetail=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),categoryDropDown=_useState12[0],setCategoryDropDown=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),categoryDetailname=_useState14[0],setCategoryDetailname=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),selectedvalue=_useState16[0],setSelectedvalue=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),loaded=_useState18[0],setLoaded=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),selectedValueForDelte=_useState20[0],setSelectedValueForDelte=_useState20[1];var _useParams=useParams(),id=_useParams.id;var token=localStorage.getItem(\"Token\");var OnChangeCategory=function OnChangeCategory(event){setCategoryDetail(function(prev){return event.target.value;});};var tog_static1=function tog_static1(){setModal_static1(!modal_static1);removeBodyCss();};var removeBodyCss=function removeBodyCss(){document.body.classList.add(\"no_padding\");};var tog_static=function tog_static(){setModal_static(!modal_static);removeBodyCss();};var updateNameAndDescription=function updateNameAndDescription(){fetch(\"\".concat(DIOM_BASED_URLS,\"/resource-type-categories/\").concat(id),{method:\"PATCH\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({name:categoryDetail})}).then(function(result3){if(result3.status===200){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else if(result3.status===204){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else{toast.error(\" Something went wrong\");}setModal_static(false);}).catch(function(error){return toast.error(\" Something went wrong\");});};var handleMulti=function handleMulti(selected){if(selectedMulti.length<selected.length){var lenthOFAdded=selected.length-1;setSelectedValueForDelte(selected[lenthOFAdded].value);setSelectedvalue(selected[lenthOFAdded].value);if(selected[lenthOFAdded].locationCategoriesId===\"\"){fetch(\"\".concat(DIOM_BASED_URLS,\"/resource-type-categories/\").concat(id,\"/resourcetypes\"),{method:\"PATCH\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({resourceTypeId:selected[lenthOFAdded].value})}).then(function(result3){if(result3.status===200){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else if(result3.status===204){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else{toast.error(\" Something went wrong\");}// setModal_static(false);\n}).catch(function(error){return console.log(\"error\",error);});}else{tog_static1();}}else if(selectedMulti.length>selected.length){var mappedValuedSelected=selected.map(function(e){return e.value;});// const mappedValuedMultiSelected = selectedMulti.map((e) => {return ( e.value) })\nvar filteredValue=selectedMulti.filter(function(e){return!mappedValuedSelected.includes(e.value);});fetch(\"\".concat(DIOM_BASED_URLS,\"/resource-type-categories/\").concat(id,\"/resourcetypes/\").concat(filteredValue[0].value),{method:\"DELETE\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({})}).then(function(result3){if(result3.status===200){toast.success(\" Successfully Deleted\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else if(result3.status===204){toast.success(\" Successfullyn Deleted\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else{toast.error(\" Something went wrong\");}}).catch(function(error){return toast.error(\" Something went wrong\");});}setSelectedMulti(selected);};var FetchbrandLocations=function FetchbrandLocations(){fetch(\"\".concat(DIOM_BASED_URLS,\"/resource-type-categories/\").concat(id,\"/resourcetypes\"),{method:\"PATCH\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({resourceTypeId:selectedvalue})}).then(function(result3){if(result3.status===200){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else if(result3.status===204){toast.success(\"Updated Successfully\");QueryClient.invalidateQueries(\"resourceTypedropdown\");QueryClient.invalidateQueries(\"categpryDetaildropdown\");QueryClient.invalidateQueries(\"categpryDetails\");}else{toast.error(\" Something went wrong\");}setModal_static(false);}).catch(function(error){return toast.error(\" Something went wrong\");});setModal_static1(false);};// *************\nvar categoryData=useQuery([\"categpryDetails\",id],function(){return getCategoryDetails(token,id);});var categoryDailedData=categoryData.data;// *************\nvar CategoryDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCategoryDetailname(categoryDailedData.name);setCategoryDetail(categoryDailedData.name);case 2:case\"end\":return _context.stop();}}},_callee);}));return function CategoryDetail(){return _ref.apply(this,arguments);};}();// *************\nvar categorydropdownData=useQuery([\"categpryDetaildropdown\",id],function(){return getCategoryDetaildropdown(token,id);});var categorydropdownDailedData=categorydropdownData.data;// *************\nvar CategoryDetaildropdown=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var matadata;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:matadata=categorydropdownDailedData.data.map(function(element){return{label:element.Name,value:element.id};});setSelectedMulti(matadata);setCategoryDropDown(matadata);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function CategoryDetaildropdown(){return _ref2.apply(this,arguments);};}();// *************\nvar resourceTypedropdownData=useQuery([\"resourceTypedropdown\",id],function(){return getResourcetypeDropdown(token,id);});var resourceTypedropdownDailedData=resourceTypedropdownData.data;var isLoading=resourceTypedropdownData.isLoading;// *************\nvar Resourcetypesdropdown=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var matadata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:matadata=resourceTypedropdownDailedData.data.map(function(element){return{label:element.Name,value:element.id,UniqueId:element.UniqueId};});setCategoryDropDown(matadata);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function Resourcetypesdropdown(){return _ref3.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=categoryDailedData;if(!_context4.t0){_context4.next=4;break;}_context4.next=4;return CategoryDetail();case 4:_context4.t1=categorydropdownDailedData;if(!_context4.t1){_context4.next=8;break;}_context4.next=8;return CategoryDetaildropdown();case 8:_context4.t2=resourceTypedropdownDailedData;if(!_context4.t2){_context4.next=12;break;}_context4.next=12;return Resourcetypesdropdown();case 12:case\"end\":return _context4.stop();}}},_callee4);}))();},[categoryDailedData,categorydropdownDailedData,resourceTypedropdownDailedData]);return{error:error,setError:setError,selectedMulti:selectedMulti,setSelectedMulti:setSelectedMulti,modal_static:modal_static,setModal_static:setModal_static,modal_static1:modal_static1,setModal_static1:setModal_static1,isLoading:isLoading,categoryDetail:categoryDetail,setCategoryDetail:setCategoryDetail,categoryDropDown:categoryDropDown,setCategoryDropDown:setCategoryDropDown,categoryDetailname:categoryDetailname,setCategoryDetailname:setCategoryDetailname,selectedvalue:selectedvalue,setSelectedvalue:setSelectedvalue,loaded:loaded,setLoaded:setLoaded,selectedValueForDelte:selectedValueForDelte,setSelectedValueForDelte:setSelectedValueForDelte,updateNameAndDescription:updateNameAndDescription,OnChangeCategory:OnChangeCategory,handleMulti:handleMulti,tog_static1:tog_static1,tog_static:tog_static,FetchbrandLocations:FetchbrandLocations,CategoryDetail:CategoryDetail,CategoryDetaildropdown:CategoryDetaildropdown,Resourcetypesdropdown:Resourcetypesdropdown};};export default UseCategoryDetail;","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/1diom-frontend/diom-frontend/src/pages/Inventories/Categories/CategoriesDetail/useCategoryDetail.js"],"names":["React","useState","useEffect","useParams","useHistory","DIOM_BASED_URLS","toast","getCategoryDetails","useQueryClient","useQuery","getResourcetypeDropdown","getCategoryDetaildropdown","UseCategoryDetail","QueryClient","error","setError","selectedMulti","setSelectedMulti","modal_static","setModal_static","modal_static1","setModal_static1","categoryDetail","setCategoryDetail","categoryDropDown","setCategoryDropDown","categoryDetailname","setCategoryDetailname","selectedvalue","setSelectedvalue","loaded","setLoaded","selectedValueForDelte","setSelectedValueForDelte","id","token","localStorage","getItem","OnChangeCategory","event","prev","target","value","tog_static1","removeBodyCss","document","body","classList","add","tog_static","updateNameAndDescription","fetch","method","headers","Accept","Authorization","JSON","stringify","name","then","result3","status","success","invalidateQueries","catch","handleMulti","selected","length","lenthOFAdded","locationCategoriesId","resourceTypeId","console","log","mappedValuedSelected","map","e","filteredValue","filter","includes","FetchbrandLocations","categoryData","categoryDailedData","data","CategoryDetail","categorydropdownData","categorydropdownDailedData","CategoryDetaildropdown","matadata","element","label","Name","resourceTypedropdownData","resourceTypedropdownDailedData","isLoading","Resourcetypesdropdown","UniqueId"],"mappings":"obAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,eAAT,KAAgC,wBAAhC,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,kBAAT,KAAmC,6BAAnC,CACA,OAASC,cAAT,CAAyBC,QAAzB,KAAyC,aAAzC,CACA,OAASC,uBAAT,KAAwC,6BAAxC,CACA,OAASC,yBAAT,KAA0C,6BAA1C,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9B,GAAMC,CAAAA,WAAW,CAAGL,cAAc,EAAlC,CACA,cAA0BP,QAAQ,CAAC,IAAD,CAAlC,wCAAOa,KAAP,eAAcC,QAAd,eACA,eAA0Cd,QAAQ,CAAC,EAAD,CAAlD,yCAAOe,aAAP,eAAsBC,gBAAtB,eACA,eAAwChB,QAAQ,CAAC,KAAD,CAAhD,yCAAOiB,YAAP,eAAqBC,eAArB,eACA,eAA0ClB,QAAQ,CAAC,KAAD,CAAlD,yCAAOmB,aAAP,eAAsBC,gBAAtB,eACA,eAA4CpB,QAAQ,EAApD,0CAAOqB,cAAP,gBAAuBC,iBAAvB,gBACA,gBAAgDtB,QAAQ,CAAC,EAAD,CAAxD,2CAAOuB,gBAAP,gBAAyBC,mBAAzB,gBACA,gBAAoDxB,QAAQ,EAA5D,2CAAOyB,kBAAP,gBAA2BC,qBAA3B,gBACA,gBAA0C1B,QAAQ,EAAlD,2CAAO2B,aAAP,gBAAsBC,gBAAtB,gBACA,gBAA4B5B,QAAQ,CAAC,KAAD,CAApC,2CAAO6B,MAAP,gBAAeC,SAAf,gBACA,gBAA0D9B,QAAQ,EAAlE,2CAAO+B,qBAAP,gBAA8BC,wBAA9B,gBAEA,eAAe9B,SAAS,EAAxB,CAAQ+B,EAAR,YAAQA,EAAR,CACA,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAW,CAClChB,iBAAiB,CAAC,SAACiB,IAAD,QAAUD,CAAAA,KAAK,CAACE,MAAN,CAAaC,KAAvB,EAAD,CAAjB,CACD,CAFD,CAIA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBtB,gBAAgB,CAAC,CAACD,aAAF,CAAhB,CAEAwB,aAAa,GACd,CAJD,CAMA,GAAMA,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BC,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,YAA5B,EACD,CAFD,CAGA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB9B,eAAe,CAAC,CAACD,YAAF,CAAf,CAEA0B,aAAa,GACd,CAJD,CAMA,GAAMM,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,EAAM,CACrCC,KAAK,WAAI9C,eAAJ,sCAAgD6B,EAAhD,EAAsD,CACzDkB,MAAM,CAAE,OADiD,CAEzDC,OAAO,CAAE,CACPC,MAAM,CAAE,8BADD,CAEP,eAAgB,gCAFT,CAGPC,aAAa,CAAE,UAAYpB,KAHpB,CAFgD,CAOzDW,IAAI,CAAEU,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAEpC,cADa,CAAf,CAPmD,CAAtD,CAAL,CAWGqC,IAXH,CAWQ,SAACC,OAAD,CAAa,CACjB,GAAIA,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CAC1BvD,KAAK,CAACwD,OAAN,CAAc,sBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALD,IAKO,IAAIH,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CACjCvD,KAAK,CAACwD,OAAN,CAAc,sBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALM,IAKA,CACLzD,KAAK,CAACQ,KAAN,CAAY,uBAAZ,EACD,CACDK,eAAe,CAAC,KAAD,CAAf,CACD,CA1BH,EA2BG6C,KA3BH,CA2BS,SAAClD,KAAD,QAAWR,CAAAA,KAAK,CAACQ,KAAN,CAAY,uBAAZ,CAAX,EA3BT,EA4BD,CA7BD,CA+BA,GAAMmD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,QAAD,CAAc,CAChC,GAAIlD,aAAa,CAACmD,MAAd,CAAuBD,QAAQ,CAACC,MAApC,CAA4C,CAC1C,GAAMC,CAAAA,YAAY,CAAGF,QAAQ,CAACC,MAAT,CAAkB,CAAvC,CACAlC,wBAAwB,CAACiC,QAAQ,CAACE,YAAD,CAAR,CAAuB1B,KAAxB,CAAxB,CACAb,gBAAgB,CAACqC,QAAQ,CAACE,YAAD,CAAR,CAAuB1B,KAAxB,CAAhB,CACA,GAAIwB,QAAQ,CAACE,YAAD,CAAR,CAAuBC,oBAAvB,GAAgD,EAApD,CAAwD,CACtDlB,KAAK,WACA9C,eADA,sCAC4C6B,EAD5C,mBAEH,CACEkB,MAAM,CAAE,OADV,CAEEC,OAAO,CAAE,CACPC,MAAM,CAAE,8BADD,CAEP,eAAgB,gCAFT,CAGPC,aAAa,CAAE,UAAYpB,KAHpB,CAFX,CAOEW,IAAI,CAAEU,IAAI,CAACC,SAAL,CAAe,CACnBa,cAAc,CAAEJ,QAAQ,CAACE,YAAD,CAAR,CAAuB1B,KADpB,CAAf,CAPR,CAFG,CAAL,CAcGiB,IAdH,CAcQ,SAACC,OAAD,CAAa,CACjB,GAAIA,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CAC1BvD,KAAK,CAACwD,OAAN,CAAc,sBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALD,IAKO,IAAIH,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CACjCvD,KAAK,CAACwD,OAAN,CAAc,sBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALM,IAKA,CACLzD,KAAK,CAACQ,KAAN,CAAY,uBAAZ,EACD,CACD;AACD,CA7BH,EA8BGkD,KA9BH,CA8BS,SAAClD,KAAD,QAAWyD,CAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqB1D,KAArB,CAAX,EA9BT,EA+BD,CAhCD,IAgCO,CACL6B,WAAW,GACZ,CACF,CAvCD,IAuCO,IAAI3B,aAAa,CAACmD,MAAd,CAAuBD,QAAQ,CAACC,MAApC,CAA4C,CACjD,GAAMM,CAAAA,oBAAoB,CAAGP,QAAQ,CAACQ,GAAT,CAAa,SAACC,CAAD,CAAO,CAC/C,MAAOA,CAAAA,CAAC,CAACjC,KAAT,CACD,CAF4B,CAA7B,CAGA;AACA,GAAMkC,CAAAA,aAAa,CAAG5D,aAAa,CAAC6D,MAAd,CAAqB,SAACF,CAAD,CAAO,CAChD,MAAO,CAACF,oBAAoB,CAACK,QAArB,CAA8BH,CAAC,CAACjC,KAAhC,CAAR,CACD,CAFqB,CAAtB,CAIAS,KAAK,WACA9C,eADA,sCAC4C6B,EAD5C,2BACgE0C,aAAa,CAAC,CAAD,CAAb,CAAiBlC,KADjF,EAEH,CACEU,MAAM,CAAE,QADV,CAEEC,OAAO,CAAE,CACPC,MAAM,CAAE,8BADD,CAEP,eAAgB,gCAFT,CAGPC,aAAa,CAAE,UAAYpB,KAHpB,CAFX,CAOEW,IAAI,CAAEU,IAAI,CAACC,SAAL,CAAe,EAAf,CAPR,CAFG,CAAL,CAYGE,IAZH,CAYQ,SAACC,OAAD,CAAa,CACjB,GAAIA,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CAC1BvD,KAAK,CAACwD,OAAN,CAAc,uBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALD,IAKO,IAAIH,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CACjCvD,KAAK,CAACwD,OAAN,CAAc,wBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALM,IAKA,CACLzD,KAAK,CAACQ,KAAN,CAAY,uBAAZ,EACD,CACF,CA1BH,EA2BGkD,KA3BH,CA2BS,SAAClD,KAAD,QAAWR,CAAAA,KAAK,CAACQ,KAAN,CAAY,uBAAZ,CAAX,EA3BT,EA4BD,CAEDG,gBAAgB,CAACiD,QAAD,CAAhB,CACD,CAhFD,CAkFA,GAAMa,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChC5B,KAAK,WAAI9C,eAAJ,sCAAgD6B,EAAhD,mBAAoE,CACvEkB,MAAM,CAAE,OAD+D,CAEvEC,OAAO,CAAE,CACPC,MAAM,CAAE,8BADD,CAEP,eAAgB,gCAFT,CAGPC,aAAa,CAAE,UAAYpB,KAHpB,CAF8D,CAOvEW,IAAI,CAAEU,IAAI,CAACC,SAAL,CAAe,CACnBa,cAAc,CAAE1C,aADG,CAAf,CAPiE,CAApE,CAAL,CAWG+B,IAXH,CAWQ,SAACC,OAAD,CAAa,CACjB,GAAIA,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CAC1BvD,KAAK,CAACwD,OAAN,CAAc,sBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALD,IAKO,IAAIH,OAAO,CAACC,MAAR,GAAmB,GAAvB,CAA4B,CACjCvD,KAAK,CAACwD,OAAN,CAAc,sBAAd,EACAjD,WAAW,CAACkD,iBAAZ,CAA8B,sBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,wBAA9B,EACAlD,WAAW,CAACkD,iBAAZ,CAA8B,iBAA9B,EACD,CALM,IAKA,CACLzD,KAAK,CAACQ,KAAN,CAAY,uBAAZ,EACD,CACDK,eAAe,CAAC,KAAD,CAAf,CACD,CA1BH,EA2BG6C,KA3BH,CA2BS,SAAClD,KAAD,QAAWR,CAAAA,KAAK,CAACQ,KAAN,CAAY,uBAAZ,CAAX,EA3BT,EA6BAO,gBAAgB,CAAC,KAAD,CAAhB,CACD,CA/BD,CAiCA;AACA,GAAM2D,CAAAA,YAAY,CAAGvE,QAAQ,CAAC,CAAC,iBAAD,CAAoByB,EAApB,CAAD,CAA0B,iBACrD3B,CAAAA,kBAAkB,CAAC4B,KAAD,CAAQD,EAAR,CADmC,EAA1B,CAA7B,CAGA,GAAM+C,CAAAA,kBAAkB,CAAGD,YAAY,CAACE,IAAxC,CACA;AACA,GAAMC,CAAAA,cAAc,0FAAG,mIACrBxD,qBAAqB,CAACsD,kBAAkB,CAACvB,IAApB,CAArB,CACAnC,iBAAiB,CAAC0D,kBAAkB,CAACvB,IAApB,CAAjB,CAFqB,sDAAH,kBAAdyB,CAAAA,cAAc,0CAApB,CAKA;AACA,GAAMC,CAAAA,oBAAoB,CAAG3E,QAAQ,CAAC,CAAC,wBAAD,CAA2ByB,EAA3B,CAAD,CAAiC,iBACpEvB,CAAAA,yBAAyB,CAACwB,KAAD,CAAQD,EAAR,CAD2C,EAAjC,CAArC,CAGA,GAAMmD,CAAAA,0BAA0B,CAAGD,oBAAoB,CAACF,IAAxD,CAEA;AACA,GAAMI,CAAAA,sBAAsB,2FAAG,qJACvBC,QADuB,CACZF,0BAA0B,CAACH,IAA3B,CAAgCR,GAAhC,CAAoC,SAACc,OAAD,CAAa,CAChE,MAAO,CACLC,KAAK,CAAED,OAAO,CAACE,IADV,CAELhD,KAAK,CAAE8C,OAAO,CAACtD,EAFV,CAAP,CAID,CALgB,CADY,CAO7BjB,gBAAgB,CAACsE,QAAD,CAAhB,CACA9D,mBAAmB,CAAC8D,QAAD,CAAnB,CAR6B,wDAAH,kBAAtBD,CAAAA,sBAAsB,2CAA5B,CAWA;AACA,GAAMK,CAAAA,wBAAwB,CAAGlF,QAAQ,CAAC,CAAC,sBAAD,CAAyByB,EAAzB,CAAD,CAA+B,iBACtExB,CAAAA,uBAAuB,CAACyB,KAAD,CAAQD,EAAR,CAD+C,EAA/B,CAAzC,CAGA,GAAM0D,CAAAA,8BAA8B,CAAGD,wBAAwB,CAACT,IAAhE,CACA,GAAMW,CAAAA,SAAS,CAAGF,wBAAwB,CAACE,SAA3C,CACA;AACA,GAAMC,CAAAA,qBAAqB,2FAAG,qJACtBP,QADsB,CACXK,8BAA8B,CAACV,IAA/B,CAAoCR,GAApC,CAAwC,SAACc,OAAD,CAAa,CACpE,MAAO,CACLC,KAAK,CAAED,OAAO,CAACE,IADV,CAELhD,KAAK,CAAE8C,OAAO,CAACtD,EAFV,CAGL6D,QAAQ,CAAEP,OAAO,CAACO,QAHb,CAAP,CAKD,CANgB,CADW,CAS5BtE,mBAAmB,CAAC8D,QAAD,CAAnB,CAT4B,wDAAH,kBAArBO,CAAAA,qBAAqB,2CAA3B,CAYA5F,SAAS,CAAC,UAAM,CACd,wDAAC,qJACC+E,kBADD,kEAC8BE,CAAAA,cAAc,EAD5C,qBAECE,0BAFD,kEAEsCC,CAAAA,sBAAsB,EAF5D,qBAGCM,8BAHD,oEAG0CE,CAAAA,qBAAqB,EAH/D,0DAAD,KAKD,CANQ,CAMN,CACDb,kBADC,CAEDI,0BAFC,CAGDO,8BAHC,CANM,CAAT,CAYA,MAAO,CACL9E,KAAK,CAALA,KADK,CAELC,QAAQ,CAARA,QAFK,CAGLC,aAAa,CAAbA,aAHK,CAILC,gBAAgB,CAAhBA,gBAJK,CAKLC,YAAY,CAAZA,YALK,CAMLC,eAAe,CAAfA,eANK,CAOLC,aAAa,CAAbA,aAPK,CAQLC,gBAAgB,CAAhBA,gBARK,CASLwE,SAAS,CAATA,SATK,CAULvE,cAAc,CAAdA,cAVK,CAWLC,iBAAiB,CAAjBA,iBAXK,CAYLC,gBAAgB,CAAhBA,gBAZK,CAaLC,mBAAmB,CAAnBA,mBAbK,CAcLC,kBAAkB,CAAlBA,kBAdK,CAeLC,qBAAqB,CAArBA,qBAfK,CAgBLC,aAAa,CAAbA,aAhBK,CAiBLC,gBAAgB,CAAhBA,gBAjBK,CAkBLC,MAAM,CAANA,MAlBK,CAmBLC,SAAS,CAATA,SAnBK,CAoBLC,qBAAqB,CAArBA,qBApBK,CAqBLC,wBAAwB,CAAxBA,wBArBK,CAsBLiB,wBAAwB,CAAxBA,wBAtBK,CAuBLZ,gBAAgB,CAAhBA,gBAvBK,CAwBL2B,WAAW,CAAXA,WAxBK,CAyBLtB,WAAW,CAAXA,WAzBK,CA0BLM,UAAU,CAAVA,UA1BK,CA2BL8B,mBAAmB,CAAnBA,mBA3BK,CA4BLI,cAAc,CAAdA,cA5BK,CA6BLG,sBAAsB,CAAtBA,sBA7BK,CA8BLQ,qBAAqB,CAArBA,qBA9BK,CAAP,CAgCD,CAjRD,CAmRA,cAAelF,CAAAA,iBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { DIOM_BASED_URLS } from \"../../../../config/url\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getCategoryDetails } from \"../../../../APIS/categories\";\r\nimport { useQueryClient, useQuery } from \"react-query\";\r\nimport { getResourcetypeDropdown } from \"../../../../APIS/categories\";\r\nimport { getCategoryDetaildropdown } from \"../../../../APIS/categories\";\r\n\r\nconst UseCategoryDetail = () => {\r\n  const QueryClient = useQueryClient();\r\n  const [error, setError] = useState(null);\r\n  const [selectedMulti, setSelectedMulti] = useState([]);\r\n  const [modal_static, setModal_static] = useState(false);\r\n  const [modal_static1, setModal_static1] = useState(false);\r\n  const [categoryDetail, setCategoryDetail] = useState();\r\n  const [categoryDropDown, setCategoryDropDown] = useState([]);\r\n  const [categoryDetailname, setCategoryDetailname] = useState();\r\n  const [selectedvalue, setSelectedvalue] = useState();\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [selectedValueForDelte, setSelectedValueForDelte] = useState();\r\n\r\n  const { id } = useParams();\r\n  const token = localStorage.getItem(\"Token\");\r\n\r\n  const OnChangeCategory = (event) => {\r\n    setCategoryDetail((prev) => event.target.value);\r\n  };\r\n\r\n  const tog_static1 = () => {\r\n    setModal_static1(!modal_static1);\r\n\r\n    removeBodyCss();\r\n  };\r\n\r\n  const removeBodyCss = () => {\r\n    document.body.classList.add(\"no_padding\");\r\n  };\r\n  const tog_static = () => {\r\n    setModal_static(!modal_static);\r\n\r\n    removeBodyCss();\r\n  };\r\n\r\n  const updateNameAndDescription = () => {\r\n    fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        name: categoryDetail,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  };\r\n\r\n  const handleMulti = (selected) => {\r\n    if (selectedMulti.length < selected.length) {\r\n      const lenthOFAdded = selected.length - 1;\r\n      setSelectedValueForDelte(selected[lenthOFAdded].value);\r\n      setSelectedvalue(selected[lenthOFAdded].value);\r\n      if (selected[lenthOFAdded].locationCategoriesId === \"\") {\r\n        fetch(\r\n          `${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes`,\r\n          {\r\n            method: \"PATCH\",\r\n            headers: {\r\n              Accept: \"application/json, text/plain\",\r\n              \"Content-Type\": \"application/json;charset=UTF-8\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n            body: JSON.stringify({\r\n              resourceTypeId: selected[lenthOFAdded].value,\r\n            }),\r\n          }\r\n        )\r\n          .then((result3) => {\r\n            if (result3.status === 200) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetails\");\r\n            } else if (result3.status === 204) {\r\n              toast.success(\"Updated Successfully\");\r\n              QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n              QueryClient.invalidateQueries(\"categpryDetails\");\r\n            } else {\r\n              toast.error(\" Something went wrong\");\r\n            }\r\n            // setModal_static(false);\r\n          })\r\n          .catch((error) => console.log(\"error\", error));\r\n      } else {\r\n        tog_static1();\r\n      }\r\n    } else if (selectedMulti.length > selected.length) {\r\n      const mappedValuedSelected = selected.map((e) => {\r\n        return e.value;\r\n      });\r\n      // const mappedValuedMultiSelected = selectedMulti.map((e) => {return ( e.value) })\r\n      const filteredValue = selectedMulti.filter((e) => {\r\n        return !mappedValuedSelected.includes(e.value);\r\n      });\r\n\r\n      fetch(\r\n        `${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes/${filteredValue[0].value}`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Accept: \"application/json, text/plain\",\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n          body: JSON.stringify({}),\r\n        }\r\n      )\r\n        .then((result3) => {\r\n          if (result3.status === 200) {\r\n            toast.success(\" Successfully Deleted\");\r\n            QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetails\");\r\n          } else if (result3.status === 204) {\r\n            toast.success(\" Successfullyn Deleted\");\r\n            QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n            QueryClient.invalidateQueries(\"categpryDetails\");\r\n          } else {\r\n            toast.error(\" Something went wrong\");\r\n          }\r\n        })\r\n        .catch((error) => toast.error(\" Something went wrong\"));\r\n    }\r\n\r\n    setSelectedMulti(selected);\r\n  };\r\n\r\n  const FetchbrandLocations = () => {\r\n    fetch(`${DIOM_BASED_URLS}/resource-type-categories/${id}/resourcetypes`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        resourceTypeId: selectedvalue,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        if (result3.status === 200) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else if (result3.status === 204) {\r\n          toast.success(\"Updated Successfully\");\r\n          QueryClient.invalidateQueries(\"resourceTypedropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetaildropdown\");\r\n          QueryClient.invalidateQueries(\"categpryDetails\");\r\n        } else {\r\n          toast.error(\" Something went wrong\");\r\n        }\r\n        setModal_static(false);\r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n    setModal_static1(false);\r\n  };\r\n\r\n  // *************\r\n  const categoryData = useQuery([\"categpryDetails\", id], () =>\r\n    getCategoryDetails(token, id)\r\n  );\r\n  const categoryDailedData = categoryData.data;\r\n  // *************\r\n  const CategoryDetail = async () => {\r\n    setCategoryDetailname(categoryDailedData.name);\r\n    setCategoryDetail(categoryDailedData.name);\r\n  };\r\n\r\n  // *************\r\n  const categorydropdownData = useQuery([\"categpryDetaildropdown\", id], () =>\r\n    getCategoryDetaildropdown(token, id)\r\n  );\r\n  const categorydropdownDailedData = categorydropdownData.data;\r\n\r\n  // *************\r\n  const CategoryDetaildropdown = async () => {\r\n    const matadata = categorydropdownDailedData.data.map((element) => {\r\n      return {\r\n        label: element.Name,\r\n        value: element.id,\r\n      };\r\n    });\r\n    setSelectedMulti(matadata);\r\n    setCategoryDropDown(matadata);\r\n  };\r\n\r\n  // *************\r\n  const resourceTypedropdownData = useQuery([\"resourceTypedropdown\", id], () =>\r\n    getResourcetypeDropdown(token, id)\r\n  );\r\n  const resourceTypedropdownDailedData = resourceTypedropdownData.data;\r\n  const isLoading = resourceTypedropdownData.isLoading;\r\n  // *************\r\n  const Resourcetypesdropdown = async () => {\r\n    const matadata = resourceTypedropdownDailedData.data.map((element) => {\r\n      return {\r\n        label: element.Name,\r\n        value: element.id,\r\n        UniqueId: element.UniqueId,\r\n      };\r\n    });\r\n\r\n    setCategoryDropDown(matadata);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      categoryDailedData && (await CategoryDetail());\r\n      categorydropdownDailedData && (await CategoryDetaildropdown());\r\n      resourceTypedropdownDailedData && (await Resourcetypesdropdown());\r\n    })();\r\n  }, [\r\n    categoryDailedData,\r\n    categorydropdownDailedData,\r\n    resourceTypedropdownDailedData,\r\n  ]);\r\n\r\n  return {\r\n    error,\r\n    setError,\r\n    selectedMulti,\r\n    setSelectedMulti,\r\n    modal_static,\r\n    setModal_static,\r\n    modal_static1,\r\n    setModal_static1,\r\n    isLoading,\r\n    categoryDetail,\r\n    setCategoryDetail,\r\n    categoryDropDown,\r\n    setCategoryDropDown,\r\n    categoryDetailname,\r\n    setCategoryDetailname,\r\n    selectedvalue,\r\n    setSelectedvalue,\r\n    loaded,\r\n    setLoaded,\r\n    selectedValueForDelte,\r\n    setSelectedValueForDelte,\r\n    updateNameAndDescription,\r\n    OnChangeCategory,\r\n    handleMulti,\r\n    tog_static1,\r\n    tog_static,\r\n    FetchbrandLocations,\r\n    CategoryDetail,\r\n    CategoryDetaildropdown,\r\n    Resourcetypesdropdown,\r\n  };\r\n};\r\n\r\nexport default UseCategoryDetail;\r\n"]},"metadata":{},"sourceType":"module"}