{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/tech sign/Desktop/xyz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{DIOM_BASED_URLS}from\"../config/url\";import moment from\"moment\";/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */export var getFloorplans=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var size,page,token,history,res,_resJson,resJson,floorPlansData,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:size=_args.length>0&&_args[0]!==undefined?_args[0]:30;page=_args.length>1&&_args[1]!==undefined?_args[1]:1;token=_args.length>2&&_args[2]!==undefined?_args[2]:\"\";history=_args.length>3?_args[3]:undefined;_context.next=6;return fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations?filter={\\\"where\\\":{\\\"visibility\\\":true}}\"),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 6:res=_context.sent;if(res.ok){_context.next=15;break;}if(!(res.status===401)){_context.next=11;break;}history.push(\"/login\");throw new Error(_resJson.error.message);case 11:_context.next=13;return res.json();case 13:_resJson=_context.sent;throw new Error(_resJson.error.message);case 15:_context.next=17;return res.json();case 17:resJson=_context.sent;floorPlansData=resJson.map(function(e,index){return _objectSpread(_objectSpread({},e),{},{name:e.Name,id:index+1,floorid:e.id});});return _context.abrupt(\"return\",{data:floorPlansData,total:resJson.total,hasNextPage:resJson.hasNextPage,hasPreviousPage:resJson.hasPreviousPage});case 20:case\"end\":return _context.stop();}}},_callee);}));return function getFloorplans(){return _ref.apply(this,arguments);};}();/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a floor plan names in DIOM\r\n */export var getFloorPlansNames=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var token,floorid,history,res,resJson,data,_args2=arguments;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=_args2.length>0&&_args2[0]!==undefined?_args2[0]:\"\";floorid=_args2.length>1?_args2[1]:undefined;history=_args2.length>2?_args2[2]:undefined;_context2.next=5;return fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-business-locations/\").concat(floorid),{method:\"GET\",redirect:\"follow\",headers:{Authorization:\"Bearer \"+token}});case 5:res=_context2.sent;if(res.ok){_context2.next=14;break;}if(!(res.status===401)){_context2.next=10;break;}history.push(\"/login\");throw new Error(resJson.error.message);case 10:_context2.next=12;return res.json();case 12:resJson=_context2.sent;throw new Error(resJson.error.message);case 14:_context2.next=16;return res.json();case 16:data=_context2.sent;return _context2.abrupt(\"return\",{data:data});case 18:case\"end\":return _context2.stop();}}},_callee2);}));return function getFloorPlansNames(){return _ref2.apply(this,arguments);};}();","map":{"version":3,"names":["DIOM_BASED_URLS","moment","getFloorplans","size","page","token","history","fetch","method","redirect","headers","Authorization","res","ok","status","push","Error","resJson","error","message","json","floorPlansData","map","e","index","name","Name","id","floorid","data","total","hasNextPage","hasPreviousPage","getFloorPlansNames"],"sources":["C:/Users/tech sign/Desktop/xyz/src/APIS/floorplans.js"],"sourcesContent":["import { DIOM_BASED_URLS } from \"../config/url\";\r\nimport moment from \"moment\";\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a list of all resource in DIOM\r\n */\r\n\r\nexport const getFloorplans = async (size = 30, page = 1, token = \"\",history) => {\r\n  const res = await fetch(\r\n    `${DIOM_BASED_URLS}/admin-business-locations?filter={\"where\":{\"visibility\":true}}`,\r\n\r\n    {\r\n      method: \"GET\",\r\n      redirect: \"follow\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    }\r\n  );\r\n  if (!res.ok) {\r\n    if(res.status === 401){\r\n      history.push(\"/login\");\r\n      throw new Error(resJson.error.message);\r\n   \r\n  }\r\n    const resJson = await res.json();\r\n    throw new Error(resJson.error.message);\r\n  }\r\n  const resJson = await res.json();\r\n\r\n  const floorPlansData = resJson.map((e, index) => ({\r\n    ...e,\r\n    name: e.Name,\r\n    id: index + 1,\r\n    floorid: e.id,\r\n  }));\r\n\r\n  return {\r\n    data: floorPlansData,\r\n    total: resJson.total,\r\n    hasNextPage: resJson.hasNextPage,\r\n    hasPreviousPage: resJson.hasPreviousPage,\r\n  };\r\n};\r\n\r\n/**\r\n *\r\n * @param size\r\n * @param page\r\n * @param {JWT} token\r\n * @returns a floor plan names in DIOM\r\n */\r\n\r\nexport const getFloorPlansNames = async (token = \"\", floorid,history) => {\r\n  // return await (\r\n    const res =  await fetch(\r\n      `${DIOM_BASED_URLS}/admin-business-locations/${floorid}`,\r\n      {\r\n        method: \"GET\",\r\n        redirect: \"follow\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      }\r\n    )\r\n    if (!res.ok) {\r\n      if(res.status === 401){\r\n        history.push(\"/login\");\r\n        throw new Error(resJson.error.message);\r\n     \r\n    }\r\n      const resJson = await res.json();\r\n      throw new Error(resJson.error.message);\r\n    }\r\n    const data = await res.json();\r\n    \r\n    return {\r\n      data\r\n    };\r\n  // ).json();\r\n};\r\n"],"mappings":"2WAAA,OAASA,eAAT,KAAgC,eAAhC,CACA,MAAOC,OAAP,KAAmB,QAAnB,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,MAAO,IAAMC,cAAa,4FAAG,qNAAOC,IAAP,+CAAc,EAAd,CAAkBC,IAAlB,+CAAyB,CAAzB,CAA4BC,KAA5B,+CAAoC,EAApC,CAAuCC,OAAvC,yDACTC,MAAK,WAClBP,eADkB,uEAGrB,CACEQ,MAAM,CAAE,KADV,CAEEC,QAAQ,CAAE,QAFZ,CAGEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYN,KADpB,CAHX,CAHqB,CADI,QACrBO,GADqB,kBAYtBA,GAAG,CAACC,EAZkB,+BAatBD,GAAG,CAACE,MAAJ,GAAe,GAbO,2BAcvBR,OAAO,CAACS,IAAR,CAAa,QAAb,EAduB,KAejB,IAAIC,MAAJ,CAAUC,QAAO,CAACC,KAAR,CAAcC,OAAxB,CAfiB,gCAkBHP,IAAG,CAACQ,IAAJ,EAlBG,SAkBnBH,QAlBmB,oBAmBnB,IAAID,MAAJ,CAAUC,QAAO,CAACC,KAAR,CAAcC,OAAxB,CAnBmB,gCAqBLP,IAAG,CAACQ,IAAJ,EArBK,SAqBrBH,OArBqB,eAuBrBI,cAvBqB,CAuBJJ,OAAO,CAACK,GAAR,CAAY,SAACC,CAAD,CAAIC,KAAJ,wCAC9BD,CAD8B,MAEjCE,IAAI,CAAEF,CAAC,CAACG,IAFyB,CAGjCC,EAAE,CAAEH,KAAK,CAAG,CAHqB,CAIjCI,OAAO,CAAEL,CAAC,CAACI,EAJsB,IAAZ,CAvBI,iCA8BpB,CACLE,IAAI,CAAER,cADD,CAELS,KAAK,CAAEb,OAAO,CAACa,KAFV,CAGLC,WAAW,CAAEd,OAAO,CAACc,WAHhB,CAILC,eAAe,CAAEf,OAAO,CAACe,eAJpB,CA9BoB,yDAAH,kBAAb9B,cAAa,0CAAnB,CAsCP;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,MAAO,IAAM+B,mBAAkB,6FAAG,sMAAO5B,KAAP,kDAAe,EAAf,CAAmBuB,OAAnB,qCAA2BtB,OAA3B,4DAEXC,MAAK,WACnBP,eADmB,sCACyB4B,OADzB,EAEtB,CACEpB,MAAM,CAAE,KADV,CAEEC,QAAQ,CAAE,QAFZ,CAGEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYN,KADpB,CAHX,CAFsB,CAFM,QAExBO,GAFwB,mBAYzBA,GAAG,CAACC,EAZqB,gCAazBD,GAAG,CAACE,MAAJ,GAAe,GAbU,4BAc1BR,OAAO,CAACS,IAAR,CAAa,QAAb,EAd0B,KAepB,IAAIC,MAAJ,CAAUC,OAAO,CAACC,KAAR,CAAcC,OAAxB,CAfoB,iCAkBNP,IAAG,CAACQ,IAAJ,EAlBM,SAkBtBH,OAlBsB,qBAmBtB,IAAID,MAAJ,CAAUC,OAAO,CAACC,KAAR,CAAcC,OAAxB,CAnBsB,iCAqBXP,IAAG,CAACQ,IAAJ,EArBW,SAqBxBS,IArBwB,iDAuBvB,CACLA,IAAI,CAAJA,IADK,CAvBuB,2DAAH,kBAAlBI,mBAAkB,2CAAxB"},"metadata":{},"sourceType":"module"}