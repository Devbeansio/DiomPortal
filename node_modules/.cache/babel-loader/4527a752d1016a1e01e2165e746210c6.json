{"ast":null,"code":"import _slicedToArray from\"C:/Users/tech sign/Desktop/diom (1)/diom/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useQueryClient}from\"react-query\";import{useAllDataQuery,usePaginatedQuery}from\"../../hooks/query\";import{getLocationBrand,getsearchedLocationListing}from\"../../APIS\";import{getLocationListing}from\"../../APIS\";export var useLocationsListing=function useLocationsListing(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var token=localStorage.getItem(\"Token\");var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(50),_useState6=_slicedToArray(_useState5,2),pageSize=_useState6[0],setPageSize=_useState6[1];var changeCurrentPage=function changeCurrentPage(pageNum){return setCurrentPage(pageNum);};var queryClient=useQueryClient();var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),applyLocationFilter=_useState8[0],setApplyFilter=_useState8[1];var _useState9=useState(\"All\"),_useState10=_slicedToArray(_useState9,2),filter=_useState10[0],setFilter=_useState10[1];var _usePaginatedQuery=usePaginatedQuery([\"locations\",currentPage,filter],function(){return getLocationListing(pageSize,currentPage,token,applyLocationFilter,filter);}),_usePaginatedQuery$da=_usePaginatedQuery.data,locationLisitngData=_usePaginatedQuery$da.data,hasNextPage=_usePaginatedQuery$da.hasNextPage,hasPreviousPage=_usePaginatedQuery$da.hasPreviousPage,total=_usePaginatedQuery$da.total,isLoading=_usePaginatedQuery.isLoading;var _usePaginatedQuery2=usePaginatedQuery([\"searchedlocations\"],function(){return getsearchedLocationListing(token);}),searchedlocationLisitngData=_usePaginatedQuery2.data.data;var _useAllDataQuery=useAllDataQuery([\"locationbrandData\",\"visible\"],function(){return getLocationBrand(token);}),locationsData=_useAllDataQuery.data,loadingLocations=_useAllDataQuery.isLoading;var brandData=locationsData;var toggle=function toggle(){setIsOpen(!isOpen);};var pagelengthnum=function pagelengthnum(e){if(e.target.value===\"1\"){setPageSize(10);}else if(e.target.value===\"2\"){setPageSize(30);}else if(e.target.value===\"3\"){setPageSize(50);}};var pageOptions={sizePerPage:pageSize,totalSize:total!==null&&total!==void 0?total:0,custom:true};var handeldiomlocation=function handeldiomlocation(val){if(val===\"All\"){setCurrentPage(1);setApplyFilter(false);setFilter(\"All\");}else{setCurrentPage(1);setApplyFilter(true);setFilter(\"{\\\"locationCategoriesId\\\":\\\"\".concat(val,\"\\\"}\"));}};useEffect(function(){// FOR PRE-FETCHING NEXT PAGE\nif(hasNextPage){var nextPage=currentPage+1;queryClient.prefetchQuery([\"locations\",nextPage,filter],function(){return getLocationListing(pageSize,nextPage,token);});}},[currentPage,queryClient,filter]);return{currentPage:currentPage,pageOptions:pageOptions,locationLisitngData:locationLisitngData,hasNextPage:hasNextPage,hasPreviousPage:hasPreviousPage,total:total,locationsData:locationsData,loadingLocations:loadingLocations,isLoading:isLoading,pagelengthnum:pagelengthnum,pageSize:pageSize,brandData:brandData,toggle:toggle,isOpen:isOpen,handeldiomlocation:handeldiomlocation,changeCurrentPage:changeCurrentPage,filter:filter,searchedlocationLisitngData:searchedlocationLisitngData};};","map":{"version":3,"sources":["C:/Users/tech sign/Desktop/diom (1)/diom/src/pages/Locations/useLocations.js"],"names":["useEffect","useState","useQueryClient","useAllDataQuery","usePaginatedQuery","getLocationBrand","getsearchedLocationListing","getLocationListing","useLocationsListing","isOpen","setIsOpen","token","localStorage","getItem","currentPage","setCurrentPage","pageSize","setPageSize","changeCurrentPage","pageNum","queryClient","applyLocationFilter","setApplyFilter","filter","setFilter","data","locationLisitngData","hasNextPage","hasPreviousPage","total","isLoading","searchedlocationLisitngData","locationsData","loadingLocations","brandData","toggle","pagelengthnum","e","target","value","pageOptions","sizePerPage","totalSize","custom","handeldiomlocation","val","nextPage","prefetchQuery"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { useAllDataQuery, usePaginatedQuery } from \"../../hooks/query\";\r\nimport { getLocationBrand, getsearchedLocationListing } from \"../../APIS\";\r\nimport { getLocationListing } from \"../../APIS\";\r\nexport const useLocationsListing = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const changeCurrentPage = (pageNum) => setCurrentPage(pageNum);\r\n  const queryClient = useQueryClient();\r\n  const [applyLocationFilter, setApplyFilter] = useState(false);\r\n  const [filter, setFilter] = useState(\"All\");\r\n\r\n  const {\r\n    data: { data: locationLisitngData, hasNextPage, hasPreviousPage, total },\r\n    isLoading,\r\n  } = usePaginatedQuery([\"locations\", currentPage, filter], () =>\r\n    getLocationListing(\r\n      pageSize,\r\n      currentPage,\r\n      token,\r\n      applyLocationFilter,\r\n      filter\r\n    )\r\n  );\r\n\r\n  const {\r\n    data: { data: searchedlocationLisitngData },\r\n  } = usePaginatedQuery([\"searchedlocations\"], () =>\r\n    getsearchedLocationListing(token)\r\n  );\r\n\r\n  const { data: locationsData, isLoading: loadingLocations } = useAllDataQuery(\r\n    [\"locationbrandData\", \"visible\"],\r\n    () => getLocationBrand(token)\r\n  );\r\n  const brandData = locationsData;\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n  const pagelengthnum = (e) => {\r\n    if (e.target.value === \"1\") {\r\n      setPageSize(10);\r\n    } else if (e.target.value === \"2\") {\r\n      setPageSize(30);\r\n    } else if (e.target.value === \"3\") {\r\n      setPageSize(50);\r\n    }\r\n  };\r\n\r\n  const pageOptions = {\r\n    sizePerPage: pageSize,\r\n    totalSize: total ?? 0,\r\n    custom: true,\r\n  };\r\n\r\n  const handeldiomlocation = (val) => {\r\n    if (val === \"All\") {\r\n      setCurrentPage(1);\r\n      setApplyFilter(false);\r\n      setFilter(\"All\");\r\n    } else {\r\n      setCurrentPage(1);\r\n      setApplyFilter(true);\r\n      setFilter(`{\"locationCategoriesId\":\"${val}\"}`);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    // FOR PRE-FETCHING NEXT PAGE\r\n\r\n    if (hasNextPage) {\r\n      const nextPage = currentPage + 1;\r\n      queryClient.prefetchQuery([\"locations\", nextPage, filter], () =>\r\n        getLocationListing(pageSize, nextPage, token)\r\n      );\r\n    }\r\n  }, [currentPage, queryClient, filter]);\r\n\r\n  return {\r\n    currentPage,\r\n    pageOptions,\r\n    locationLisitngData,\r\n    hasNextPage,\r\n    hasPreviousPage,\r\n    total,\r\n    locationsData,\r\n    loadingLocations,\r\n    isLoading,\r\n    pagelengthnum,\r\n    pageSize,\r\n    brandData,\r\n    toggle,\r\n    isOpen,\r\n    handeldiomlocation,\r\n    changeCurrentPage,\r\n    filter,\r\n    searchedlocationLisitngData,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}