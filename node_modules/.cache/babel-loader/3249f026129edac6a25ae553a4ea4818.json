{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { getAdminNotifications } from \"../../APIS/notifications\";\nimport { DIOM_BASED_URLS } from \"../../config/url\";\nimport { useQueryClient } from \"react-query\";\nimport { toast } from \"react-toastify\";\n\nfunction UseNotifications() {\n  _s();\n\n  const [pageNumber, setPageNumber] = setState(1);\n  const token = localStorage.getItem(\"Token\");\n  const QueryClient = useQueryClient();\n\n  const markAllReadFunc = () => {\n    fetch(`${DIOM_BASED_URLS}/admin-notifications`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        markRead: true\n      })\n    }).then(result3 => {\n      QueryClient.invalidateQueries(\"adminNotifications\");\n    }).catch(error => toast.error(\" Something went wrong\"));\n  };\n\n  const notificationSeenFunc = e => {\n    fetch(`${DIOM_BASED_URLS}/admin-notifications/${e.id}`, {\n      method: \"PATCH\",\n      headers: {\n        Accept: \"application/json, text/plain\",\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        Authorization: \"Bearer \" + token\n      },\n      body: JSON.stringify({\n        markRead: true\n      })\n    }).then(result3 => {\n      QueryClient.invalidateQueries(\"adminNotifications\");\n    }).catch(error => toast.error(\" Something went wrong\"));\n  }; // *************\n\n\n  const fetchMoreData = () => {\n    // setTimeout(() => {\n    //   this.setState({\n    //     // items: this.state.items.concat(Array.from({ length: 5 }))\n    //   });\n    // }, 1500);\n    setPageNumber(pageNumber + 1);\n  };\n\n  const adminNotificationsdata = useQuery([\"adminNotifications\", pageNumber], () => getAdminNotifications(token, pageNumber));\n  const hasMore = adminNotificationsdata.hasNextPage;\n  const adminNotificationdata = adminNotificationsdata.data; // *************\n\n  return {\n    adminNotificationdata,\n    notificationSeenFunc,\n    markAllReadFunc,\n    hasMore,\n    fetchMoreData\n  };\n}\n\n_s(UseNotifications, \"2v5msc9f9VyMbqLY18RYa9MsX9Q=\", false, function () {\n  return [useQueryClient, useQuery];\n});\n\n_c = UseNotifications;\nexport default UseNotifications;\n\nvar _c;\n\n$RefreshReg$(_c, \"UseNotifications\");","map":{"version":3,"sources":["D:/diom working project/staging/src/pages/Notifications/useNotifications.js"],"names":["React","useState","useQuery","getAdminNotifications","DIOM_BASED_URLS","useQueryClient","toast","UseNotifications","pageNumber","setPageNumber","setState","token","localStorage","getItem","QueryClient","markAllReadFunc","fetch","method","headers","Accept","Authorization","body","JSON","stringify","markRead","then","result3","invalidateQueries","catch","error","notificationSeenFunc","e","id","fetchMoreData","adminNotificationsdata","hasMore","hasNextPage","adminNotificationdata","data"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,QAAd,QAA6B,OAA7B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,qBAAT,QAAsC,0BAAtC;AACA,SAASC,eAAT,QAAgC,kBAAhC;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,SAASC,gBAAT,GAA4B;AAAA;;AAC1B,QAAK,CAACC,UAAD,EAAYC,aAAZ,IAA6BC,QAAQ,CAAC,CAAD,CAA1C;AACA,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,QAAMC,WAAW,GAAGT,cAAc,EAAlC;;AAKA,QAAMU,eAAe,GAAC,MAAI;AAExBC,IAAAA,KAAK,CAAE,GAAEZ,eAAgB,sBAApB,EAA2C;AAC9Ca,MAAAA,MAAM,EAAE,OADsC;AAE9CC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,8BADD;AAEP,wBAAgB,gCAFT;AAGPC,QAAAA,aAAa,EAAE,YAAYT;AAHpB,OAFqC;AAO9CU,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,QAAQ,EAAE;AADS,OAAf;AAPwC,KAA3C,CAAL,CAWGC,IAXH,CAWSC,OAAD,IAAa;AACjBZ,MAAAA,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B;AAGD,KAfH,EAgBGC,KAhBH,CAgBUC,KAAD,IAAWvB,KAAK,CAACuB,KAAN,CAAY,uBAAZ,CAhBpB;AAkBD,GApBD;;AAsBA,QAAMC,oBAAoB,GAAIC,CAAD,IAAK;AAKhCf,IAAAA,KAAK,CAAE,GAAEZ,eAAgB,wBAAuB2B,CAAC,CAACC,EAAG,EAAhD,EAAmD;AACtDf,MAAAA,MAAM,EAAE,OAD8C;AAEtDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,8BADD;AAEP,wBAAgB,gCAFT;AAGPC,QAAAA,aAAa,EAAE,YAAYT;AAHpB,OAF6C;AAOtDU,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,QAAQ,EAAE;AADS,OAAf;AAPgD,KAAnD,CAAL,CAWGC,IAXH,CAWSC,OAAD,IAAa;AACjBZ,MAAAA,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B;AAGD,KAfH,EAgBGC,KAhBH,CAgBUC,KAAD,IAAWvB,KAAK,CAACuB,KAAN,CAAY,uBAAZ,CAhBpB;AAiBD,GAtBD,CA9B0B,CAuD1B;;;AACA,QAAMI,aAAa,GAAC,MAAI;AACtB;AACA;AACA;AACA;AACA;AACAxB,IAAAA,aAAa,CAACD,UAAU,GAAG,CAAd,CAAb;AACD,GAPD;;AAQA,QAAM0B,sBAAsB,GAAGhC,QAAQ,CAAC,CAAC,oBAAD,EAAsBM,UAAtB,CAAD,EAAoC,MACzEL,qBAAqB,CAACQ,KAAD,EAAOH,UAAP,CADgB,CAAvC;AAGA,QAAM2B,OAAO,GAAGD,sBAAsB,CAACE,WAAvC;AACA,QAAMC,qBAAqB,GAAGH,sBAAsB,CAACI,IAArD,CApE0B,CAuE1B;;AAKA,SAAO;AAAED,IAAAA,qBAAF;AAAwBP,IAAAA,oBAAxB;AAA6Cf,IAAAA,eAA7C;AAA8DoB,IAAAA,OAA9D;AAAsEF,IAAAA;AAAtE,GAAP;AACD;;GA7EQ1B,gB;UAGaF,c,EA6DWH,Q;;;KAhExBK,gB;AA+ET,eAAeA,gBAAf","sourcesContent":["import React,{useState} from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getAdminNotifications } from \"../../APIS/notifications\";\r\nimport { DIOM_BASED_URLS } from \"../../config/url\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction UseNotifications() {\r\n  const[pageNumber,setPageNumber] = setState(1);\r\n  const token = localStorage.getItem(\"Token\");\r\n  const QueryClient = useQueryClient()\r\n\r\n\r\n\r\n\r\n  const markAllReadFunc=()=>{\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n  }\r\n\r\n  const notificationSeenFunc = (e)=>{\r\n   \r\n   \r\n\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications/${e.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  }\r\n\r\n\r\n  // *************\r\n  const fetchMoreData=()=>{\r\n    // setTimeout(() => {\r\n    //   this.setState({\r\n    //     // items: this.state.items.concat(Array.from({ length: 5 }))\r\n    //   });\r\n    // }, 1500);\r\n    setPageNumber(pageNumber + 1)\r\n  }\r\n  const adminNotificationsdata = useQuery([\"adminNotifications\",pageNumber], () =>\r\n    getAdminNotifications(token,pageNumber)\r\n  );\r\n  const hasMore = adminNotificationsdata.hasNextPage\r\n  const adminNotificationdata = adminNotificationsdata.data;\r\n \r\n\r\n  // *************\r\n\r\n\r\n\r\n\r\n  return { adminNotificationdata,notificationSeenFunc,markAllReadFunc ,hasMore,fetchMoreData};\r\n}\r\n\r\nexport default UseNotifications;\r\n"]},"metadata":{},"sourceType":"module"}