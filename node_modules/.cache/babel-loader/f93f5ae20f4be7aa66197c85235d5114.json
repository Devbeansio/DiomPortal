{"ast":null,"code":"import _slicedToArray from\"D:/diom working project/staging/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useQuery}from\"react-query\";import{getAdminNotifications}from\"../../APIS/notifications\";import{DIOM_BASED_URLS}from\"../../config/url\";import{useQueryClient}from\"react-query\";import{toast}from\"react-toastify\";function UseNotifications(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),pageNumber=_useState2[0],setPageNumber=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),adminNotificationdta=_useState4[0],setadminNotificationdta=_useState4[1];var token=localStorage.getItem(\"Token\");var QueryClient=useQueryClient();var markAllReadFunc=function markAllReadFunc(){fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-notifications\"),{method:\"PATCH\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({markRead:true})}).then(function(result3){QueryClient.invalidateQueries(\"adminNotifications\");}).catch(function(error){return toast.error(\" Something went wrong\");});};var notificationSeenFunc=function notificationSeenFunc(e){fetch(\"\".concat(DIOM_BASED_URLS,\"/admin-notifications/\").concat(e.id),{method:\"PATCH\",headers:{Accept:\"application/json, text/plain\",\"Content-Type\":\"application/json;charset=UTF-8\",Authorization:\"Bearer \"+token},body:JSON.stringify({markRead:true})}).then(function(result3){QueryClient.invalidateQueries(\"adminNotifications\");}).catch(function(error){return toast.error(\" Something went wrong\");});};// *************\nvar fetchMoreData=function fetchMoreData(){setPageNumber(pageNumber+1);};var adminNotificationsdata=useQuery([\"adminNotifications\",pageNumber],function(){return getAdminNotifications(token,pageNumber);},{refetchInterval:3000});// const adminNotificationsdata = adminNotificationdta?adminNotificationdta.concat(adminNotificationsdta):adminNotificationdta\n// setadminNotificationdta(adminNotificationsdta)\n// console.log(\"adminNotificationsdata : \",adminNotificationsdata)\nvar hasMore=adminNotificationsdata.hasNextPage;var adminNotificationdata=adminNotificationsdata.data;// *************\nreturn{adminNotificationdata:adminNotificationdata,notificationSeenFunc:notificationSeenFunc,markAllReadFunc:markAllReadFunc,hasMore:hasMore,fetchMoreData:fetchMoreData};}export default UseNotifications;","map":{"version":3,"sources":["D:/diom working project/staging/src/pages/Notifications/useNotifications.js"],"names":["React","useState","useQuery","getAdminNotifications","DIOM_BASED_URLS","useQueryClient","toast","UseNotifications","pageNumber","setPageNumber","adminNotificationdta","setadminNotificationdta","token","localStorage","getItem","QueryClient","markAllReadFunc","fetch","method","headers","Accept","Authorization","body","JSON","stringify","markRead","then","result3","invalidateQueries","catch","error","notificationSeenFunc","e","id","fetchMoreData","adminNotificationsdata","refetchInterval","hasMore","hasNextPage","adminNotificationdata","data"],"mappings":"qHAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,KAA6B,OAA7B,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,OAASC,qBAAT,KAAsC,0BAAtC,CACA,OAASC,eAAT,KAAgC,kBAAhC,CACA,OAASC,cAAT,KAA+B,aAA/B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,QAASC,CAAAA,gBAAT,EAA4B,CAC1B,cAAkCN,QAAQ,CAAC,CAAD,CAA1C,wCAAMO,UAAN,eAAiBC,aAAjB,eACA,eAAoDR,QAAQ,EAA5D,yCAAMS,oBAAN,eAA2BC,uBAA3B,eACA,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAMC,CAAAA,WAAW,CAAGV,cAAc,EAAlC,CAKA,GAAMW,CAAAA,eAAe,CAAC,QAAhBA,CAAAA,eAAgB,EAAI,CAExBC,KAAK,WAAIb,eAAJ,yBAA2C,CAC9Cc,MAAM,CAAE,OADsC,CAE9CC,OAAO,CAAE,CACPC,MAAM,CAAE,8BADD,CAEP,eAAgB,gCAFT,CAGPC,aAAa,CAAE,UAAYT,KAHpB,CAFqC,CAO9CU,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,QAAQ,CAAE,IADS,CAAf,CAPwC,CAA3C,CAAL,CAWGC,IAXH,CAWQ,SAACC,OAAD,CAAa,CACjBZ,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B,EAGD,CAfH,EAgBGC,KAhBH,CAgBS,SAACC,KAAD,QAAWxB,CAAAA,KAAK,CAACwB,KAAN,CAAY,uBAAZ,CAAX,EAhBT,EAkBD,CApBD,CAsBA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,CAAD,CAAK,CAKhCf,KAAK,WAAIb,eAAJ,iCAA2C4B,CAAC,CAACC,EAA7C,EAAmD,CACtDf,MAAM,CAAE,OAD8C,CAEtDC,OAAO,CAAE,CACPC,MAAM,CAAE,8BADD,CAEP,eAAgB,gCAFT,CAGPC,aAAa,CAAE,UAAYT,KAHpB,CAF6C,CAOtDU,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,QAAQ,CAAE,IADS,CAAf,CAPgD,CAAnD,CAAL,CAWGC,IAXH,CAWQ,SAACC,OAAD,CAAa,CACjBZ,WAAW,CAACa,iBAAZ,CAA8B,oBAA9B,EAGD,CAfH,EAgBGC,KAhBH,CAgBS,SAACC,KAAD,QAAWxB,CAAAA,KAAK,CAACwB,KAAN,CAAY,uBAAZ,CAAX,EAhBT,EAiBD,CAtBD,CAyBA;AACA,GAAMI,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,EAAI,CAEtBzB,aAAa,CAACD,UAAU,CAAG,CAAd,CAAb,CAED,CAJD,CAKA,GAAM2B,CAAAA,sBAAsB,CAAGjC,QAAQ,CAAC,CAAC,oBAAD,CAAsBM,UAAtB,CAAD,CAAoC,iBACzEL,CAAAA,qBAAqB,CAACS,KAAD,CAAOJ,UAAP,CADoD,EAApC,CACG,CAAC4B,eAAe,CAAC,IAAjB,CADH,CAAvC,CAIA;AACA;AACA;AAEA,GAAMC,CAAAA,OAAO,CAAGF,sBAAsB,CAACG,WAAvC,CACA,GAAMC,CAAAA,qBAAqB,CAAGJ,sBAAsB,CAACK,IAArD,CAGA;AAKA,MAAO,CAAED,qBAAqB,CAArBA,qBAAF,CAAwBR,oBAAoB,CAApBA,oBAAxB,CAA6Cf,eAAe,CAAfA,eAA7C,CAA8DqB,OAAO,CAAPA,OAA9D,CAAsEH,aAAa,CAAbA,aAAtE,CAAP,CACD,CAED,cAAe3B,CAAAA,gBAAf","sourcesContent":["import React,{useState} from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { getAdminNotifications } from \"../../APIS/notifications\";\r\nimport { DIOM_BASED_URLS } from \"../../config/url\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction UseNotifications() {\r\n  const[pageNumber,setPageNumber] = useState(1);\r\n  const[adminNotificationdta,setadminNotificationdta]=useState()\r\n  const token = localStorage.getItem(\"Token\");\r\n  const QueryClient = useQueryClient()\r\n\r\n\r\n\r\n\r\n  const markAllReadFunc=()=>{\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n\r\n  }\r\n\r\n  const notificationSeenFunc = (e)=>{\r\n   \r\n   \r\n\r\n\r\n    fetch(`${DIOM_BASED_URLS}/admin-notifications/${e.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        Accept: \"application/json, text/plain\",\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        markRead: true,\r\n      }),\r\n    })\r\n      .then((result3) => {\r\n        QueryClient.invalidateQueries(\"adminNotifications\");\r\n       \r\n      \r\n      })\r\n      .catch((error) => toast.error(\" Something went wrong\"));\r\n  }\r\n\r\n\r\n  // *************\r\n  const fetchMoreData=()=>{\r\n\r\n    setPageNumber(pageNumber + 1)\r\n  \r\n  }\r\n  const adminNotificationsdata = useQuery([\"adminNotifications\",pageNumber], () =>\r\n    getAdminNotifications(token,pageNumber),{refetchInterval:3000}\r\n\r\n  );\r\n  // const adminNotificationsdata = adminNotificationdta?adminNotificationdta.concat(adminNotificationsdta):adminNotificationdta\r\n  // setadminNotificationdta(adminNotificationsdta)\r\n  // console.log(\"adminNotificationsdata : \",adminNotificationsdata)\r\n \r\n  const hasMore = adminNotificationsdata.hasNextPage\r\n  const adminNotificationdata = adminNotificationsdata.data;\r\n \r\n\r\n  // *************\r\n\r\n\r\n\r\n\r\n  return { adminNotificationdata,notificationSeenFunc,markAllReadFunc ,hasMore,fetchMoreData};\r\n}\r\n\r\nexport default UseNotifications;\r\n"]},"metadata":{},"sourceType":"module"}